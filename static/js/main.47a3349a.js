/*! For license information please see main.47a3349a.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},110:function(e,t,n){"use strict";var r=n(441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var g=f(n,m);try{c(t,m,g)}catch(k){}}}}return t}},176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var h=0;h<s.length;h++)r.call(o,s[h])&&(u[s[h]]=o[s[h]])}}return u}},573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}return(0,a.default)(r)};var r,i=n(54),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},54:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,a,o){var s=i||"<<anonymous>>",u=o||r;if(null==n[r])return t?new Error("Required "+a+" `"+u+"` was not specified in `"+s+"`."):null;for(var c=arguments.length,l=Array(c>6?c-6:0),h=6;h<c;h++)l[h-6]=arguments[h];return e.apply(void 0,[n,r,s,a,u].concat(l))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=60103,x=60106,E=60107,T=60108,I=60114,C=60109,S=60110,N=60112,P=60113,R=60120,A=60115,O=60116,D=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;b=j("react.element"),x=j("react.portal"),E=j("react.fragment"),T=j("react.strict_mode"),I=j("react.profiler"),C=j("react.provider"),S=j("react.context"),N=j("react.forward_ref"),P=j("react.suspense"),R=j("react.suspense_list"),A=j("react.memo"),O=j("react.lazy"),D=j("react.block"),j("react.scope"),L=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),U=j("react.legacy_hidden")}var q,V="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function z(e){if(void 0===q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var W=!1;function H(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case I:return"Profiler";case T:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case A:return G(e.type);case D:return G(e._render);case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ie(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Se=null,Ne=null;function Pe(e){if(e=ri(e)){if("function"!==typeof Ce)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Ce(e.stateNode,e.type,t))}}function Re(e){Se?Ne?Ne.push(e):Ne=[e]:Se=e}function Ae(){if(Se){var e=Se,t=Ne;if(Ne=Se=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Oe(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Oe,Fe=!1,Ue=!1;function je(){null===Se&&null===Ne||(Le(),Ae())}function qe(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(h)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ye){Ve=!1}function ze(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,He=null,Ke=!1,Ge=null,Qe={onError:function(e){We=!0,He=e}};function Ye(e,t,n,r,i,a,o,s,u){We=!1,He=null,ze.apply(Qe,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ht=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function _t(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ht.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,_t)))}function bt(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==ct&&wt(ct,e),lt.forEach(t),ht.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)mt(n),null===n.blockedOn&&ft.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},Tt={},It={};function Ct(e){if(Tt[e])return Tt[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in It)return Tt[e]=n[t];return e}h&&(It=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var St=Ct("animationend"),Nt=Ct("animationiteration"),Pt=Ct("animationstart"),Rt=Ct("transitionend"),At=new Map,Ot=new Map,Dt=["abort","abort",St,"animationEnd",Nt,"animationIteration",Pt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),At.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Ft(u),i=Mt):0!==(s&=a)&&(r=Ft(s),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==s&&(r=Ft(s),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function qt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?qt(10,t):e;case 10:return 0===(e=Vt(192&~t))?qt(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Kt|0)|0},Ht=Math.log,Kt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function $t(e,t,n,r){Fe||Le();var i=Xt,a=Fe;Fe=!0;try{De(i,e,t,n,r)}finally{(Fe=a)||je()}}function Jt(e,t,n,r){Qt(Gt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=yt(st,e,t,n,r,i),!0;case"dragenter":return ut=yt(ut,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ht.set(a,yt(ht.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Ie(r);if(null!==(i=ni(i))){var a=$e(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Je(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=i({},fn,{view:0,detail:0}),vn=un(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(cn=e.screenX-hn.screenX,ln=e.screenY-hn.screenY):ln=cn=0,hn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=un(yn),gn=un(i({},yn,{dataTransfer:0})),kn=un(i({},pn,{relatedTarget:0})),_n=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=un(wn),xn=un(i({},fn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Sn(){return Cn}var Nn=i({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=un(Nn),Rn=un(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),On=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(Dn),Mn=[9,13,27,32],Fn=h&&"CompositionEvent"in window,Un=null;h&&"documentMode"in document&&(Un=document.documentMode);var jn=h&&"TextEvent"in window&&!Un,qn=h&&(!Fn||Un&&8<Un&&11>=Un),Vn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Qn(e,t,n,r){Re(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,$n=null;function Jn(e){Nr(e,0)}function Xn(e){if(J(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(h){var tr;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),$n=Yn=null)}function ar(e){if("value"===e.propertyName&&Xn($n)){var t=[];if(Qn(t,$n,e,Ie(e)),e=Jn,Fe)e(t);else{Fe=!0;try{Oe(e,t)}finally{Fe=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),$n=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn($n)}function ur(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},hr=Object.prototype.hasOwnProperty;function fr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=h&&"documentMode"in document&&11>=document.documentMode,kr=null,_r=null,wr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&fr(wr,r)||(wr=r,0<(r=Fr(_r,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Tr=0;Tr<Er.length;Tr++)Ot.set(Er[Tr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Sr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Ye.apply(this,arguments),We){if(!We)throw Error(o(198));var l=He;We=!1,He=null,Ke||(Ke=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Sr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Sr(i,s,c),a=u}}}if(Ke)throw e=Ge,Ke=!1,Ge=null,e}function Pr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Cr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Dr(a,e,i,t),o.add(s))}function Dr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Jt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,je()}}((function(){var r=a,i=Ie(n),o=[];e:{var s=At.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Pn;break;case"focusin":c="focus",u=kn;break;case"focusout":c="blur",u=kn;break;case"beforeblur":case"afterblur":u=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case St:case Nt:case Pt:u=_n;break;case Rt:u=On;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=qe(p,f))&&l.push(Mr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(h=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=mn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Ur(d))p++;for(d=0,v=f;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)f=Ur(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Ur(l),f=Ur(f)}l=null}else l=null;null!==u&&jr(o,s,u,l,!1),null!==c&&null!==h&&jr(o,h,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Zn;else if(Gn(s))if(er)y=cr;else{y=sr;var m=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ur);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ie(s,"number",s.value)),m=r?ii(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(kr=m,_r=r,wr=null);break;case"focusout":wr=_r=kr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Hn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(qn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Hn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(m=Fr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Wn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Vn);case"textInput":return(e=t.data)===Vn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=qe(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=qe(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=qe(n,a))&&o.unshift(Mr(n,u,s)):i||null!=(u=qe(n,a))&&o.push(Mr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function qr(){}var Vr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Kr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Jr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Xr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function hi(e,t){ui++,si[ui]=e.current,e.current=t}var fi={},di=ci(fi),pi=ci(!1),vi=fi;function yi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==fi)throw Error(o(168));hi(di,t),hi(pi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,vi=di.current,hi(di,e),hi(pi,pi.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=_i(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),hi(di,e)):li(pi),hi(pi,n)}var xi=null,Ei=null,Ti=a.unstable_runWithPriority,Ii=a.unstable_scheduleCallback,Ci=a.unstable_cancelCallback,Si=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Pi=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Ai=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ni?Ni:function(){},ji=null,qi=null,Vi=!1,Bi=Pi(),zi=1e4>Bi?Pi:function(){return Pi()-Bi};function Wi(){switch(Ri()){case Ai:return 99;case Oi:return 98;case Di:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Ai;case 98:return Oi;case 97:return Di;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Ki(e,t){return e=Hi(e),Ti(e,t)}function Gi(e,t,n){return e=Hi(e),Ii(e,t,n)}function Qi(){if(null!==qi){var e=qi;qi=null,Ci(e)}Yi()}function Yi(){if(!Vi&&null!==ji){Vi=!0;var e=0;try{var t=ji;Ki(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ii(Ai,Qi),n}finally{Vi=!1}}}var $i=w.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ha(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==o){for(f=a.baseState,s=0,h=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(l=h=d,c=f):h=h.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===h&&(c=f),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=h,Vs|=s,e.lanes=s,e.memoizedState=f}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ha(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ha(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=du(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ha(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(i,a))}function ka(e,t,n){var r=!1,i=fi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):fi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _a(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var ba=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ea(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ta(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ku(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Qu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=Ju(t,e.mode,n)).return=e,t}if(ba(t)||B(t))return(t=Qu(t,e.mode,n,null)).return=e,t;Ea(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?n.type===E?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(ba(n)||B(n))return null!==i?null:h(e,t,n,r,null);Ea(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return e=e.get(null===r.key?n:r.key)||null,r.type===E?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ba(r)||B(r))return h(t,e=e.get(n)||null,r,i,null);Ea(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,h=o,v=o=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===s.length)return n(i,h),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(o=a(h,o,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);v<s.length;v++)null!==(y=p(h,i,v,s[v],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),c}function y(i,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var h=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,c))&&(s=a(g,s,y),null===h?l=g:h.sibling=g,h=g);return l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=a(g,s,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===E&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case b:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===E){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===E?((r=Qu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Gu(a.type,a.key,a.props,null,e.mode,u)).ref=xa(e,r,a),u.return=e,e=u)}return s(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ju(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=$u(a,e.mode,u)).return=e,e=r),s(e);if(ba(a))return v(e,r,a,u);if(B(a))return y(e,r,a,u);if(l&&Ea(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ia=Ta(!0),Ca=Ta(!1),Sa={},Na=ci(Sa),Pa=ci(Sa),Ra=ci(Sa);function Aa(e){if(e===Sa)throw Error(o(174));return e}function Oa(e,t){switch(hi(Ra,t),hi(Pa,e),hi(Na,Sa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),hi(Na,t)}function Da(){li(Na),li(Pa),li(Ra)}function La(e){Aa(Ra.current);var t=Aa(Na.current),n=pe(t,e.type);t!==n&&(hi(Pa,e),hi(Na,n))}function Ma(e){Pa.current===e&&(li(Na),li(Pa))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,qa=null,Va=!1;function Ba(e,t){var n=Wu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(Va){var t=qa;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Va=!1,void(ja=e);Ba(ja,n)}ja=e,qa=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Va=!1,ja=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Ka(e){if(e!==ja)return!1;if(!Va)return Ha(e),Va=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=qa;t;)Ba(e,t),t=Qr(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){qa=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}qa=null}}else qa=ja?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){qa=ja=null,Va=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var $a=w.ReactCurrentDispatcher,Ja=w.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Oo:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,$a.current=Lo,e=n(r,i)}while(ro)}if($a.current=Ao,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,a=r):u=u.next=h,Za.lanes|=l,Vs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ho(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function fo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Os;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=$a.current,c=u.useState((function(){return fo(i,t,n)})),l=c[1],h=c[0];c=to;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(h,e)||(l(e),e=du(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Wt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:h}).dispatch=l=Ro.bind(null,Za,e),c.queue=e,c.baseQueue=null,h=fo(i,t,n),c.memoizedState=c.baseState=h),h}function vo(e,t,n){return po(uo(),e,t,n)}function yo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function ko(){return uo().memoizedState}function _o(e,t,n,r){var i=so();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function bo(e,t){return _o(516,4,e,t)}function xo(e,t){return wo(516,4,e,t)}function Eo(e,t){return wo(4,2,e,t)}function To(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Io(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,To.bind(null,t,e),n)}function Co(){}function So(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Po(e,t){var n=Wi();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=n}}))}function Ro(e,t,n){var r=fu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Ao={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_o(4,2,To.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:Co,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return bo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=Po.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Va){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return yo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:So,useContext:oa,useEffect:xo,useImperativeHandle:Io,useLayoutEffect:Eo,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:Co,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:So,useContext:oa,useEffect:xo,useImperativeHandle:Io,useLayoutEffect:Eo,useMemo:No,useReducer:ho,useRef:ko,useState:function(){return ho(co)},useDebugValue:Co,useDeferredValue:function(e){var t=ho(co),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=ho(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return ho(co)[0]},unstable_isNewReconciler:!1},Mo=w.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Ca(t,null,n,r):Ia(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function qo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Ku(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,a){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Wo(e,t,n,r,a)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},bu(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bu(t,e),null;t.memoizedState={baseLanes:0},bu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,bu(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Ho(e,t,n,r,i){if(mi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&_a(t,o,r,c),sa=!1;var f=t.memoizedState;o.state=f,da(t,r,o,i),u=t.memoizedState,s!==r||f!==u||pi.current||sa?("function"===typeof l&&(ya(t,n,l,r),u=t.memoizedState),(s=sa||ga(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Ji(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=yi(t,u=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&_a(t,o,r,u),sa=!1,f=t.memoizedState,o.state=f,da(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||pi.current||sa?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=sa||ga(t,n,c,r,f,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,a,i)}function Ko(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&bi(t,n,!1),as(e,t,a);r=t.stateNode,Mo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ia(t,e.child,null,a),t.child=Ia(t,null,s,a)):Uo(e,t,s,a),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Oa(e,t.containerInfo)}var Qo,Yo,$o,Jo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),hi(Fa,1&a),null===e?(void 0!==i.fallback&&Wa(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Yu(t,i,0,null),n=Qu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Ku(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ku(o,s),null!==e?r=Ku(e,r):(r=Qu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ku(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ku(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Va)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Da(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ka(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Aa(Ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Aa(Na.current),Ka(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xr]=t,r[Zr]=s,n){case"dialog":Pr("cancel",r),Pr("close",r);break;case"iframe":case"object":case"embed":Pr("load",r);break;case"video":case"audio":for(e=0;e<Ir.length;e++)Pr(Ir[e],r);break;case"source":Pr("error",r);break;case"img":case"image":case"link":Pr("error",r),Pr("load",r);break;case"details":Pr("toggle",r);break;case"input":ee(r,s),Pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pr("invalid",r);break;case"textarea":ue(r,s),Pr("invalid",r)}for(var c in Ee(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Pr("scroll",r));switch(n){case"input":$(r),re(r,s,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=qr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Te(n,r),n){case"dialog":Pr("cancel",e),Pr("close",e),a=r;break;case"iframe":case"object":case"embed":Pr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ir.length;a++)Pr(Ir[a],e);a=r;break;case"source":Pr("error",e),a=r;break;case"img":case"image":case"link":Pr("error",e),Pr("load",e),a=r;break;case"details":Pr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Pr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Pr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Pr("invalid",e);break;default:a=r}Ee(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?be(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&me(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ge(e,h):"number"===typeof h&&ge(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Pr("scroll",e):null!=h&&_(e,s,h,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=qr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Aa(Ra.current),Aa(Na.current),Ka(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ka(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Us&&(Us=3):(0!==Us&&3!==Us||(Us=4),null===Os||0===(134217727&Vs)&&0===(134217727&Bs)||gu(Os,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==Us||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Ks&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Ua(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Va)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Ks&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,hi(Fa,s?1&t|2:1&t),n):null;case 23:case 24:return xu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return xu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Aa(Na.current);var o,s=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=qr)}for(h in Ee(n,r),n=null,a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var c=a[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=a?a[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Pr("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$s||($s=!0,Js=r),ls(0,t)},n}function ds(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xs?Xs=new Set([this]):Xs.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){qu(e,n)}else t.current=null}function ys(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function ms(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,e),Mu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&bt(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(t,n);else{r=t;try{i()}catch(a){qu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){qu(t,a)}break;case 5:vs(t);break;case 4:Ts(e,t)}}function _s(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xs(e,n,t):Es(e,n,t)}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=qr));else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Ts(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ks(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Is(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,i),t=Te(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?be(n,u):"dangerouslySetInnerHTML"===s?me(n,u):"children"===s?ge(n,u):_(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,bt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hs=zi(),gs(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ss(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,Ps=w.ReactCurrentDispatcher,Rs=w.ReactCurrentOwner,As=0,Os=null,Ds=null,Ls=0,Ms=0,Fs=ci(0),Us=0,js=null,qs=0,Vs=0,Bs=0,zs=0,Ws=null,Hs=0,Ks=1/0;function Gs(){Ks=zi()+500}var Qs,Ys=null,$s=!1,Js=null,Xs=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,hu=!1;function fu(){return 0!==(48&As)?zi():-1!==su?su:su=zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===uu&&(uu=qs),0!==$i.transition){0!==cu&&(cu=null!==Ws?Ws.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&As)&&98===e?e=qt(12,uu):e=qt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Os&&(Bs|=t,4===Us&&gu(e,Ls));var r=Wi();1===t?0!==(8&As)&&0===(48&As)?ku(e):(yu(e,n),0===As&&(Gs(),Qi())):(0===(4&As)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),yu(e,n)),Ws=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function yu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Wt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var h=Mt;a[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ut(e,e===Os?Ls:0),t=Mt,0===r)null!==n&&(n!==Fi&&Ci(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ci(n)}15===t?(n=ku.bind(null,e),null===ji?(ji=[n],qi=Ii(Ai,Yi)):ji.push(n),n=Fi):14===t?n=Gi(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,mu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function mu(e){if(su=-1,cu=uu=0,0!==(48&As))throw Error(o(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=Ut(e,e===Os?Ls:0);if(0===n)return null;var r=n,i=As;As|=16;var a=Iu();for(Os===e&&Ls===r||(Gs(),Eu(e,r));;)try{Nu();break}catch(u){Tu(e,u)}if(na(),Ps.current=a,As=i,null!==Ds?r=0:(Os=null,Ls=0,r=Us),0!==(qs&Bs))Eu(e,0);else if(0!==r){if(2===r&&(As|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Cu(e,n))),1===r)throw t=js,Eu(e,0),gu(e,n),yu(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Au(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Hs+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Au.bind(null,e),r);break}Au(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Wt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Hr(Au.bind(null,e),n);break}Au(e);break;default:throw Error(o(329))}}return yu(e,zi()),e.callbackNode===t?mu.bind(null,e):null}function gu(e,t){for(t&=~zs,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&As))throw Error(o(327));if(Lu(),e===Os&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Cu(e,t);0!==(qs&Bs)&&(n=Cu(e,t=Ut(e,t)))}else n=Cu(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Cu(e,t))),1===n)throw n=js,Eu(e,0),gu(e,t),yu(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Au(e),yu(e,zi()),null}function _u(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Gs(),Qi())}}function wu(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Gs(),Qi())}}function bu(e,t){hi(Fs,Ms),Ms|=t,qs|=t}function xu(){Ms=Fs.current,li(Fs)}function Eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Da();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:xu()}n=n.return}Os=e,Ds=Ku(e.current,null),Ls=Ms=qs=t,Us=0,js=null,zs=Bs=Vs=0}function Tu(e,t){for(;;){var n=Ds;try{if(na(),$a.current=Ao,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,Rs.current=null,null===n||null===n.return){Us=1,js=t,Ds=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Fa.current),f=o;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var y=f.updateQueue;if(null===y){var m=new Set;m.add(c),f.updateQueue=m}else y.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=la(-1,1);g.tag=2,ha(s,g)}s.lanes|=1;break e}u=void 0,s=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new hs,u=new Set,k.set(c,u)):void 0===(u=k.get(c))&&(u=new Set,k.set(c,u)),!u.has(s)){u.add(s);var _=Vu.bind(null,a,c,s);c.then(_,_)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Us&&(Us=2),u=cs(u,s),f=o;do{switch(f.tag){case 3:a=u,f.flags|=4096,t&=-t,f.lanes|=t,fa(f,fs(0,a,t));break e;case 1:a=u;var w=f.type,b=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xs||!Xs.has(b)))){f.flags|=4096,t&=-t,f.lanes|=t,fa(f,ds(f,a,t));break e}}f=f.return}while(null!==f)}Ru(n)}catch(x){t=x,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function Iu(){var e=Ps.current;return Ps.current=Ao,null===e?Ao:e}function Cu(e,t){var n=As;As|=16;var r=Iu();for(Os===e&&Ls===t||Eu(e,t);;)try{Su();break}catch(i){Tu(e,i)}if(na(),As=n,Ps.current=r,null!==Ds)throw Error(o(261));return Os=null,Ls=0,Us}function Su(){for(;null!==Ds;)Pu(Ds)}function Nu(){for(;null!==Ds&&!Si();)Pu(Ds)}function Pu(e){var t=Qs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Ru(e):Ds=t,Rs.current=null}function Ru(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ms)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ms)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Us&&(Us=5)}function Au(e){var t=Wi();return Ki(99,Ou.bind(null,e,t)),null}function Ou(e,t){do{Lu()}while(null!==eu);if(0!==(48&As))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Wt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Os&&(Ds=Os=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=As,As|=32,Rs.current=null,Vr=Yt,mr(s=yr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(I){u=null;break e}var h=0,f=-1,d=-1,p=0,v=0,y=s,m=null;t:for(;;){for(var g;y!==u||0!==a&&3!==y.nodeType||(f=h+a),y!==c||0!==l&&3!==y.nodeType||(d=h+l),3===y.nodeType&&(h+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===s)break t;if(m===u&&++p===a&&(f=h),m===c&&++v===l&&(d=h),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Br={focusedElem:s,selectionRange:u},Yt=!1,lu=null,hu=!1,Ys=r;do{try{Du()}catch(I){if(null===Ys)throw Error(o(330));qu(Ys,I),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var k=Ys.flags;if(16&k&&ge(Ys.stateNode,""),128&k){var _=Ys.alternate;if(null!==_){var w=_.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:bs(Ys),Ys.flags&=-3;break;case 6:bs(Ys),Ys.flags&=-3,Is(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Is(Ys.alternate,Ys);break;case 4:Is(Ys.alternate,Ys);break;case 8:Ts(s,u=Ys);var b=u.alternate;_s(u),null!==b&&_s(b)}Ys=Ys.nextEffect}}catch(I){if(null===Ys)throw Error(o(330));qu(Ys,I),Ys=Ys.nextEffect}}while(null!==Ys);if(w=Br,_=yr(),k=w.focusedElem,s=w.selectionRange,_!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==s&&mr(k)&&(_=s.start,void 0===(w=s.end)&&(w=_),"selectionStart"in k?(k.selectionStart=_,k.selectionEnd=Math.min(w,k.value.length)):(w=(_=k.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),u=k.textContent.length,b=Math.min(s.start,u),s=void 0===s.end?b:Math.min(s.end,u),!w.extend&&b>s&&(u=s,s=b,b=u),u=pr(k,b),a=pr(k,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((_=_.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),b>s?(w.addRange(_),w.extend(a.node,a.offset)):(_.setEnd(a.node,a.offset),w.addRange(_))))),_=[];for(w=k;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<_.length;k++)(w=_[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Yt=!!Vr,Br=Vr=null,e.current=n,Ys=r;do{try{for(k=e;null!==Ys;){var x=Ys.flags;if(36&x&&ms(k,Ys.alternate,Ys),128&x){_=void 0;var E=Ys.ref;if(null!==E){var T=Ys.stateNode;Ys.tag,_=T,"function"===typeof E?E(_):E.current=_}}Ys=Ys.nextEffect}}catch(I){if(null===Ys)throw Error(o(330));qu(Ys,I),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Ui(),As=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((x=Ys).sibling=null,x.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Xs=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(I){}if(yu(e,zi()),$s)throw $s=!1,e=Js,Js=null,e;return 0!==(8&As)||Qi(),null}function Du(){for(;null!==Ys;){var e=Ys.alternate;hu||null===lu||(0!==(8&Ys.flags)?et(Ys,lu)&&(hu=!0):13===Ys.tag&&Ss(e,Ys)&&et(Ys,lu)&&(hu=!0));var t=Ys.flags;0!==(256&t)&&ys(e,Ys),0===(512&t)||Zs||(Zs=!0,Gi(97,(function(){return Lu(),null}))),Ys=Ys.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ki(e,Uu)}return!1}function Mu(e,t){nu.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Fu(e,t){ru.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Uu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&As))throw Error(o(331));var t=As;As|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));qu(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));qu(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return As=t,Qi(),!0}function ju(e,t,n){ha(e,t=fs(0,t=cs(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(zt(e,1,t),yu(e,t))}function qu(e,t){if(3===e.tag)ju(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ju(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xs||!Xs.has(r))){var i=ds(n,e=cs(t,e),1);if(ha(n,i),i=fu(),null!==(n=vu(n,1)))zt(n,1,i),yu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xs||!Xs.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Vu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(Ls&n)===n&&(4===Us||3===Us&&(62914560&Ls)===Ls&&500>zi()-Hs?Eu(e,0):zs|=n),yu(e,t)}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===uu&&(uu=qs),0===(t=Vt(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(zt(e,t,n),yu(e,n))}function zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wu(e,t,n,r){return new zu(e,t,n,r)}function Hu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ku(e,t){var n=e.alternate;return null===n?((n=Wu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Hu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Qu(n.children,i,a,t);case M:s=8,i|=16;break;case T:s=8,i|=1;break;case I:return(e=Wu(12,n,t,8|i)).elementType=I,e.type=I,e.lanes=a,e;case P:return(e=Wu(13,n,t,i)).type=P,e.elementType=P,e.lanes=a,e;case R:return(e=Wu(19,n,t,i)).elementType=R,e.lanes=a,e;case F:return Yu(n,i,a,t);case U:return(e=Wu(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case S:s=9;break e;case N:s=11;break e;case A:s=14;break e;case O:s=16,r=null;break e;case D:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Wu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qu(e,t,n,r){return(e=Wu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=Wu(23,e,r,t)).elementType=F,e.lanes=n,e}function $u(e,t,n){return(e=Wu(6,e,null,t)).lanes=n,e}function Ju(e,t,n){return(t=Wu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=fu(),s=du(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=_i(n,c,u);break e}}n=u}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ha(i,t),pu(i,s,a),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xu(e,t,null!=n&&!0===n.hydrate),t=Wu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}wu((function(){ec(t,o,e,i)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zu(e,t,null,n)}Qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:mi(t.type)&&wi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;hi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(hi(Fa,1&Fa.current),null!==(t=as(e,t,n))?t.sibling:null);hi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return as(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ya(t,r,s,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Ko(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Hu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===A)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=qo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(qa=Qr(t.stateNode.containerInfo.firstChild),ja=t,a=Va=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Ca(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Wa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Wr(r,i)?s=null:null!==a&&Wr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,s,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return Xo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ia(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(hi(Xi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=la(-1,n&-n)).tag=2,ha(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ia(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),qo(e,t,i,a=Ji(i.type,a),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,fu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,fu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=fu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=_u,De=function(e,t,n,r,i){var a=As;As|=4;try{return Ki(98,e.bind(null,t,n,r,i))}finally{0===(As=a)&&(Gs(),Qi())}},Le=function(){0===(49&As)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,yu(e,zi())}))}Qi()}(),Lu())},Me=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Gs(),Qi())}};var uc={Events:[ri,ii,ai,Re,Ae,Lu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{xi=hc.inject(lc),Ei=hc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!==(48&n))return e(t);As|=1;try{if(e)return Ki(99,e.bind(null,t))}finally{As=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=_u,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case y:case v:case u:return e;default:return t}}case i:return t}}}function b(e){return w(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return b(e)||w(e)===l},t.isConcurrentMode=b,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===k||e.$$typeof===_||e.$$typeof===m)},t.typeOf=w},441:function(e,t,n){"use strict";e.exports=n(372)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],f=n[1],d=n.index;if(s+=e.slice(o,d),o=d+h.length,f)s+=f[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],_=n[7];s&&(r.push(s),s="");var w=null!=v&&null!=p&&p!==v,b="+"===k||"*"===k,x="?"===k||"*"===k,E=n[2]||l,T=m||g;r.push({name:y||a++,prefix:v||"",delimiter:E,optional:x,repeat:b,partial:w,asterisk:!!_,pattern:T?c(T):_?".*":"[^"+u(E)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var a="",s=t||{},u=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var h,f=s[l.name];if(null==f){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(f)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(h=u(f[d]),!n[c].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(h)+"`");a+=(0===d?l.prefix:l.delimiter)+h}}else{if(h=l.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(f),!n[c].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+h+'"');a+=l.prefix+h}}else a+=l}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)o+=u(c);else{var f=u(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+f+d+")*"),o+=d=c.optional?c.partial?f+"("+d+")?":"(?:"+f+"("+d+"))?":f+"("+d+")"}}var p=u(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,h(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return f(a(e,n),t,n)}(e,t,n)}},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),a=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var _={current:null},w=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!b.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+I(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+I(s=e[c],c);u+=C(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=C(s=s.value,t,n,l=r+I(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function S(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function R(){var e=P.current;if(null===e)throw Error(d(321));return e}var A={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:S,forEach:function(e,t,n){S(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return S(e,(function(){t++})),t},toArray:function(e){return S(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!b.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r=h;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return P()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=T(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};u(k,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var b=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return m.prototype=g,u(b,"constructor",g),u(g,"constructor",m),m.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(E.prototype),u(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new E(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),u(b,s,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,h=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,w=_.port2;_.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,w.postMessage(null))},r=function(e,n){m=f((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function b(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<T(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>T(o,n))void 0!==u&&0>T(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>T(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],C=[],S=1,N=null,P=3,R=!1,A=!1,O=!1;function D(e){for(var t=x(C);null!==t;){if(null===t.callback)E(C);else{if(!(t.startTime<=e))break;E(C),t.sortIndex=t.expirationTime,b(I,t)}t=x(C)}}function L(e){if(O=!1,D(e),!A)if(null!==x(I))A=!0,n(M);else{var t=x(C);null!==t&&r(L,t.startTime-e)}}function M(e,n){A=!1,O&&(O=!1,i()),R=!0;var a=P;try{for(D(n),N=x(I);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,P=N.priorityLevel;var s=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===x(I)&&E(I),D(n)}else E(I);N=x(I)}if(null!==N)var u=!0;else{var c=x(C);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{N=null,P=a,R=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){A||R||(A=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return x(I)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:S++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,b(C,e),null===x(I)&&e===x(C)&&(O?i():O=!0,r(L,o-s))):(e.sortIndex=u,b(I,e),A||R||(A=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},391:function(e){"use strict";var t=function(){};e.exports=t},361:function(e,t,n){"use strict";e.exports=n.p+"static/media/cafelogo.1abcb376681ea3badbcd.png"},731:function(e,t,n){"use strict";e.exports=n.p+"static/media/gamingimagetwo.3f0d4f35234c6326d444.jpg"},977:function(e,t,n){"use strict";e.exports=n.p+"static/media/gamingtext.d6310f74be9385721e67.jpg"},954:function(e,t,n){"use strict";e.exports=n.p+"static/media/inverselogo.17d19960146ab0c37f2d.png"},343:function(e,t,n){"use strict";e.exports=n.p+"static/media/trytogame.b0a2cfcaa75ca74ca597.jpg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".4a634d08.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="teen-cafe:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/TeenCafe/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkteen_cafe=self.webpackChunkteen_cafe||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ua},SDK_VERSION:function(){return Wo},_DEFAULT_ENTRY_NAME:function(){return No},_addComponent:function(){return Oo},_addOrOverwriteComponent:function(){return Do},_apps:function(){return Ro},_clearComponents:function(){return Uo},_components:function(){return Ao},_getProvider:function(){return Mo},_registerComponent:function(){return Lo},_removeServiceInstance:function(){return Fo},deleteApp:function(){return Qo},getApp:function(){return Ko},getApps:function(){return Go},initializeApp:function(){return Ho},onLog:function(){return Jo},registerVersion:function(){return $o},setLogLevel:function(){return Xo}});var t=n(791),r=n(164);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){return s(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||c(e,t)||l()}function f(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function d(e,t){if(null==e)return{};var n,r,i=f(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function v(e){var n=p(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var y=function(e,n){var r=(0,t.useRef)(!0);(0,t.useEffect)((function(){if(!r.current)return e();r.current=!1}),n)};function m(){var e=(0,t.useRef)(!0),n=(0,t.useRef)((function(){return e.current}));return(0,t.useEffect)((function(){return function(){e.current=!1}}),[]),n.current}function g(e){var n=function(e){var n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((function(){return function(){return n.current()}}),[])}var k=Math.pow(2,31)-1;function _(e,t,n){var r=n-Date.now();e.current=r<=k?setTimeout(t,r):setTimeout((function(){return _(e,t,n)}),k)}function w(){var e=m(),n=(0,t.useRef)();return g((function(){return clearTimeout(n.current)})),(0,t.useMemo)((function(){var t=function(){return clearTimeout(n.current)};return{set:function(r,i){void 0===i&&(i=0),e()&&(t(),i<=k?n.current=setTimeout(r,i):_(n,r,Date.now()+i))},clear:t}}),[])}var b="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;"undefined"!==typeof document||b?t.useLayoutEffect:t.useEffect,new WeakMap;var x=n(184),E=["as","disabled"];function T(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.onClick,s=e.tabIndex,u=void 0===s?0:s,c=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var l={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},l];var h=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:u,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:h,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),h(e))}},l]}var I=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,E),a=h(T(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],s=a[1].tagName;return(0,x.jsx)(s,Object.assign({},i,o,{ref:t}))}));I.displayName="Button";var C=I,S=["onKeyDown"];var N=t.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,S),a=h(T(Object.assign({tagName:"a"},i)),1)[0],o=v((function(e){a.onKeyDown(e),null==r||r(e)}));return((n=i.href)&&"#"!==n.trim()||i.role)&&"button"!==i.role?(0,x.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,x.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));N.displayName="Anchor";var P=N,R=n(694),A=n.n(R);function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}n(176);function D(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function L(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function M(e,n){return Object.keys(n).reduce((function(r,i){var a,o=r,s=o[D(i)],u=o[i],c=f(o,[D(i),i].map(L)),l=n[i],h=function(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],s=a[1],u=void 0!==e,c=i.current;return i.current=u,!u&&c&&o!==n&&s(n),[u?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),s(e)}),[r])]}(u,s,e[l]),d=h[0],p=h[1];return O({},c,((a={})[i]=d,a[l]=p,a))}),e)}function F(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function U(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function j(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}F.__suppressDeprecationWarning=!0,U.__suppressDeprecationWarning=!0,j.__suppressDeprecationWarning=!0;var q=/-(.)/g;var V=t.createContext({prefixes:{}});V.Consumer,V.Provider;function B(e,n){var r=(0,t.useContext)(V).prefixes;return e||r[n]||n}var z=["className","bsPrefix","as"],W=function(e){return e[0].toUpperCase()+(t=e,t.replace(q,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function H(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,i=void 0===r?W(e):r,a=n.Component,s=n.defaultProps,u=t.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,s=t.as,u=void 0===s?a||"div":s,c=d(t,z),l=B(i,e);return(0,x.jsx)(u,o({ref:n,className:A()(r,l)},c))}));return u.defaultProps=s,u.displayName=i,u}var K=H("carousel-caption"),G=["as","bsPrefix","className"],Q=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.bsPrefix,a=e.className,s=d(e,G),u=A()(a,B(i,"carousel-item"));return(0,x.jsx)(r,o(o({ref:t},s),{},{className:u}))}));Q.displayName="CarouselItem";var Y=Q;function $(e,n){var r=0;return t.Children.map(e,(function(e){return t.isValidElement(e)?n(e,r++):e}))}function J(e){return e&&e.ownerDocument||document}function X(e,t){return function(e){var t=J(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Z=/([A-Z])/g;var ee=/^ms-/;function te(e){return function(e){return e.replace(Z,"-$1").toLowerCase()}(e).replace(ee,"-ms-")}var ne=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var re=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(te(t))||X(e).getPropertyValue(te(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!ne.test(e))}(i)?n+=te(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(te(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},ie=!("undefined"===typeof window||!window.document||!window.document.createElement),ae=!1,oe=!1;try{var se={get passive(){return ae=!0},get once(){return oe=ae=!0}};ie&&(window.addEventListener("test",se,se),window.removeEventListener("test",se,!0))}catch(kz){}var ue=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!oe){var i=r.once,a=r.capture,o=n;!oe&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,ae?r:a)}e.addEventListener(t,n,r)};var ce=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var le=function(e,t,n,r){return ue(e,t,n,r),function(){ce(e,t,n,r)}};function he(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=le(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function fe(e,t,n,r){null==n&&(n=function(e){var t=re(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=he(e,n,r),a=le(e,"transitionend",t);return function(){i(),a()}}function de(e,t){var n=re(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function pe(e,t){var n=de(e,"transitionDuration"),r=de(e,"transitionDelay"),i=fe(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}function ve(e){e.offsetHeight}function ye(e,t){return ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ye(e,t)}function me(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ye(e,t)}var ge=!1,ke=t.createContext(null),_e="unmounted",we="exited",be="entering",xe="entered",Ee="exiting",Te=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=we,r.appearStatus=be):i=xe:i=t.unmountOnExit||t.mountOnEnter?_e:we,r.state={status:i},r.nextCallback=null,r}me(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===_e?{status:we}:null};var i=n.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==be&&n!==xe&&(t=be):n!==be&&n!==xe||(t=Ee)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===be?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===we&&this.setState({status:_e})},i.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,a=this.props.nodeRef?[i]:[r.findDOMNode(this),i],o=a[0],s=a[1],u=this.getTimeouts(),c=i?u.appear:u.enter;!e&&!n||ge?this.safeSetState({status:xe},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:be},(function(){t.props.onEntering(o,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:xe},(function(){t.props.onEntered(o,s)}))}))})))},i.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!ge?(this.props.onExit(i),this.safeSetState({status:Ee},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:we},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:we},(function(){e.props.onExited(i)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],s=a[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===_e)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,f(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(ke.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function Ie(){}Te.contextType=ke,Te.propTypes={},Te.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ie,onEntering:Ie,onEntered:Ie,onExit:Ie,onExiting:Ie,onExited:Ie},Te.UNMOUNTED=_e,Te.EXITED=we,Te.ENTERING=be,Te.ENTERED=xe,Te.EXITING=Ee;var Ce=Te,Se=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var Ne=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=Se(e),r=Se(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};var Pe=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],Re=t.forwardRef((function(e,n){var i=e.onEnter,a=e.onEntering,s=e.onEntered,u=e.onExit,c=e.onExiting,l=e.onExited,h=e.addEndListener,f=e.children,p=e.childRef,v=d(e,Pe),y=(0,t.useRef)(null),m=Ne(y,p),g=function(e){var t;m((t=e)&&"setState"in t?r.findDOMNode(t):null!=t?t:null)},k=function(e){return function(t){e&&y.current&&e(y.current,t)}},_=(0,t.useCallback)(k(i),[i]),w=(0,t.useCallback)(k(a),[a]),b=(0,t.useCallback)(k(s),[s]),E=(0,t.useCallback)(k(u),[u]),T=(0,t.useCallback)(k(c),[c]),I=(0,t.useCallback)(k(l),[l]),C=(0,t.useCallback)(k(h),[h]);return(0,x.jsx)(Ce,o(o({ref:n},v),{},{onEnter:_,onEntered:b,onEntering:w,onExit:E,onExited:I,onExiting:T,addEndListener:C,nodeRef:y,children:"function"===typeof f?function(e,t){return f(e,o(o({},t),{},{ref:g}))}:t.cloneElement(f,{ref:g})}))})),Ae=Re,Oe=["as","bsPrefix","slide","fade","controls","indicators","indicatorLabels","activeIndex","onSelect","onSlide","onSlid","interval","keyboard","onKeyDown","pause","onMouseOver","onMouseOut","wrap","touch","onTouchStart","onTouchMove","onTouchEnd","prevIcon","prevLabel","nextIcon","nextLabel","variant","className","children"],De={slide:!0,fade:!1,controls:!0,indicators:!0,indicatorLabels:[],defaultActiveIndex:0,interval:5e3,keyboard:!0,pause:"hover",wrap:!0,touch:!0,prevIcon:(0,x.jsx)("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:"Previous",nextIcon:(0,x.jsx)("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:"Next"};var Le=t.forwardRef((function(e,n){var r=M(e,{activeIndex:"onSelect"}),i=r.as,a=void 0===i?"div":i,s=r.bsPrefix,u=r.slide,c=r.fade,l=r.controls,f=r.indicators,m=r.indicatorLabels,g=r.activeIndex,k=r.onSelect,_=r.onSlide,b=r.onSlid,E=r.interval,T=r.keyboard,I=r.onKeyDown,C=r.pause,S=r.onMouseOver,N=r.onMouseOut,R=r.wrap,O=r.touch,D=r.onTouchStart,L=r.onTouchMove,F=r.onTouchEnd,U=r.prevIcon,j=r.prevLabel,q=r.nextIcon,z=r.nextLabel,W=r.variant,H=r.className,K=r.children,G=d(r,Oe),Q=B(s,"carousel"),Y="rtl"===(0,t.useContext)(V).dir,J=(0,t.useRef)(null),X=h((0,t.useState)("next"),2),Z=X[0],ee=X[1],te=h((0,t.useState)(!1),2),ne=te[0],re=te[1],ie=h((0,t.useState)(!1),2),ae=ie[0],oe=ie[1],se=h((0,t.useState)(g||0),2),ue=se[0],ce=se[1];ae||g===ue||(J.current?ee(J.current):ee((g||0)>ue?"next":"prev"),u&&oe(!0),ce(g||0)),(0,t.useEffect)((function(){J.current&&(J.current=null)}));var le,he=0;!function(e,n){var r=0;t.Children.forEach(e,(function(e){t.isValidElement(e)&&n(e,r++)}))}(K,(function(e,t){++he,t===g&&(le=e.props.interval)}));var fe=p(le),de=(0,t.useCallback)((function(e){if(!ae){var t=ue-1;if(t<0){if(!R)return;t=he-1}J.current="prev",null==k||k(t,e)}}),[ae,ue,k,R,he]),ye=v((function(e){if(!ae){var t=ue+1;if(t>=he){if(!R)return;t=0}J.current="next",null==k||k(t,e)}})),me=(0,t.useRef)();(0,t.useImperativeHandle)(n,(function(){return{element:me.current,prev:de,next:ye}}));var ge=v((function(){!document.hidden&&function(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;var t=getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"none"!==getComputedStyle(e.parentNode).display}(me.current)&&(Y?de():ye())})),ke="next"===Z?"start":"end";y((function(){u||(null==_||_(ue,ke),null==b||b(ue,ke))}),[ue]);var _e="".concat(Q,"-item-").concat(Z),we="".concat(Q,"-item-").concat(ke),be=(0,t.useCallback)((function(e){ve(e),null==_||_(ue,ke)}),[_,ue,ke]),xe=(0,t.useCallback)((function(){oe(!1),null==b||b(ue,ke)}),[b,ue,ke]),Ee=(0,t.useCallback)((function(e){if(T&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":return e.preventDefault(),void(Y?ye(e):de(e));case"ArrowRight":return e.preventDefault(),void(Y?de(e):ye(e))}null==I||I(e)}),[T,I,de,ye,Y]),Te=(0,t.useCallback)((function(e){"hover"===C&&re(!0),null==S||S(e)}),[C,S]),Ie=(0,t.useCallback)((function(e){re(!1),null==N||N(e)}),[N]),Ce=(0,t.useRef)(0),Se=(0,t.useRef)(0),Ne=w(),Pe=(0,t.useCallback)((function(e){Ce.current=e.touches[0].clientX,Se.current=0,"hover"===C&&re(!0),null==D||D(e)}),[C,D]),Re=(0,t.useCallback)((function(e){e.touches&&e.touches.length>1?Se.current=0:Se.current=e.touches[0].clientX-Ce.current,null==L||L(e)}),[L]),De=(0,t.useCallback)((function(e){if(O){var t=Se.current;Math.abs(t)>40&&(t>0?de(e):ye(e))}"hover"===C&&Ne.set((function(){re(!1)}),E||void 0),null==F||F(e)}),[O,C,de,ye,Ne,E,F]),Le=null!=E&&!ne&&!ae,Me=(0,t.useRef)();(0,t.useEffect)((function(){var e,t;if(Le){var n=Y?de:ye;return Me.current=window.setInterval(document.visibilityState?ge:n,null!=(e=null!=(t=fe.current)?t:E)?e:void 0),function(){null!==Me.current&&clearInterval(Me.current)}}}),[Le,de,ye,fe,E,ge,Y]);var Fe=(0,t.useMemo)((function(){return f&&Array.from({length:he},(function(e,t){return function(e){null==k||k(t,e)}}))}),[f,he,k]);return(0,x.jsxs)(a,o(o({ref:me},G),{},{onKeyDown:Ee,onMouseOver:Te,onMouseOut:Ie,onTouchStart:Pe,onTouchMove:Re,onTouchEnd:De,className:A()(H,Q,u&&"slide",c&&"".concat(Q,"-fade"),W&&"".concat(Q,"-").concat(W)),children:[f&&(0,x.jsx)("div",{className:"".concat(Q,"-indicators"),children:$(K,(function(e,t){return(0,x.jsx)("button",{type:"button","data-bs-target":"","aria-label":null!=m&&m.length?m[t]:"Slide ".concat(t+1),className:t===ue?"active":void 0,onClick:Fe?Fe[t]:void 0,"aria-current":t===ue},t)}))}),(0,x.jsx)("div",{className:"".concat(Q,"-inner"),children:$(K,(function(e,n){var r=n===ue;return u?(0,x.jsx)(Ae,{in:r,onEnter:r?be:void 0,onEntered:r?xe:void 0,addEndListener:pe,children:function(n,i){return t.cloneElement(e,o(o({},i),{},{className:A()(e.props.className,r&&"entered"!==n&&_e,("entered"===n||"exiting"===n)&&"active",("entering"===n||"exiting"===n)&&we)}))}}):t.cloneElement(e,{className:A()(e.props.className,r&&"active")})}))}),l&&(0,x.jsxs)(x.Fragment,{children:[(R||0!==g)&&(0,x.jsxs)(P,{className:"".concat(Q,"-control-prev"),onClick:de,children:[U,j&&(0,x.jsx)("span",{className:"visually-hidden",children:j})]}),(R||g!==he-1)&&(0,x.jsxs)(P,{className:"".concat(Q,"-control-next"),onClick:ye,children:[q,z&&(0,x.jsx)("span",{className:"visually-hidden",children:z})]})]})]}))}));Le.displayName="Carousel",Le.defaultProps=De;var Me=Object.assign(Le,{Caption:K,Item:Y}),Fe=n(343),Ue=n(977),je=n(731);function qe(){return(0,x.jsx)("div",{children:(0,x.jsxs)(Me,{className:"h-75",children:[(0,x.jsx)(Me.Item,{children:(0,x.jsx)("img",{className:"d-block w-100",src:Fe,alt:"First slide"})}),(0,x.jsx)(Me.Item,{children:(0,x.jsx)("img",{className:"d-block w-100",src:je,alt:"Second slide"})}),(0,x.jsx)(Me.Item,{children:(0,x.jsx)("img",{className:"d-block w-100",src:Ue,alt:"Third slide"})})]})})}var Ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},Be=t.createContext(null),ze=["bsPrefix","className","as"],We=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=d(e,ze);n=B(n,"navbar-brand");var s=i||(a.href?"a":"span");return(0,x.jsx)(s,o(o({},a),{},{ref:t,className:A()(r,n)}))}));We.displayName="NavbarBrand";var He=We;var Ke,Ge=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)},Qe=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],Ye={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function $e(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=Ye[e];return n+parseInt(re(t,r[0]),10)+parseInt(re(t,r[1]),10)}var Je=(i(Ke={},we,"collapse"),i(Ke,Ee,"collapsing"),i(Ke,be,"collapsing"),i(Ke,xe,"collapse show"),Ke),Xe={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:$e},Ze=t.forwardRef((function(e,n){var r=e.onEnter,i=e.onEntering,a=e.onEntered,s=e.onExit,u=e.onExiting,c=e.className,l=e.children,h=e.dimension,f=void 0===h?"height":h,p=e.getDimensionValue,v=void 0===p?$e:p,y=d(e,Qe),m="function"===typeof f?f():f,g=(0,t.useMemo)((function(){return Ge((function(e){e.style[m]="0"}),r)}),[m,r]),k=(0,t.useMemo)((function(){return Ge((function(e){var t="scroll".concat(m[0].toUpperCase()).concat(m.slice(1));e.style[m]="".concat(e[t],"px")}),i)}),[m,i]),_=(0,t.useMemo)((function(){return Ge((function(e){e.style[m]=null}),a)}),[m,a]),w=(0,t.useMemo)((function(){return Ge((function(e){e.style[m]="".concat(v(m,e),"px"),ve(e)}),s)}),[s,v,m]),b=(0,t.useMemo)((function(){return Ge((function(e){e.style[m]=null}),u)}),[m,u]);return(0,x.jsx)(Ae,o(o({ref:n,addEndListener:pe},y),{},{"aria-expanded":y.role?y.in:null,onEnter:g,onEntering:k,onEntered:_,onExit:w,onExiting:b,childRef:l.ref,children:function(e,n){return t.cloneElement(l,o(o({},n),{},{className:A()(c,l.props.className,Je[e],"width"===m&&"collapse-horizontal")}))}}))}));Ze.defaultProps=Xe;var et=Ze,tt=t.createContext(null);tt.displayName="NavbarContext";var nt=tt,rt=["children","bsPrefix"],it=t.forwardRef((function(e,n){var r=e.children,i=e.bsPrefix,a=d(e,rt);i=B(i,"navbar-collapse");var s=(0,t.useContext)(nt);return(0,x.jsx)(et,o(o({in:!(!s||!s.expanded)},a),{},{children:(0,x.jsx)("div",{ref:n,className:i,children:r})}))}));it.displayName="NavbarCollapse";var at=it,ot=["bsPrefix","className","children","label","as","onClick"],st=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,s=e.label,u=e.as,c=void 0===u?"button":u,l=e.onClick,h=d(e,ot);r=B(r,"navbar-toggler");var f=(0,t.useContext)(nt)||{},p=f.onToggle,y=f.expanded,m=v((function(e){l&&l(e),p&&p()}));return"button"===c&&(h.type="button"),(0,x.jsx)(c,o(o({},h),{},{ref:n,onClick:m,"aria-label":s,className:A()(i,r,!y&&"collapsed"),children:a||(0,x.jsx)("span",{className:"".concat(r,"-icon")})}))}));st.displayName="NavbarToggle",st.defaultProps={label:"Toggle navigation"};var ut=st;function ct(e){void 0===e&&(e=J());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(kz){return e.body}}function lt(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function ht(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ft(e){return function(e){if(Array.isArray(e))return u(e)}(e)||ht(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t,n){return t&&pt(e.prototype,t),n&&pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yt(e){return"".concat("data-rr-ui-").concat(e)}var mt=yt("modal-open"),gt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,i=void 0===r||r,a=t.isRTL,o=void 0!==a&&a;dt(this,e),this.handleContainerOverflow=i,this.isRTL=o,this.modals=[],this.ownerDocument=n}return vt(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=i({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(re(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(mt,""),re(r,t)}},{key:"reset",value:function(){var e=this;ft(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(mt),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),kt=gt,_t=(0,t.createContext)(ie?window:void 0);_t.Provider;function wt(){return(0,t.useContext)(_t)}var bt=function(e,t){var n;return ie?null==e?(t||J()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};var xt,Et=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Tt(e){var n=wt(),r=e||function(e){return xt||(xt=new kt({ownerDocument:null==e?void 0:e.document})),xt}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:function(){return r.add(i.current)},remove:function(){return r.remove(i.current)},isTopModal:function(){return r.isTopModal(i.current)},setDialogRef:(0,t.useCallback)((function(e){i.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((function(e){i.current.backdrop=e}),[])})}var It=(0,t.forwardRef)((function(e,n){var i=e.show,a=void 0!==i&&i,o=e.role,s=void 0===o?"dialog":o,u=e.className,c=e.style,l=e.children,f=e.backdrop,d=void 0===f||f,p=e.keyboard,y=void 0===p||p,k=e.onBackdropClick,_=e.onEscapeKeyDown,w=e.transition,b=e.backdropTransition,E=e.autoFocus,T=void 0===E||E,I=e.enforceFocus,C=void 0===I||I,S=e.restoreFocus,N=void 0===S||S,P=e.restoreFocusOptions,R=e.renderDialog,A=e.renderBackdrop,O=void 0===A?function(e){return(0,x.jsx)("div",Object.assign({},e))}:A,D=e.manager,L=e.container,M=e.onShow,F=e.onHide,U=void 0===F?function(){}:F,j=e.onExit,q=e.onExited,V=e.onExiting,B=e.onEnter,z=e.onEntering,W=e.onEntered,H=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Et),K=function(e,n){var r=wt(),i=h((0,t.useState)((function(){return bt(e,null==r?void 0:r.document)})),2),a=i[0],o=i[1];if(!a){var s=bt(e);s&&o(s)}return(0,t.useEffect)((function(){n&&a&&n(a)}),[n,a]),(0,t.useEffect)((function(){var t=bt(e);t!==a&&o(t)}),[e,a]),a}(L),G=Tt(D),Q=m(),Y=function(e){var n=(0,t.useRef)(null);return(0,t.useEffect)((function(){n.current=e})),n.current}(a),$=h((0,t.useState)(!a),2),J=$[0],X=$[1],Z=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return G}),[G]),ie&&!Y&&a&&(Z.current=ct()),w||a||J?a&&J&&X(!1):X(!0);var ee=v((function(){if(G.add(),se.current=le(document,"keydown",ae),oe.current=le(document,"focus",(function(){return setTimeout(ne)}),!0),M&&M(),T){var e=ct(document);G.dialog&&e&&!lt(G.dialog,e)&&(Z.current=e,G.dialog.focus())}})),te=v((function(){var e;(G.remove(),null==se.current||se.current(),null==oe.current||oe.current(),N)&&(null==(e=Z.current)||null==e.focus||e.focus(P),Z.current=null)}));(0,t.useEffect)((function(){a&&K&&ee()}),[a,K,ee]),(0,t.useEffect)((function(){J&&te()}),[J,te]),g((function(){te()}));var ne=v((function(){if(C&&Q()&&G.isTopModal()){var e=ct();G.dialog&&e&&!lt(G.dialog,e)&&G.dialog.focus()}})),re=v((function(e){e.target===e.currentTarget&&(null==k||k(e),!0===d&&U())})),ae=v((function(e){y&&27===e.keyCode&&G.isTopModal()&&(null==_||_(e),e.defaultPrevented||U())})),oe=(0,t.useRef)(),se=(0,t.useRef)(),ue=w;if(!K||!(a||ue&&!J))return null;var ce=Object.assign({role:s,ref:G.setDialogRef,"aria-modal":"dialog"===s||void 0},H,{style:c,className:u,tabIndex:-1}),he=R?R(ce):(0,x.jsx)("div",Object.assign({},ce,{children:t.cloneElement(l,{role:"document"})}));ue&&(he=(0,x.jsx)(ue,{appear:!0,unmountOnExit:!0,in:!!a,onExit:j,onExiting:V,onExited:function(){X(!0),null==q||q.apply(void 0,arguments)},onEnter:B,onEntering:z,onEntered:W,children:he}));var fe=null;if(d){var de=b;fe=O({ref:G.setBackdropRef,onClick:re}),de&&(fe=(0,x.jsx)(de,{appear:!0,in:!!a,children:fe}))}return(0,x.jsx)(x.Fragment,{children:r.createPortal((0,x.jsxs)(x.Fragment,{children:[fe,he]}),K)})}));It.displayName="Modal";var Ct,St=Object.assign(It,{Manager:kt}),Nt=["className","children","transitionClasses"],Pt=(i(Ct={},be,"show"),i(Ct,xe,"show"),Ct),Rt=t.forwardRef((function(e,n){var r=e.className,i=e.children,a=e.transitionClasses,s=void 0===a?{}:a,u=d(e,Nt),c=(0,t.useCallback)((function(e,t){ve(e),null==u.onEnter||u.onEnter(e,t)}),[u]);return(0,x.jsx)(Ae,o(o({ref:n,addEndListener:pe},u),{},{onEnter:c,childRef:i.ref,children:function(e,n){return t.cloneElement(i,o(o({},n),{},{className:A()("fade",r,i.props.className,Pt[e],s[e])}))}}))}));Rt.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Rt.displayName="Fade";var At,Ot=Rt,Dt=H("offcanvas-body"),Lt=["bsPrefix","className","children"],Mt=(i(At={},be,"show"),i(At,xe,"show"),At),Ft=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,s=d(e,Lt);return r=B(r,"offcanvas"),(0,x.jsx)(Ae,o(o({ref:n,addEndListener:pe},s),{},{childRef:a.ref,children:function(e,n){return t.cloneElement(a,o(o({},n),{},{className:A()(i,a.props.className,(e===be||e===Ee)&&"".concat(r,"-toggling"),Mt[e])}))}}))}));Ft.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Ft.displayName="OffcanvasToggling";var Ut=Ft,jt=t.createContext({onHide:function(){}}),qt=n(7),Vt=n.n(qt),Bt=["className","variant"],zt={"aria-label":Vt().string,onClick:Vt().func,variant:Vt().oneOf(["white"])},Wt=t.forwardRef((function(e,t){var n=e.className,r=e.variant,i=d(e,Bt);return(0,x.jsx)("button",o({ref:t,type:"button",className:A()("btn-close",r&&"btn-close-".concat(r),n)},i))}));Wt.displayName="CloseButton",Wt.propTypes=zt,Wt.defaultProps={"aria-label":"Close"};var Ht=Wt,Kt=["closeLabel","closeVariant","closeButton","onHide","children"],Gt=t.forwardRef((function(e,n){var r=e.closeLabel,i=e.closeVariant,a=e.closeButton,s=e.onHide,u=e.children,c=d(e,Kt),l=(0,t.useContext)(jt),h=v((function(){null==l||l.onHide(),null==s||s()}));return(0,x.jsxs)("div",o(o({ref:n},c),{},{children:[u,a&&(0,x.jsx)(Ht,{"aria-label":r,variant:i,onClick:h})]}))}));Gt.defaultProps={closeLabel:"Close",closeButton:!1};var Qt=Gt,Yt=["bsPrefix","className"],$t=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=d(e,Yt);return n=B(n,"offcanvas-header"),(0,x.jsx)(Qt,o(o({ref:t},i),{},{className:A()(r,n)}))}));$t.displayName="OffcanvasHeader",$t.defaultProps={closeLabel:"Close",closeButton:!1};var Jt=$t,Xt=function(e){return t.forwardRef((function(t,n){return(0,x.jsx)("div",o(o({},t),{},{ref:n,className:A()(t.className,e)}))}))},Zt=H("offcanvas-title",{Component:Xt("h5")});function en(e){return en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},en(e)}function tn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=en(e)););return e}function nn(){return nn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=tn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},nn.apply(this,arguments)}function rn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ye(e,t)}function an(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(kz){return!1}}function on(e){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(e)}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function un(e,t){if(t&&("object"===on(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sn(e)}function cn(e){var t=an();return function(){var n,r=en(e);if(t){var i=en(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return un(this,n)}}var ln=Function.prototype.bind.call(Function.prototype.call,[].slice);function hn(e,t){return ln(e.querySelectorAll(t))}function fn(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var dn,pn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",vn=".sticky-top",yn=".navbar-toggler",mn=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,re(t,i({},e,"".concat(parseFloat(re(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],re(t,i({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;nn(en(n.prototype),"setContainerStyle",this).call(this,e);var r,i,a=this.getElement();if(i="modal-open",(r=a).classList?r.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,i)||("string"===typeof r.className?r.className=r.className+" "+i:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+i)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";hn(a,pn).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),hn(a,vn).forEach((function(n){return t.adjustAndStore(s,n,-e.scrollBarWidth)})),hn(a,yn).forEach((function(n){return t.adjustAndStore(s,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;nn(en(n.prototype),"removeContainerStyle",this).call(this,e);var r,i,a=this.getElement();i="modal-open",(r=a).classList?r.classList.remove(i):"string"===typeof r.className?r.className=fn(r.className,i):r.setAttribute("class",fn(r.className&&r.className.baseVal||"",i));var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";hn(a,pn).forEach((function(e){return t.restore(o,e)})),hn(a,vn).forEach((function(e){return t.restore(s,e)})),hn(a,yn).forEach((function(e){return t.restore(s,e)}))}}]),n}(kt);var gn=mn,kn=["bsPrefix","className","children","aria-labelledby","placement","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function _n(e){return(0,x.jsx)(Ut,o({},e))}function wn(e){return(0,x.jsx)(Ot,o({},e))}var bn=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,s=e["aria-labelledby"],u=e.placement,c=e.show,l=e.backdrop,h=e.keyboard,f=e.scroll,p=e.onEscapeKeyDown,y=e.onShow,m=e.onHide,g=e.container,k=e.autoFocus,_=e.enforceFocus,w=e.restoreFocus,b=e.restoreFocusOptions,E=e.onEntered,T=e.onExit,I=e.onExiting,C=e.onEnter,S=e.onEntering,N=e.onExited,P=e.backdropClassName,R=e.manager,O=d(e,kn),D=(0,t.useRef)();r=B(r,"offcanvas");var L=((0,t.useContext)(nt)||{}).onToggle,M=v((function(){null==L||L(),null==m||m()})),F=(0,t.useMemo)((function(){return{onHide:M}}),[M]);var U=(0,t.useCallback)((function(e){return(0,x.jsx)("div",o(o({},e),{},{className:A()("".concat(r,"-backdrop"),P)}))}),[P,r]);return(0,x.jsx)(jt.Provider,{value:F,children:(0,x.jsx)(St,{show:c,ref:n,backdrop:l,container:g,keyboard:h,autoFocus:k,enforceFocus:_&&!f,restoreFocus:w,restoreFocusOptions:b,onEscapeKeyDown:p,onShow:y,onHide:M,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==C||C.apply(void 0,[e].concat(n))},onEntering:S,onEntered:E,onExit:T,onExiting:I,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==N||N.apply(void 0,n)},manager:R||(f?(D.current||(D.current=new gn({handleContainerOverflow:!1})),D.current):function(e){return dn||(dn=new mn(e)),dn}()),transition:_n,backdropTransition:wn,renderBackdrop:U,renderDialog:function(e){return(0,x.jsx)("div",o(o(o({role:"dialog"},e),O),{},{className:A()(i,r,"".concat(r,"-").concat(u)),"aria-labelledby":s,children:a}))}})})}));bn.displayName="Offcanvas",bn.defaultProps={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};var xn=Object.assign(bn,{Body:Dt,Header:Jt,Title:Zt}),En=t.forwardRef((function(e,n){var r=(0,t.useContext)(nt);return(0,x.jsx)(xn,o({ref:n,show:!(null==r||!r.expanded)},e))}));En.displayName="NavbarOffcanvas";var Tn=En,In=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],Cn=H("navbar-text",{Component:"span"}),Sn=t.forwardRef((function(e,n){var r=M(e,{expanded:"onToggle"}),i=r.bsPrefix,a=r.expand,s=r.variant,u=r.bg,c=r.fixed,l=r.sticky,h=r.className,f=r.as,p=void 0===f?"nav":f,v=r.expanded,y=r.onToggle,m=r.onSelect,g=r.collapseOnSelect,k=d(r,In),_=B(i,"navbar"),w=(0,t.useCallback)((function(){null==m||m.apply(void 0,arguments),g&&v&&(null==y||y(!1))}),[m,g,v,y]);void 0===k.role&&"nav"!==p&&(k.role="navigation");var b="".concat(_,"-expand");"string"===typeof a&&(b="".concat(b,"-").concat(a));var E=(0,t.useMemo)((function(){return{onToggle:function(){return null==y?void 0:y(!v)},bsPrefix:_,expanded:!!v}}),[_,v,y]);return(0,x.jsx)(nt.Provider,{value:E,children:(0,x.jsx)(Be.Provider,{value:w,children:(0,x.jsx)(p,o(o({ref:n},k),{},{className:A()(h,_,a&&b,s&&"".concat(_,"-").concat(s),u&&"bg-".concat(u),l&&"sticky-".concat(l),c&&"fixed-".concat(c))}))})})}));Sn.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},Sn.displayName="Navbar";var Nn=Object.assign(Sn,{Brand:He,Collapse:at,Offcanvas:Tn,Text:Cn,Toggle:ut}),Pn=["bsPrefix","fluid","as","className"],Rn=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,a=void 0===i?"div":i,s=e.className,u=d(e,Pn),c=B(n,"container"),l="string"===typeof r?"-".concat(r):"-fluid";return(0,x.jsx)(a,o(o({ref:t},u),{},{className:A()(s,r?"".concat(c).concat(l):c)}))}));Rn.displayName="Container",Rn.defaultProps={fluid:!1};var An=Rn;n(573);var On=t.createContext(null);On.displayName="NavContext";var Dn=On,Ln=t.createContext(null),Mn=["as","active","eventKey"];function Fn(e){var n=e.key,r=e.onClick,i=e.active,a=e.id,o=e.role,s=e.disabled,u=(0,t.useContext)(Be),c=(0,t.useContext)(Dn),l=i,h={role:o};if(c){o||"tablist"!==c.role||(h.role="tab");var f=c.getControllerId(null!=n?n:null),d=c.getControlledId(null!=n?n:null);h[yt("event-key")]=n,h.id=f||a,h["aria-controls"]=d,l=null==i&&null!=n?c.activeKey===n:i}return"tab"===h.role&&(s&&(h.tabIndex=-1,h["aria-disabled"]=!0),l?h["aria-selected"]=l:h.tabIndex=-1),h.onClick=v((function(e){s||(null==r||r(e),null!=n&&u&&!e.isPropagationStopped()&&u(n,e))})),[h,{isActive:l}]}var Un=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?C:n,i=e.active,a=e.eventKey,o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Mn),s=h(Fn(Object.assign({key:Ve(a,o.href),active:i},o)),2),u=s[0],c=s[1];return u[yt("active")]=c.isActive,(0,x.jsx)(r,Object.assign({},o,u,{ref:t}))}));Un.displayName="NavItem";var jn=Un,qn=["as","onSelect","activeKey","role","onKeyDown"];var Vn=function(){},Bn=yt("event-key"),zn=t.forwardRef((function(e,n){var r,i,a=e.as,o=void 0===a?"div":a,s=e.onSelect,u=e.activeKey,c=e.role,l=e.onKeyDown,h=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,qn),f=(0,t.useReducer)((function(e){return!e}),!1)[1],d=(0,t.useRef)(!1),p=(0,t.useContext)(Be),v=(0,t.useContext)(Ln);v&&(c=c||"tablist",u=v.activeKey,r=v.getControlledId,i=v.getControllerId);var y=(0,t.useRef)(null),m=function(e){var t=y.current;if(!t)return null;var n=hn(t,"[".concat(Bn,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r)return null;var i=n.indexOf(r);if(-1===i)return null;var a=i+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},g=function(e,t){null!=e&&(null==s||s(e,t),null==p||p(e,t))};(0,t.useEffect)((function(){if(y.current&&d.current){var e=y.current.querySelector("[".concat(Bn,"][aria-selected=true]"));null==e||e.focus()}d.current=!1}));var k=Ne(n,y);return(0,x.jsx)(Be.Provider,{value:g,children:(0,x.jsx)(Dn.Provider,{value:{role:c,activeKey:Ve(u),getControlledId:r||Vn,getControllerId:i||Vn},children:(0,x.jsx)(o,Object.assign({},h,{onKeyDown:function(e){if(null==l||l(e),v){var t,n;switch(e.key){case"ArrowLeft":case"ArrowUp":t=m(-1);break;case"ArrowRight":case"ArrowDown":t=m(1);break;default:return}if(t)e.preventDefault(),g(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),d.current=!0,f()}},ref:k,role:c}))})})}));zn.displayName="Nav";var Wn=Object.assign(zn,{Item:jn}),Hn=t.createContext(null);Hn.displayName="CardHeaderContext";var Kn=Hn,Gn=H("nav-item"),Qn=["bsPrefix","className","as","active","eventKey"],Yn=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?P:i,s=e.active,u=e.eventKey,c=d(e,Qn);n=B(n,"nav-link");var l=h(Fn(o({key:Ve(u,c.href),active:s},c)),2),f=l[0],p=l[1];return(0,x.jsx)(a,o(o(o({},c),f),{},{ref:t,className:A()(r,n,c.disabled&&"disabled",p.isActive&&"active")}))}));Yn.displayName="NavLink",Yn.defaultProps={disabled:!1};var $n=Yn,Jn=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],Xn=t.forwardRef((function(e,n){var r,a,s,u=M(e,{activeKey:"onSelect"}),c=u.as,l=void 0===c?"div":c,h=u.bsPrefix,f=u.variant,p=u.fill,v=u.justify,y=u.navbar,m=u.navbarScroll,g=u.className,k=u.activeKey,_=d(u,Jn),w=B(h,"nav"),b=!1,E=(0,t.useContext)(nt),T=(0,t.useContext)(Kn);return E?(a=E.bsPrefix,b=null==y||y):T&&(s=T.cardHeaderBsPrefix),(0,x.jsx)(Wn,o({as:l,ref:n,activeKey:k,className:A()(g,(r={},i(r,w,!b),i(r,"".concat(a,"-nav"),b),i(r,"".concat(a,"-nav-scroll"),b&&m),i(r,"".concat(s,"-").concat(f),!!s),i(r,"".concat(w,"-").concat(f),!!f),i(r,"".concat(w,"-fill"),p),i(r,"".concat(w,"-justified"),v),r))},_))}));Xn.displayName="Nav",Xn.defaultProps={justify:!1,fill:!1};var Zn=Object.assign(Xn,{Item:Gn,Link:$n}),er=n(361);function tr(){return(0,x.jsx)("div",{children:(0,x.jsx)(Nn,{bg:"transparent",variant:"dark",fixed:"top",children:(0,x.jsxs)(An,{children:[(0,x.jsxs)(Nn.Brand,{href:"/",children:[(0,x.jsx)("img",{alt:"",src:er,width:"100",height:"100",className:"d-inline-block align-bottom"})," "]}),(0,x.jsx)(Zn,{className:"justify-content-end text-white",children:(0,x.jsx)(Zn.Link,{href:"/signup",className:"text-white",children:(0,x.jsx)("b",{children:"SIGN UP"})})})]})})})}function nr(e){return"/"===e.charAt(0)}function rr(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var ir=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&nr(e),o=t&&nr(t),s=a||o;if(e&&nr(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var u=i[i.length-1];n="."===u||".."===u||""===u}else n=!1;for(var c=0,l=i.length;l>=0;l--){var h=i[l];"."===h?rr(i,l):".."===h?(rr(i,l),c++):c&&(rr(i,l),c--)}if(!s)for(;c--;c)i.unshift("..");!s||""===i[0]||i[0]&&nr(i[0])||i.unshift("");var f=i.join("/");return n&&"/"!==f.substr(-1)&&(f+="/"),f},ar="Invariant failed";function or(e,t){if(!e)throw new Error(ar)}function sr(e){return"/"===e.charAt(0)?e:"/"+e}function ur(e){return"/"===e.charAt(0)?e.substr(1):e}function cr(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function lr(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function hr(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function fr(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=O({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(kz){throw kz instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):kz}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=ir(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function dr(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var pr=!("undefined"===typeof window||!window.document||!window.document.createElement);function vr(e,t){t(window.confirm(e))}var yr="popstate",mr="hashchange";function gr(){try{return window.history.state||{}}catch(kz){return{}}}function kr(e){void 0===e&&(e={}),pr||or(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,s=i.getUserConfirmation,u=void 0===s?vr:s,c=i.keyLength,l=void 0===c?6:c,h=e.basename?lr(sr(e.basename)):"";function f(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&(a=cr(a,h)),fr(a,r,n)}function d(){return Math.random().toString(36).substr(2,l)}var p=dr();function v(e){O(C,e),C.length=t.length,p.notifyListeners(C.location,C.action)}function y(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||k(f(e.state))}function m(){k(f(gr()))}var g=!1;function k(e){if(g)g=!1,v();else{p.confirmTransitionTo(e,"POP",u,(function(t){t?v({action:"POP",location:e}):function(e){var t=C.location,n=w.indexOf(t.key);-1===n&&(n=0);var r=w.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(g=!0,x(i))}(e)}))}}var _=f(gr()),w=[_.key];function b(e){return h+hr(e)}function x(e){t.go(e)}var E=0;function T(e){1===(E+=e)&&1===e?(window.addEventListener(yr,y),r&&window.addEventListener(mr,m)):0===E&&(window.removeEventListener(yr,y),r&&window.removeEventListener(mr,m))}var I=!1;var C={length:t.length,action:"POP",location:_,createHref:b,push:function(e,r){var i="PUSH",a=fr(e,r,d(),C.location);p.confirmTransitionTo(a,i,u,(function(e){if(e){var r=b(a),s=a.key,u=a.state;if(n)if(t.pushState({key:s,state:u},null,r),o)window.location.href=r;else{var c=w.indexOf(C.location.key),l=w.slice(0,c+1);l.push(a.key),w=l,v({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=fr(e,r,d(),C.location);p.confirmTransitionTo(a,i,u,(function(e){if(e){var r=b(a),s=a.key,u=a.state;if(n)if(t.replaceState({key:s,state:u},null,r),o)window.location.replace(r);else{var c=w.indexOf(C.location.key);-1!==c&&(w[c]=a.key),v({action:i,location:a})}else window.location.replace(r)}}))},go:x,goBack:function(){x(-1)},goForward:function(){x(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return I||(T(1),I=!0),function(){return I&&(I=!1,T(-1)),t()}},listen:function(e){var t=p.appendListener(e);return T(1),function(){T(-1),t()}}};return C}var _r="hashchange",wr={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+ur(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:ur,decodePath:sr},slash:{encodePath:sr,decodePath:sr}};function br(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function xr(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function Er(e){window.location.replace(br(window.location.href)+"#"+e)}function Tr(e){void 0===e&&{},pr||or(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?vr:r,a=n.hashType,o=void 0===a?"slash":a,s=e.basename?lr(sr(e.basename)):"",u=wr[o],c=u.encodePath,l=u.decodePath;function h(){var e=l(xr());return s&&cr(e,s),fr(e)}var f=dr();function d(e){O(T,e),T.length=t.length,f.notifyListeners(T.location,T.action)}var p=!1,v=null;function y(){var e,t,n=xr(),r=c(n);if(n!==r)Er(r);else{var a=h(),o=T.location;if(!p&&(a,o.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(v===hr(a))return;null,function(e){if(p)!1,d();else{var t="POP";f.confirmTransitionTo(e,t,i,(function(n){n?d({action:t,location:e}):function(e){var t=T.location,n=_.lastIndexOf(hr(t));-1===n&&0;var r=_.lastIndexOf(hr(e));-1===r&&0;var i=n-r;i&&(!0,w(i))}(e)}))}}(a)}}var m=xr(),g=c(m);m!==g&&Er(g);var k=h(),_=[hr(k)];function w(e){t.go(e)}var b=0;function x(e){1===(b+=e)&&1===e?window.addEventListener(_r,y):0===b&&window.removeEventListener(_r,y)}var E=!1;var T={length:t.length,action:"POP",location:k,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&br(window.location.href),n+"#"+c(s+hr(e))},push:function(e,t){var n="PUSH",r=fr(e,void 0,void 0,T.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=hr(r),i=c(s+t);if(xr()!==i){t,function(e){window.location.hash=e}(i);var a=_.lastIndexOf(hr(T.location)),o=_.slice(0,a+1);o.push(t),o,d({action:n,location:r})}else d()}}))},replace:function(e,t){var n="REPLACE",r=fr(e,void 0,void 0,T.location);f.confirmTransitionTo(r,n,i,(function(e){if(e){var t=hr(r),i=c(s+t);xr()!==i&&(t,Er(i));var a=_.indexOf(hr(T.location));-1!==a&&(_[a]=t),d({action:n,location:r})}}))},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(e){void 0===e&&!1;var t=f.setPrompt(e);return E||(x(1),!0),function(){return E&&(!1,x(-1)),t()}},listen:function(e){var t=f.appendListener(e);return x(1),function(){x(-1),t()}}};return T}function Ir(e,t,n){return Math.min(Math.max(e,t),n)}function Cr(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,s=t.keyLength,u=void 0===s?6:s,c=dr();function l(e){O(y,e),y.length=y.entries.length,c.notifyListeners(y.location,y.action)}function h(){return Math.random().toString(36).substr(2,u)}var f=Ir(o,0,i.length-1),d=i.map((function(e){return fr(e,void 0,"string"===typeof e?h():e.key||h())})),p=hr;function v(e){var t=Ir(y.index+e,0,y.entries.length-1),r=y.entries[t];c.confirmTransitionTo(r,"POP",n,(function(e){e?l({action:"POP",location:r,index:t}):l()}))}var y={length:d.length,action:"POP",location:d[f],index:f,entries:d,createHref:p,push:function(e,t){var r="PUSH",i=fr(e,t,h(),y.location);c.confirmTransitionTo(i,r,n,(function(e){if(e){var t=y.index+1,n=y.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),l({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=fr(e,t,h(),y.location);c.confirmTransitionTo(i,r,n,(function(e){e&&(y.entries[y.index]=i,l({action:r,location:i}))}))},go:v,goBack:function(){v(-1)},goForward:function(){v(1)},canGo:function(e){var t=y.index+e;return t>=0&&t<y.entries.length},block:function(e){return void 0===e&&!1,c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return y}var Sr=1073741823,Nr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function Pr(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var Rr=t.createContext||function(e,n){var r,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return Nr[e]=(Nr[e]||0)+1}()+"__",o=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=Pr(t.props.value),t}me(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):Sr,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[a]=Vt().object.isRequired,r);var s=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}me(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?Sr:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?Sr:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return s.contextTypes=((i={})[a]=Vt().object,i),{Provider:o,Consumer:s}},Ar=Rr,Or=n(239),Dr=n.n(Or),Lr=(n(441),n(110),function(e){var t=Ar();return t.displayName=e,t}),Mr=Lr("Router-History"),Fr=function(e){var t=Ar();return t.displayName=e,t},Ur=Fr("Router"),jr=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}me(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.render=function(){return t.createElement(Ur.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(Mr.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var qr={},Vr=0;function Br(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,s=void 0!==o&&o,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=qr[n]||(qr[n]={});if(r[e])return r[e];var i=[],a={regexp:Dr()(e,i,t),keys:i};return Vr<1e4&&(r[e]=a,Vr++),a}(n,{end:a,strict:s,sensitive:c}),i=r.regexp,o=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],h=u.slice(1),f=e===l;return a&&!f?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:f,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var zr=function(e){function n(){return e.apply(this,arguments)||this}return me(n,e),n.prototype.render=function(){var e=this;return t.createElement(Ur.Consumer,null,(function(n){n||or(!1);var r=e.props.location||n.location,i=O({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?Br(r.pathname,e.props):n.match}),a=e.props,o=a.children,s=a.component,u=a.render;return Array.isArray(o)&&0===o.length&&(o=null),t.createElement(Ur.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:s?t.createElement(s,i):u?u(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function Wr(e){return"/"===e.charAt(0)?e:"/"+e}function Hr(e,t){if(!e)return t;var n=Wr(e);return 0!==t.pathname.indexOf(n)?t:O({},t,{pathname:t.pathname.substr(n.length)})}function Kr(e){return"string"===typeof e?e:hr(e)}function Gr(e){return function(){or(!1)}}function Qr(){}t.Component;var Yr=function(e){function n(){return e.apply(this,arguments)||this}return me(n,e),n.prototype.render=function(){var e=this;return t.createElement(Ur.Consumer,null,(function(n){n||or(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?Br(a.pathname,O({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);t.useContext;var $r=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=kr(t.props),t}return me(n,e),n.prototype.render=function(){return t.createElement(jr,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var Jr=function(e,t){return"function"===typeof e?e(t):e},Xr=function(e,t){return"string"===typeof e?fr(e,null,null,t):e},Zr=function(e){return e},ei=t.forwardRef;"undefined"===typeof ei&&(ei=Zr);var ti=ei((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=f(e,["innerRef","navigate","onClick"]),s=o.target,u=O({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return u.ref=Zr!==ei&&n||r,t.createElement("a",u)}));var ni=ei((function(e,n){var r=e.component,i=void 0===r?ti:r,a=e.replace,o=e.to,s=e.innerRef,u=f(e,["component","replace","to","innerRef"]);return t.createElement(Ur.Consumer,null,(function(e){e||or(!1);var r=e.history,c=Xr(Jr(o,e.location),e.location),l=c?r.createHref(c):"",h=O({},u,{href:l,navigate:function(){var t=Jr(o,e.location);(a?r.replace:r.push)(t)}});return Zr!==ei?h.ref=n||s:h.innerRef=s,t.createElement(i,h)}))})),ri=function(e){return e},ii=t.forwardRef;"undefined"===typeof ii&&(ii=ri);ii((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,s=e.activeStyle,u=e.className,c=e.exact,l=e.isActive,h=e.location,d=e.sensitive,p=e.strict,v=e.style,y=e.to,m=e.innerRef,g=f(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(Ur.Consumer,null,(function(e){e||or(!1);var r=h||e.location,a=Xr(Jr(y,r),r),f=a.pathname,k=f&&f.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),_=k?Br(r.pathname,{path:k,exact:c,sensitive:d,strict:p}):null,w=!!(l?l(_,r):_),b=w?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(u,o):u,x=w?O({},v,{},s):v,E=O({"aria-current":w&&i||null,className:b,style:x,to:a},g);return ri!==ii?E.ref=n||m:E.innerRef=m,t.createElement(ni,E)}))}));var ai=function(){return(0,x.jsxs)("div",{children:[(0,x.jsx)(qe,{}),(0,x.jsxs)("div",{className:"back",children:[(0,x.jsx)("h1",{className:"aboutUsHeader",children:"About Us"}),(0,x.jsx)("p",{}),(0,x.jsx)("p",{children:"The Teen Cafe, a nonprofit organization affiliated with the Calgary Tsung Tsin Benevolent Association, is a for-youth-by-youth organization that is dedicated to interconnecting communities throughout Calgary. Located in the heart of Downtown, our space is made to be accessible for all teens and is surrounded by public transport for easy commuting. Our mission strives to create a safe space for teenagers to enjoy, connect, and participate in activities with one another. Here, we hope to deliver the highest-quality experience to our users by providing full access to the variety of spaces within our cafe. This includes a designated space for computers, TVs and gaming consoles, which are open for use by all youth. In addition to that, our space will include quiet study spaces where individuals can interact together and meet new people. Board games will as well be available to use and other games including a foosball table, a dance floor, and music will be a part of this incredible experience. Along with the many activities we have, our staff members will host biweekly events, such as tournaments of the most popular games, that all youth can partake in. We hope that teenagers will visit our space and leave with positive experiences and new friendships. "})]})]})};function oi(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(JP){return void n(JP)}s.done?t(u):Promise.resolve(u).then(r,i)}function si(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){oi(a,r,i,o,s,"next",e)}function s(e){oi(a,r,i,o,s,"throw",e)}o(void 0)}))}}var ui=n(757),ci=n.n(ui),li=["as","className","type","tooltip"],hi={type:Vt().string,tooltip:Vt().bool,as:Vt().elementType},fi=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,s=void 0===a?"valid":a,u=e.tooltip,c=void 0!==u&&u,l=d(e,li);return(0,x.jsx)(r,o(o({},l),{},{ref:t,className:A()(i,"".concat(s,"-").concat(c?"tooltip":"feedback"))}))}));fi.displayName="Feedback",fi.propTypes=hi;var di=fi,pi=t.createContext({}),vi=["id","bsPrefix","className","type","isValid","isInvalid","as"],yi=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.className,s=e.type,u=void 0===s?"checkbox":s,c=e.isValid,l=void 0!==c&&c,h=e.isInvalid,f=void 0!==h&&h,p=e.as,v=void 0===p?"input":p,y=d(e,vi),m=(0,t.useContext)(pi).controlId;return i=B(i,"form-check-input"),(0,x.jsx)(v,o(o({},y),{},{ref:n,type:u,id:r||m,className:A()(a,i,l&&"is-valid",f&&"is-invalid")}))}));yi.displayName="FormCheckInput";var mi=yi,gi=["bsPrefix","className","htmlFor"],ki=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.htmlFor,s=d(e,gi),u=(0,t.useContext)(pi).controlId;return r=B(r,"form-check-label"),(0,x.jsx)("label",o(o({},s),{},{ref:n,htmlFor:a||u,className:A()(i,r)}))}));ki.displayName="FormCheckLabel";var _i=ki,wi=["id","bsPrefix","bsSwitchPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],bi=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,s=e.inline,u=void 0!==s&&s,c=e.disabled,l=void 0!==c&&c,h=e.isValid,f=void 0!==h&&h,p=e.isInvalid,v=void 0!==p&&p,y=e.feedbackTooltip,m=void 0!==y&&y,g=e.feedback,k=e.feedbackType,_=e.className,w=e.style,b=e.title,E=void 0===b?"":b,T=e.type,I=void 0===T?"checkbox":T,C=e.label,S=e.children,N=e.as,P=void 0===N?"input":N,R=d(e,wi);i=B(i,"form-check"),a=B(a,"form-switch");var O=(0,t.useContext)(pi).controlId,D=(0,t.useMemo)((function(){return{controlId:r||O}}),[O,r]),L=!S&&null!=C&&!1!==C||function(e,n){return t.Children.toArray(e).some((function(e){return t.isValidElement(e)&&e.type===n}))}(S,_i),M=(0,x.jsx)(mi,o(o({},R),{},{type:"switch"===I?"checkbox":I,ref:n,isValid:f,isInvalid:v,disabled:l,as:P}));return(0,x.jsx)(pi.Provider,{value:D,children:(0,x.jsx)("div",{style:w,className:A()(_,L&&i,u&&"".concat(i,"-inline"),"switch"===I&&a),children:S||(0,x.jsxs)(x.Fragment,{children:[M,L&&(0,x.jsx)(_i,{title:E,children:C}),g&&(0,x.jsx)(di,{type:k,tooltip:m,children:g})]})})})}));bi.displayName="FormCheck";var xi=Object.assign(bi,{Input:mi,Label:_i}),Ei=(n(391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),Ti=t.forwardRef((function(e,n){var r,a,s=e.bsPrefix,u=e.type,c=e.size,l=e.htmlSize,h=e.id,f=e.className,p=e.isValid,v=void 0!==p&&p,y=e.isInvalid,m=void 0!==y&&y,g=e.plaintext,k=e.readOnly,_=e.as,w=void 0===_?"input":_,b=d(e,Ei),E=(0,t.useContext)(pi).controlId;(s=B(s,"form-control"),g)?r=i({},"".concat(s,"-plaintext"),!0):(i(a={},s,!0),i(a,"".concat(s,"-").concat(c),c),r=a);return(0,x.jsx)(w,o(o({},b),{},{type:u,size:l,ref:n,readOnly:k,id:h||E,className:A()(f,r,v&&"is-valid",m&&"is-invalid","color"===u&&"".concat(s,"-color"))}))}));Ti.displayName="FormControl";var Ii=Object.assign(Ti,{Feedback:di}),Ci=H("form-floating"),Si=["controlId","as"],Ni=t.forwardRef((function(e,n){var r=e.controlId,i=e.as,a=void 0===i?"div":i,s=d(e,Si),u=(0,t.useMemo)((function(){return{controlId:r}}),[r]);return(0,x.jsx)(pi.Provider,{value:u,children:(0,x.jsx)(a,o(o({},s),{},{ref:n}))})}));Ni.displayName="FormGroup";var Pi=Ni,Ri=["as","bsPrefix","className"],Ai=["className"],Oi=["xxl","xl","lg","md","sm","xs"];var Di=t.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,i=d(e,Ri);n=B(n,"col");var a=[],s=[];return Oi.forEach((function(e){var t,r,o,u=i[e];delete i[e],"object"===typeof u&&null!=u?(t=u.span,r=u.offset,o=u.order):t=u;var c="xs"!==e?"-".concat(e):"";t&&a.push(!0===t?"".concat(n).concat(c):"".concat(n).concat(c,"-").concat(t)),null!=o&&s.push("order".concat(c,"-").concat(o)),null!=r&&s.push("offset".concat(c,"-").concat(r))})),[o(o({},i),{},{className:A().apply(void 0,[r].concat(a,s))}),{as:t,bsPrefix:n,spans:a}]}(e),r=h(n,2),i=r[0],a=i.className,s=d(i,Ai),u=r[1],c=u.as,l=void 0===c?"div":c,f=u.bsPrefix,p=u.spans;return(0,x.jsx)(l,o(o({},s),{},{ref:t,className:A()(a,!p.length&&f)}))}));Di.displayName="Col";var Li=Di,Mi=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],Fi=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"label":r,a=e.bsPrefix,s=e.column,u=e.visuallyHidden,c=e.className,l=e.htmlFor,h=d(e,Mi),f=(0,t.useContext)(pi).controlId;a=B(a,"form-label");var p="col-form-label";"string"===typeof s&&(p="".concat(p," ").concat(p,"-").concat(s));var v=A()(c,a,u&&"visually-hidden",s&&p);return l=l||f,s?(0,x.jsx)(Li,o({ref:n,as:"label",className:v,htmlFor:l},h)):(0,x.jsx)(i,o({ref:n,className:v,htmlFor:l},h))}));Fi.displayName="FormLabel",Fi.defaultProps={column:!1,visuallyHidden:!1};var Ui=Fi,ji=["bsPrefix","className","id"],qi=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.id,s=d(e,ji),u=(0,t.useContext)(pi).controlId;return r=B(r,"form-range"),(0,x.jsx)("input",o(o({},s),{},{type:"range",ref:n,className:A()(i,r),id:a||u}))}));qi.displayName="FormRange";var Vi=qi,Bi=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],zi=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.size,a=e.htmlSize,s=e.className,u=e.isValid,c=void 0!==u&&u,l=e.isInvalid,h=void 0!==l&&l,f=e.id,p=d(e,Bi),v=(0,t.useContext)(pi).controlId;return r=B(r,"form-select"),(0,x.jsx)("select",o(o({},p),{},{size:a,ref:n,className:A()(s,r,i&&"".concat(r,"-").concat(i),c&&"is-valid",h&&"is-invalid"),id:f||v}))}));zi.displayName="FormSelect";var Wi=zi,Hi=["bsPrefix","className","as","muted"],Ki=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,s=e.muted,u=d(e,Hi);return n=B(n,"form-text"),(0,x.jsx)(a,o(o({},u),{},{ref:t,className:A()(r,n,s&&"text-muted")}))}));Ki.displayName="FormText";var Gi=Ki,Qi=t.forwardRef((function(e,t){return(0,x.jsx)(xi,o(o({},e),{},{ref:t,type:"switch"}))}));Qi.displayName="Switch";var Yi=Object.assign(Qi,{Input:xi.Input,Label:xi.Label}),$i=["bsPrefix","className","children","controlId","label"],Ji=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,s=e.label,u=d(e,$i);return n=B(n,"form-floating"),(0,x.jsxs)(Pi,o(o({ref:t,className:A()(r,n),controlId:a},u),{},{children:[i,(0,x.jsx)("label",{htmlFor:a,children:s})]}))}));Ji.displayName="FloatingLabel";var Xi=Ji,Zi=["className","validated","as"],ea={_ref:Vt().any,validated:Vt().bool,as:Vt().elementType},ta=t.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,s=d(e,Zi);return(0,x.jsx)(a,o(o({},s),{},{ref:t,className:A()(n,r&&"was-validated")}))}));ta.displayName="Form",ta.propTypes=ea;var na=Object.assign(ta,{Group:Pi,Control:Ii,Floating:Ci,Check:xi,Switch:Yi,Label:Ui,Text:Gi,Range:Vi,Select:Wi,FloatingLabel:Xi}),ra=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],ia=Xt("h4");ia.displayName="DivStyledAsH4";var aa=H("alert-heading",{Component:ia}),oa=H("alert-link",{Component:P}),sa={variant:"primary",show:!0,transition:Ot,closeLabel:"Close alert"},ua=t.forwardRef((function(e,t){var n=M(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,a=n.closeLabel,s=n.closeVariant,u=n.className,c=n.children,l=n.variant,h=n.onClose,f=n.dismissible,p=n.transition,y=d(n,ra),m=B(r,"alert"),g=v((function(e){h&&h(!1,e)})),k=!0===p?Ot:p,_=(0,x.jsxs)("div",o(o({role:"alert"},k?void 0:y),{},{ref:t,className:A()(u,m,l&&"".concat(m,"-").concat(l),f&&"".concat(m,"-dismissible")),children:[f&&(0,x.jsx)(Ht,{onClick:g,"aria-label":a,variant:s}),c]}));return k?(0,x.jsx)(k,o(o({unmountOnExit:!0},y),{},{ref:void 0,in:i,children:_})):i?_:null}));ua.displayName="Alert",ua.defaultProps=sa;var ca=Object.assign(ua,{Link:oa,Heading:aa}),la=["as","bsPrefix","variant","size","active","className"],ha=t.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=e.size,s=e.active,u=e.className,c=d(e,la),l=B(r,"btn"),f=h(T(o({tagName:n},c)),2),p=f[0],v=f[1].tagName;return(0,x.jsx)(v,o(o(o({},p),c),{},{ref:t,className:A()(u,l,s&&"active",i&&"".concat(l,"-").concat(i),a&&"".concat(l,"-").concat(a),c.href&&c.disabled&&"disabled")}))}));ha.displayName="Button",ha.defaultProps={variant:"primary",active:!1,disabled:!1};var fa=ha;function da(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function pa(e,t,n){return pa=an()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ye(i,n.prototype),i},pa.apply(null,arguments)}function va(e){var t="function"===typeof Map?new Map:void 0;return va=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return pa(e,arguments,en(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ye(n,e)},va(e)}var ya=!1,ma=!1,ga="${JSCORE_VERSION}",ka=function(e,t){if(!e)throw _a(t)},_a=function(e){return new Error("Firebase Database ("+ga+") INTERNAL ASSERT FAILED: "+e)},wa=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ba={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(wa(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},xa=function(e){var t=wa(e);return ba.encodeByteArray(t,!0)},Ea=function(e){return xa(e).replace(/\./g,"")},Ta=function(e){try{return ba.decodeString(e,!0)}catch(kz){console.error("base64Decode failed: ",kz)}return null};function Ia(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&Ca(n)&&(e[n]=Ia(e[n],t[n]));return e}function Ca(e){return"__proto__"!==e}var Sa=function(){function e(){var t=this;dt(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return vt(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Na(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ea(JSON.stringify({alg:"none",type:"JWT"})),Ea(JSON.stringify(a)),""].join(".")}function Pa(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ra(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pa())}function Aa(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(kz){return!1}}function Oa(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Da(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function La(){var e=Pa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ma(){return!0===ya||!0===ma}function Fa(){return"object"===typeof indexedDB}var Ua=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a;return dt(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(sn(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(sn(a),ja.prototype.create),a}return vt(n)}(va(Error)),ja=function(){function e(t,n,r){dt(this,e),this.service=t,this.serviceName=n,this.errors=r}return vt(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?qa(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ua(n,a,t);return o}}]),e}();function qa(e,t){return e.replace(Va,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Va=/\{\$([^}]+)}/g;function Ba(e){return JSON.parse(e)}function za(e){return JSON.stringify(e)}var Wa=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Ba(Ta(a[0])||""),n=Ba(Ta(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(kz){}return{header:t,claims:n,data:r,signature:i}};function Ha(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ka(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Ga(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Qa(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Ya(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if($a(s)&&$a(u)){if(!Ya(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function $a(e){return null!==e&&"object"===typeof e}function Ja(e){for(var t=[],n=function(){var e=h(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Xa(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=h(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Za(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var eo=function(){function e(){dt(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return vt(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function to(e,t){var n=new no(e,t);return n.subscribe.bind(n)}var no=function(){function e(t,n){var r=this;dt(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return vt(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=da(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ro),void 0===r.error&&(r.error=ro),void 0===r.complete&&(r.complete=ro);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(kz){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(kz){"undefined"!==typeof console&&console.error&&console.error(kz)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ro(){}var io=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ao(e,t){return"".concat(e," failed: ").concat(t," argument ")}function oo(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ao(e,t)+"must be a valid function.")}function so(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ao(e,t)+"must be a valid context object.")}var uo=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function co(e){return e&&e._delegate?e._delegate:e}var lo=function(){function e(t,n,r){dt(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return vt(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ho="[DEFAULT]",fo=function(){function e(t,n){dt(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return vt(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Sa;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(kz){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(kz){if(r)return null;throw kz}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch(kz){}var t,n=da(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(kz){}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ho;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=si(ui.mark((function e(){var t;return ui.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ft(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ft(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ho;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ho;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=da(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=h(i.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=da(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(LS){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ho?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(LS){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ho;return this.component?this.component.multipleInstances?e:ho:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var po,vo,yo=function(){function e(t){dt(this,e),this.name=t,this.providers=new Map}return vt(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new fo(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),mo=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(vo||(vo={}));var go,ko,_o={debug:vo.DEBUG,verbose:vo.VERBOSE,info:vo.INFO,warn:vo.WARN,error:vo.ERROR,silent:vo.SILENT},wo=vo.INFO,bo=(i(po={},vo.DEBUG,"log"),i(po,vo.VERBOSE,"log"),i(po,vo.INFO,"info"),i(po,vo.WARN,"warn"),i(po,vo.ERROR,"error"),po),xo=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=bo[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Eo=function(){function e(t){dt(this,e),this.name=t,this._logLevel=wo,this._logHandler=xo,this._userLogHandler=null,mo.push(this)}return vt(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in vo))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?_o[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vo.DEBUG].concat(t)),this._logHandler.apply(this,[this,vo.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vo.VERBOSE].concat(t)),this._logHandler.apply(this,[this,vo.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vo.INFO].concat(t)),this._logHandler.apply(this,[this,vo.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vo.WARN].concat(t)),this._logHandler.apply(this,[this,vo.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,vo.ERROR].concat(t)),this._logHandler.apply(this,[this,vo.ERROR].concat(t))}}]),e}();var To=function(){function e(t){dt(this,e),this.container=t}return vt(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Io="@firebase/app",Co="0.7.17",So=new Eo("@firebase/app"),No="[DEFAULT]",Po=(i(go={},Io,"fire-core"),i(go,"@firebase/app-compat","fire-core-compat"),i(go,"@firebase/analytics","fire-analytics"),i(go,"@firebase/analytics-compat","fire-analytics-compat"),i(go,"@firebase/app-check","fire-app-check"),i(go,"@firebase/app-check-compat","fire-app-check-compat"),i(go,"@firebase/auth","fire-auth"),i(go,"@firebase/auth-compat","fire-auth-compat"),i(go,"@firebase/database","fire-rtdb"),i(go,"@firebase/database-compat","fire-rtdb-compat"),i(go,"@firebase/functions","fire-fn"),i(go,"@firebase/functions-compat","fire-fn-compat"),i(go,"@firebase/installations","fire-iid"),i(go,"@firebase/installations-compat","fire-iid-compat"),i(go,"@firebase/messaging","fire-fcm"),i(go,"@firebase/messaging-compat","fire-fcm-compat"),i(go,"@firebase/performance","fire-perf"),i(go,"@firebase/performance-compat","fire-perf-compat"),i(go,"@firebase/remote-config","fire-rc"),i(go,"@firebase/remote-config-compat","fire-rc-compat"),i(go,"@firebase/storage","fire-gcs"),i(go,"@firebase/storage-compat","fire-gcs-compat"),i(go,"@firebase/firestore","fire-fst"),i(go,"@firebase/firestore-compat","fire-fst-compat"),i(go,"fire-js","fire-js"),i(go,"firebase","fire-js-all"),go),Ro=new Map,Ao=new Map;function Oo(e,t){try{e.container.addComponent(t)}catch(kz){So.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),kz)}}function Do(e,t){e.container.addOrOverwriteComponent(t)}function Lo(e){var t=e.name;if(Ao.has(t))return So.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ao.set(t,e);var n,r=da(Ro.values());try{for(r.s();!(n=r.n()).done;){Oo(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Mo(e,t){return e.container.getProvider(t)}function Fo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:No;Mo(e,t).clearInstance(n)}function Uo(){Ao.clear()}var jo,qo,Vo=(i(ko={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(ko,"bad-app-name","Illegal App name: '{$appName}"),i(ko,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),i(ko,"app-deleted","Firebase App named '{$appName}' already deleted"),i(ko,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),i(ko,"invalid-log-argument","First argument to `onLog` must be null or a function."),ko),Bo=new ja("app","Firebase",Vo),zo=function(){function e(t,n,r){var i=this;dt(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lo("app",(function(){return i}),"PUBLIC"))}return vt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Bo.create("app-deleted",{appName:this._name})}}]),e}(),Wo="9.6.7";function Ho(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:No,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Bo.create("bad-app-name",{appName:String(i)});var a=Ro.get(i);if(a){if(Ya(e,a.options)&&Ya(r,a.config))return a;throw Bo.create("duplicate-app",{appName:i})}var o,s=new yo(i),u=da(Ao.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new zo(e,r,s);return Ro.set(i,l),l}function Ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:No,t=Ro.get(e);if(!t)throw Bo.create("no-app",{appName:e});return t}function Go(){return Array.from(Ro.values())}function Qo(e){return Yo.apply(this,arguments)}function Yo(){return(Yo=si(ui.mark((function e(t){var n;return ui.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ro.has(n)){e.next=6;break}return Ro.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $o(e,t,n){var r,i=null!==(r=Po[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void So.warn(s.join(" "))}Lo(new lo("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Jo(e,t){if(null!==e&&"function"!==typeof e)throw Bo.create("invalid-log-argument");!function(e,t){var n,r=da(mo);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=_o[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:vo[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Xo(e){var t;t=e,mo.forEach((function(e){e.setLogLevel(t)}))}jo="",Lo(new lo("platform-logger",(function(e){return new To(e)}),"PRIVATE")),$o(Io,Co,jo),$o(Io,Co,"esm2017"),$o("fire-js","");var Zo=function(){function e(t,n){var r=this;dt(this,e),this._delegate=t,this.firebase=n,Oo(t,new lo("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return vt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Qo(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:No;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:No;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Oo(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Do(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),es=(i(qo={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(qo,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),qo),ts=new ja("app-compat","Firebase",es);var ns=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ho(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ha(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:$o,setLogLevel:Xo,onLog:Jo,apps:null,SDK_VERSION:Wo,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Lo(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw ts.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ia(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ha(n,e=e||No))throw ts.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Zo);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ia(n,e)},createSubscribe:to,ErrorFactory:ja,deepExtend:Ia}),n}(),rs=new Eo("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){rs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var is=self.firebase.SDK_VERSION;is&&is.indexOf("LITE")>=0&&rs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var as=ns;!function(e){$o("@firebase/app-compat","0.1.18",e)}();as.registerVersion("firebase","9.6.7","app-compat");function os(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var ss;Object.create;var us="facebook.com",cs="github.com",ls="google.com",hs="password",fs="twitter.com",ds="EMAIL_SIGNIN",ps="PASSWORD_RESET",vs="RECOVER_EMAIL",ys="REVERT_SECOND_FACTOR_ADDITION",ms="VERIFY_AND_CHANGE_EMAIL",gs="VERIFY_EMAIL";function ks(){return i({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var _s=function(){var e;return i(e={},"admin-restricted-operation","This operation is restricted to administrators only."),i(e,"argument-error",""),i(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),i(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),i(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),i(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),i(e,"cordova-not-ready","Cordova framework is not ready."),i(e,"cors-unsupported","This browser is not supported."),i(e,"credential-already-in-use","This credential is already associated with a different user account."),i(e,"custom-token-mismatch","The custom token corresponds to a different audience."),i(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),i(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),i(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),i(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),i(e,"email-already-in-use","The email address is already in use by another account."),i(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),i(e,"expired-action-code","The action code has expired."),i(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),i(e,"internal-error","An internal AuthError has occurred."),i(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),i(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),i(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),i(e,"invalid-auth-event","An internal AuthError has occurred."),i(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),i(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),i(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),i(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),i(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),i(e,"invalid-email","The email address is badly formatted."),i(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),i(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),i(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),i(e,"invalid-credential","The supplied auth credential is malformed or has expired."),i(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),i(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),i(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),i(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),i(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),i(e,"wrong-password","The password is invalid or the user does not have a password."),i(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),i(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),i(e,"invalid-provider-id","The specified provider ID is invalid."),i(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),i(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),i(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),i(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),i(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),i(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),i(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),i(e,"missing-continue-uri","A continue URL must be provided in the request."),i(e,"missing-iframe-start","An internal AuthError has occurred."),i(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),i(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),i(e,"missing-multi-factor-info","No second factor identifier is provided."),i(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),i(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),i(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),i(e,"app-deleted","This instance of FirebaseApp has been deleted."),i(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),i(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),i(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),i(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),i(e,"no-auth-event","An internal AuthError has occurred."),i(e,"no-such-provider","User was not linked to an account with the given provider."),i(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),i(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),i(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),i(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),i(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),i(e,"provider-already-linked","User can only be linked to one identity for the given provider."),i(e,"quota-exceeded","The project's quota for this operation has been exceeded."),i(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),i(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),i(e,"rejected-credential","The request contains malformed or mismatching credentials."),i(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),i(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),i(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),i(e,"timeout","The operation has timed out."),i(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),i(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),i(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),i(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),i(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),i(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),i(e,"unverified-email","The operation requires a verified email."),i(e,"user-cancelled","The user did not grant your application the permissions it requested."),i(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),i(e,"user-disabled","The user account has been disabled by an administrator."),i(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),i(e,"user-signed-out",""),i(e,"weak-password","The password must be 6 characters long or more."),i(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),i(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},ws=ks,bs=new ja("auth","Firebase",ks()),xs=new Eo("@firebase/auth");function Es(e){if(xs.logLevel<=vo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];xs.error.apply(xs,["Auth (".concat(Wo,"): ").concat(e)].concat(n))}}function Ts(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ns.apply(void 0,[e].concat(n))}function Is(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ns.apply(void 0,[e].concat(n))}function Cs(e,t,n){var r=Object.assign(Object.assign({},ws()),i({},t,n));return new ja("auth","Firebase",r).create(t,{appName:e.name})}function Ss(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ts(e,"argument-error"),Cs(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ns(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ft(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ft(o)))}return bs.create.apply(bs,[e].concat(n))}function Ps(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ns.apply(void 0,[t].concat(r))}}function Rs(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Es(t),new Error(t)}function As(e,t){e||Rs(t)}var Os=new Map;function Ds(e){As(e instanceof Function,"Expected a class definition");var t=Os.get(e);return t?(As(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Os.set(e,t),t)}function Ls(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ms(){return"http:"===Fs()||"https:"===Fs()}function Fs(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Us=function(){function e(t,n){dt(this,e),this.shortDelay=t,this.longDelay=n,As(n>t,"Short delay should be less than long delay!"),this.isMobile=Ra()||Da()}return vt(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ms()||Oa()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function js(e,t){As(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var qs=function(){function e(){dt(this,e)}return vt(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Vs=(i(ss={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),i(ss,"MISSING_CUSTOM_TOKEN","internal-error"),i(ss,"INVALID_IDENTIFIER","invalid-email"),i(ss,"MISSING_CONTINUE_URI","internal-error"),i(ss,"INVALID_PASSWORD","wrong-password"),i(ss,"MISSING_PASSWORD","internal-error"),i(ss,"EMAIL_EXISTS","email-already-in-use"),i(ss,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),i(ss,"INVALID_IDP_RESPONSE","invalid-credential"),i(ss,"INVALID_PENDING_TOKEN","invalid-credential"),i(ss,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),i(ss,"MISSING_REQ_TYPE","internal-error"),i(ss,"EMAIL_NOT_FOUND","user-not-found"),i(ss,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),i(ss,"EXPIRED_OOB_CODE","expired-action-code"),i(ss,"INVALID_OOB_CODE","invalid-action-code"),i(ss,"MISSING_OOB_CODE","internal-error"),i(ss,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),i(ss,"INVALID_ID_TOKEN","invalid-user-token"),i(ss,"TOKEN_EXPIRED","user-token-expired"),i(ss,"USER_NOT_FOUND","user-token-expired"),i(ss,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),i(ss,"INVALID_CODE","invalid-verification-code"),i(ss,"INVALID_SESSION_INFO","invalid-verification-id"),i(ss,"INVALID_TEMPORARY_PROOF","invalid-credential"),i(ss,"MISSING_SESSION_INFO","missing-verification-id"),i(ss,"SESSION_EXPIRED","code-expired"),i(ss,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),i(ss,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),i(ss,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),i(ss,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),i(ss,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),i(ss,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),i(ss,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),i(ss,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),i(ss,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),i(ss,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),i(ss,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),ss),Bs=new Us(3e4,6e4);function zs(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ws(e,t,n,r){return Hs.apply(this,arguments)}function Hs(){return Hs=si(ci().mark((function e(t,n,r,i){var a,o=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Ks(t,a,si(ci().mark((function e(){var a,o,s,u;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Ja(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",qs.fetch()($s(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Hs.apply(this,arguments)}function Ks(e,t,n){return Gs.apply(this,arguments)}function Gs(){return(Gs=si(ci().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,d,p;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Vs),n),e.prev=2,a=new Js(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Xs(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=h(c,2),f=l[0],d=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Xs(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw Xs(t,"email-already-in-use",s);case 25:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw Cs(t,p,d);case 30:Ts(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Ua)){e.next=37;break}throw e.t0;case 37:Ts(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function Qs(e,t,n,r){return Ys.apply(this,arguments)}function Ys(){return Ys=si(ci().mark((function e(t,n,r,i){var a,o,s=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Ws(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ts(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Ys.apply(this,arguments)}function $s(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?js(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Js=function(){function e(t){var n=this;dt(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Is(n.auth,"network-request-failed"))}),Bs.get())}))}return vt(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Xs(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Is(e,t,r);return i.customData._tokenResponse=n,i}function Zs(e,t){return eu.apply(this,arguments)}function eu(){return(eu=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tu(e,t){return nu.apply(this,arguments)}function nu(){return(nu=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ru(e,t){return iu.apply(this,arguments)}function iu(){return(iu=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function au(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(kz){}}function ou(){return ou=si(ci().mark((function e(t){var n,r,i,a,o,s,u=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=co(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Ps((a=uu(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:au(su(a.auth_time)),issuedAtTime:au(su(a.iat)),expirationTime:au(su(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ou.apply(this,arguments)}function su(e){return 1e3*Number(e)}function uu(e){var t=h(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Es("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ta(r);return a?JSON.parse(a):(Es("Failed to decode base64 JWT payload"),null)}catch(kz){return Es("Caught error parsing JWT payload as JSON",kz),null}}function cu(e,t){return lu.apply(this,arguments)}function lu(){return lu=si(ci().mark((function e(t,n){var r=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ua&&hu(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),lu.apply(this,arguments)}function hu(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var fu=function(){function e(t){dt(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return vt(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(si(ci().mark((function t(){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),du=function(){function e(t,n){dt(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return vt(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function pu(e){return vu.apply(this,arguments)}function vu(){return vu=si(ci().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,cu(t,ru(r,{idToken:i}));case 6:Ps(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?gu(o.providerUserInfo):[],u=mu(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new du(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),vu.apply(this,arguments)}function yu(){return(yu=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=co(t),e.next=3,pu(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mu(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ft(n),ft(t))}function gu(e){return e.map((function(e){var t=e.providerId,n=os(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function ku(e,t){return _u.apply(this,arguments)}function _u(){return(_u=si(ci().mark((function e(t,n){var r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ks(t,{},si(ci().mark((function e(){var r,i,a,o,s,u;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ja({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=$s(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",qs.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wu=function(){function e(){dt(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return vt(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Ps(e.idToken,"internal-error"),Ps("undefined"!==typeof e.idToken,"internal-error"),Ps("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=uu(e);return Ps(t,"internal-error"),Ps("undefined"!==typeof t.exp,"internal-error"),Ps("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=si(ci().mark((function e(t){var n,r=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Ps(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=si(ci().mark((function e(t,n){var r,i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ku(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Rs("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Ps("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Ps("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Ps("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function bu(e,t){Ps("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var xu=function(){function e(t){dt(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=os(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?ft(a.providerData):[],this.metadata=new du(a.createdAt||void 0,a.lastLoginAt||void 0)}return vt(e,[{key:"getIdToken",value:function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cu(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Ps(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ou.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return yu.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Ps(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Ps(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=si(ci().mark((function e(t){var n,r,i=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,pu(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=si(ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,cu(this,Zs(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;Ps(k&&x,t,"internal-error");var E=wu.fromJSON(this.name,x);Ps("string"===typeof k,t,"internal-error"),bu(h,t.name),bu(f,t.name),Ps("boolean"===typeof _,t,"internal-error"),Ps("boolean"===typeof w,t,"internal-error"),bu(d,t.name),bu(p,t.name),bu(v,t.name),bu(y,t.name),bu(m,t.name),bu(g,t.name);var T=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(T.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(T._redirectEventId=y),T}},{key:"_fromIdTokenResponse",value:function(){var t=si(ci().mark((function t(n,r){var i,a,o,s=arguments;return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new wu).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,pu(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Eu=function(){function e(){dt(this,e),this.type="NONE",this.storage={}}return vt(e,[{key:"_isAvailable",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Eu.type="NONE";var Tu=Eu;function Iu(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Cu=function(){function e(t,n,r){dt(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Iu(this.userKey,a.apiKey,o),this.fullPersistenceKey=Iu("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return vt(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=si(ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?xu._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=si(ci().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ds(Tu),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ds(Tu),s=Iu(i,n.config.apiKey,n.name),u=null,c=da(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=xu._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Su(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Au(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Nu(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Du(t))return"Blackberry";if(Lu(t))return"Webos";if(Pu(t))return"Safari";if((t.includes("chrome/")||Ru(t))&&!t.includes("edge/"))return"Chrome";if(Ou(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Nu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/firefox\//i.test(e)}function Pu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ru(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/crios\//i.test(e)}function Au(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/iemobile/i.test(e)}function Ou(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/android/i.test(e)}function Du(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/blackberry/i.test(e)}function Lu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/webos/i.test(e)}function Mu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/iphone|ipad|ipod/i.test(e)}function Fu(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return Mu(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Uu(){return La()&&10===document.documentMode}function ju(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return Mu(e)||Ou(e)||Lu(e)||Du(e)||/windows phone/i.test(e)||Au(e)}function qu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Su(Pa());break;case"Worker":t="".concat(Su(Pa()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Wo,"/").concat(r)}var Vu=function(){function e(t,n){dt(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zu(this),this.idTokenSubscription=new zu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bs,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return vt(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ds(t)),this._initializationPromise=this.queue(si(ci().mark((function r(){var i,a;return ci().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Cu.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=si(ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=si(ci().mark((function e(t){var n,r,i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Ps(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pu(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?co(t):null)&&Ps(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=si(ci().mark((function e(t){var n=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Ps(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(si(ci().mark((function n(){return ci().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ds(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new ja("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=si(ci().mark((function e(t,n){var r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Ps(n=t&&Ds(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Cu.create(this,[Ds(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=si(ci().mark((function e(t){var n,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=si(ci().mark((function e(t){var n=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ps(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Ps(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qu(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=si(ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Bu(e){return co(e)}var zu=function(){function e(t){var n=this;dt(this,e),this.auth=t,this.observer=null,this.addObserver=to((function(e){return n.observer=e}))}return vt(e,[{key:"next",get:function(){return Ps(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Wu(e,t,n){var r=Bu(e);Ps(r._canInitEmulator,r,"emulator-config-failed"),Ps(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Hu(t),o=function(e){var t=Hu(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ku(r.substr(a.length+1))}}var o=h(r.split(":"),2);return{host:o[0],port:Ku(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Hu(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ku(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Gu=function(){function e(t,n){dt(this,e),this.providerId=t,this.signInMethod=n}return vt(e,[{key:"toJSON",value:function(){return Rs("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Rs("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Rs("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Rs("not implemented")}}]),e}();function Qu(e,t){return Yu.apply(this,arguments)}function Yu(){return(Yu=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(t,"POST","/v1/accounts:resetPassword",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $u(e,t){return Ju.apply(this,arguments)}function Ju(){return(Ju=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xu(e,t){return Zu.apply(this,arguments)}function Zu(){return(Zu=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(t,"POST","/v1/accounts:update",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ec(e,t){return tc.apply(this,arguments)}function tc(){return(tc=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qs(t,"POST","/v1/accounts:signInWithPassword",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nc(e,t){return rc.apply(this,arguments)}function rc(){return(rc=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(t,"POST","/v1/accounts:sendOobCode",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ic(e,t){return ac.apply(this,arguments)}function ac(){return(ac=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nc(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oc(e,t){return sc.apply(this,arguments)}function sc(){return(sc=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nc(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uc(e,t){return cc.apply(this,arguments)}function cc(){return(cc=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nc(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lc(e,t){return hc.apply(this,arguments)}function hc(){return(hc=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nc(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fc(e,t){return dc.apply(this,arguments)}function dc(){return(dc=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qs(t,"POST","/v1/accounts:signInWithEmailLink",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pc(e,t){return vc.apply(this,arguments)}function vc(){return(vc=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qs(t,"POST","/v1/accounts:signInWithEmailLink",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yc=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return dt(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return vt(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ec(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",fc(t,{email:this._email,oobCode:this._password}));case 5:Ts(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",$u(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",pc(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ts(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Gu);function mc(e,t){return gc.apply(this,arguments)}function gc(){return(gc=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qs(t,"POST","/v1/accounts:signInWithIdp",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kc=function(e){rn(n,e);var t=cn(n);function n(){var e;return dt(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return vt(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return mc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,mc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,mc(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ja(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ts("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=os(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Gu);function _c(e,t){return wc.apply(this,arguments)}function wc(){return(wc=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(t,"POST","/v1/accounts:sendVerificationCode",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bc(){return(bc=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xc(){return(xc=si(ci().mark((function e(t,n){var r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",zs(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Xs(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ec=i({},"USER_NOT_FOUND","user-not-found");function Tc(){return(Tc=si(ci().mark((function e(t,n){var r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",zs(t,r),Ec));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ic=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this,"phone","phone")).params=e,r}return vt(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return bc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return xc.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Tc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Gu);var Cc=function(){function e(t){var n,r,i,a,o,s;dt(this,e);var u=Xa(Za(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Ps(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return vt(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Xa(Za(e)).link,n=t?Xa(Za(t)).deep_link_id:null,r=Xa(Za(e)).deep_link_id;return(r?Xa(Za(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(LS){return null}}}]),e}();var Sc=function(){function e(){dt(this,e),this.providerId=e.PROVIDER_ID}return vt(e,null,[{key:"credential",value:function(e,t){return yc._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Cc.parseLink(t);return Ps(n,"argument-error"),yc._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Sc.PROVIDER_ID="password",Sc.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Sc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Nc=function(){function e(t){dt(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return vt(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Pc=function(e){rn(n,e);var t=cn(n);function n(){var e;return dt(this,n),(e=t.apply(this,arguments)).scopes=[],e}return vt(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ft(this.scopes)}}]),n}(Nc),Rc=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Ps(e.idToken||e.accessToken,"argument-error"),kc._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Ps("providerId"in t&&"signInMethod"in t,"argument-error"),kc._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(kz){return null}}}]),n}(Pc),Ac=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.call(this,"facebook.com")}return vt(n,null,[{key:"credential",value:function(e){return kc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(LS){return null}}}]),n}(Pc);Ac.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ac.PROVIDER_ID="facebook.com";var Oc=function(e){rn(n,e);var t=cn(n);function n(){var e;return dt(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return vt(n,null,[{key:"credential",value:function(e,t){return kc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(LS){return null}}}]),n}(Pc);Oc.GOOGLE_SIGN_IN_METHOD="google.com",Oc.PROVIDER_ID="google.com";var Dc=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.call(this,"github.com")}return vt(n,null,[{key:"credential",value:function(e){return kc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(LS){return null}}}]),n}(Pc);Dc.GITHUB_SIGN_IN_METHOD="github.com",Dc.PROVIDER_ID="github.com";var Lc=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return vt(n,[{key:"_getIdTokenResponse",value:function(e){return mc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,mc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,mc(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Gu),Mc=function(e){rn(n,e);var t=cn(n);function n(e){return dt(this,n),Ps(e.startsWith("saml."),"argument-error"),t.call(this,e)}return vt(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Lc.fromJSON(e);return Ps(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Lc._create(r,n)}catch(kz){return null}}}]),n}(Nc),Fc=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.call(this,"twitter.com")}return vt(n,null,[{key:"credential",value:function(e,t){return kc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(LS){return null}}}]),n}(Pc);function Uc(e,t){return jc.apply(this,arguments)}function jc(){return(jc=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qs(t,"POST","/v1/accounts:signUp",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Fc.TWITTER_SIGN_IN_METHOD="twitter.com",Fc.PROVIDER_ID="twitter.com";var qc=function(){function e(t){dt(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return vt(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=si(ci().mark((function t(n,r,i){var a,o,s,u,c=arguments;return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,xu._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Vc(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=si(ci().mark((function t(n,r,i){var a;return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Vc(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Vc(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Bc(){return Bc=si(ci().mark((function e(t){var n,r,i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bu(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new qc({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Uc(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,qc._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Bc.apply(this,arguments)}var zc=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a){var o,s;return dt(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(sn(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return vt(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ua);function Wc(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw zc._fromErrorAndOperation(e,n,t,r);throw n}))}function Hc(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Kc(e,t){return Gc.apply(this,arguments)}function Gc(){return Gc=si(ci().mark((function e(t,n){var r,i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,$c(!0,r,n);case 3:return e.t0=tu,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Hc(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Gc.apply(this,arguments)}function Qc(e,t){return Yc.apply(this,arguments)}function Yc(){return Yc=si(ci().mark((function e(t,n){var r,i,a=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=cu,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",qc._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Yc.apply(this,arguments)}function $c(e,t,n){return Jc.apply(this,arguments)}function Jc(){return(Jc=si(ci().mark((function e(t,n,r){var i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pu(n);case 2:i=Hc(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Ps(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xc(e,t){return Zc.apply(this,arguments)}function Zc(){return Zc=si(ci().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,cu(t,Wc(i,a,n,t),r);case 6:return Ps((o=e.sent).idToken,i,"internal-error"),Ps(s=uu(o.idToken),i,"internal-error"),u=s.sub,Ps(t.uid===u,i,"user-mismatch"),e.abrupt("return",qc._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ts(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Zc.apply(this,arguments)}function el(e,t){return tl.apply(this,arguments)}function tl(){return tl=si(ci().mark((function e(t,n){var r,i,a,o,s=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Wc(t,i,n);case 4:return a=e.sent,e.next=7,qc._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),tl.apply(this,arguments)}function nl(e,t){return rl.apply(this,arguments)}function rl(){return(rl=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",el(Bu(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function il(e,t){return al.apply(this,arguments)}function al(){return(al=si(ci().mark((function e(t,n){var r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,$c(!1,r,n.providerId);case 3:return e.abrupt("return",Qc(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ol(e,t){return sl.apply(this,arguments)}function sl(){return(sl=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xc(co(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ul(e,t){return cl.apply(this,arguments)}function cl(){return(cl=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qs(t,"POST","/v1/accounts:signInWithCustomToken",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ll(){return(ll=si(ci().mark((function e(t,n){var r,i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bu(t),e.next=3,ul(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,qc._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hl=function(){function e(t,n){dt(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return vt(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?fl._fromServerResponse(e,t):Ts(e,"internal-error")}}]),e}(),fl=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return vt(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(hl);function dl(e,t,n){var r;Ps((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ps("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ps(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ps(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function pl(){return(pl=si(ci().mark((function e(t,n,r){var i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),a={requestType:"PASSWORD_RESET",email:n},r&&dl(i,a,r),e.next=5,oc(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vl(){return(vl=si(ci().mark((function e(t,n,r){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qu(co(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yl(){return(yl=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xu(co(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ml(e,t){return gl.apply(this,arguments)}function gl(){return(gl=si(ci().mark((function e(t,n){var r,i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,Qu(r,{oobCode:n});case 3:i=e.sent,Ps(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Ps(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Ps(i.mfaInfo,r,"internal-error");case 13:Ps(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=hl._fromServerResponse(Bu(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kl(){return(kl=si(ci().mark((function e(t,n){var r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ml(co(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _l(e,t,n){return wl.apply(this,arguments)}function wl(){return(wl=si(ci().mark((function e(t,n,r){var i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bu(t),e.next=3,Uc(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,qc._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bl(){return(bl=si(ci().mark((function e(t,n,r){var i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),a={requestType:"EMAIL_SIGNIN",email:n},Ps(r.handleCodeInApp,i,"argument-error"),r&&dl(i,a,r),e.next=6,uc(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xl(){return(xl=si(ci().mark((function e(t,n,r){var i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),Ps((a=Sc.credentialWithLink(n,r||Ls()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",nl(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function El(e,t){return Tl.apply(this,arguments)}function Tl(){return(Tl=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(t,"POST","/v1/accounts:createAuthUri",zs(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Il(){return(Il=si(ci().mark((function e(t,n){var r,i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ms()?Ls():"http://localhost",i={identifier:n,continueUri:r},e.next=4,El(co(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cl(){return(Cl=si(ci().mark((function e(t,n){var r,i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=co(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&dl(r.auth,a,n),e.next=8,ic(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sl(){return(Sl=si(ci().mark((function e(t,n,r){var i,a,o,s;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&dl(i.auth,o,r),e.next=8,lc(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nl(e,t){return Pl.apply(this,arguments)}function Pl(){return(Pl=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ws(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rl(){return(Rl=si(ci().mark((function e(t,n){var r,i,a,o,s,u,c;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=co(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,cu(a,Nl(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Al(e,t,n){return Ol.apply(this,arguments)}function Ol(){return(Ol=si(ci().mark((function e(t,n,r){var i,a,o,s;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,cu(t,$u(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dl=vt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};dt(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ll=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a){var o;return dt(this,n),(o=t.call(this,e,r,i)).username=a,o}return vt(n)}(Dl),Ml=function(e){rn(n,e);var t=cn(n);function n(e,r){return dt(this,n),t.call(this,e,"facebook.com",r)}return vt(n)}(Dl),Fl=function(e){rn(n,e);var t=cn(n);function n(e,r){return dt(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return vt(n)}(Ll),Ul=function(e){rn(n,e);var t=cn(n);function n(e,r){return dt(this,n),t.call(this,e,"google.com",r)}return vt(n)}(Dl),jl=function(e){rn(n,e);var t=cn(n);function n(e,r,i){return dt(this,n),t.call(this,e,"twitter.com",r,i)}return vt(n)}(Ll);function ql(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=uu(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Dl(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ml(a,i);case"github.com":return new Fl(a,i);case"google.com":return new Ul(a,i);case"twitter.com":return new jl(a,i,e.screenName||null);case"custom":case"anonymous":return new Dl(a,null);default:return new Dl(a,r,i)}}(n)}var Vl=function(){function e(t,n){dt(this,e),this.type=t,this.credential=n}return vt(e,[{key:"toJSON",value:function(){return{multiFactorSession:i({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Bl=function(){function e(t,n,r){dt(this,e),this.session=t,this.hints=n,this.signInResolver=r}return vt(e,[{key:"resolveSignIn",value:function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Bu(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return hl._fromServerResponse(r,e)}));Ps(i.mfaPendingCredential,r,"internal-error");var o=Vl._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=si(ci().mark((function e(t){var a,s,u;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,qc._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return Ps(n.user,r,"internal-error"),e.abrupt("return",qc._forOperation(n.user,n.operationType,s));case 17:Ts(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function zl(e,t){return Ws(e,"POST","/v2/accounts/mfaEnrollment:start",zs(e,t))}var Wl=function(){function e(t){var n=this;dt(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return hl._fromServerResponse(t.auth,e)})))}))}return vt(e,[{key:"getSession",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Vl,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=si(ci().mark((function e(t,n){var r,i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,cu(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=si(ci().mark((function e(t){var n,r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,cu(this.user,Ws(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",zs(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Hl=new WeakMap;var Kl="__sak",Gl=function(){function e(t,n){dt(this,e),this.storageRetriever=t,this.type=n}return vt(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Kl,"1"),this.storage.removeItem(Kl),Promise.resolve(!0)):Promise.resolve(!1)}catch(LS){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Ql=function(e){rn(n,e);var t=cn(n);function n(){var e;return dt(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Pa();return Pu(e)||Mu(e)}()&&function(){try{return!(!window||window===window.top)}catch(kz){return!1}}(),e.fallbackToPolling=ju(),e._shouldAllowMigration=!0,e}return vt(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Uu()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=si(ci().mark((function e(t,r){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(en(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=si(ci().mark((function e(t){var r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(en(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(en(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Gl);Ql.type="LOCAL";var Yl=Ql,$l=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return vt(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Gl);$l.type="SESSION";var Jl=$l;function Xl(e){return Promise.all(e.map(function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Zl=function(){function e(t){dt(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return vt(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=si(ci().mark((function e(t){var n,r,i,a,o,s,u,c;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Xl(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function eh(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Zl.receivers=[];var th=function(){function e(t){dt(this,e),this.target=t,this.handlers=new Set}return vt(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=si(ci().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=eh("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function nh(){return window}function rh(){return"undefined"!==typeof nh().WorkerGlobalScope&&"function"===typeof nh().importScripts}function ih(){return ah.apply(this,arguments)}function ah(){return(ah=si(ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function oh(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var sh="firebaseLocalStorageDb",uh="firebaseLocalStorage",ch="fbase_key",lh=function(){function e(t){dt(this,e),this.request=t}return vt(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function hh(e,t){return e.transaction([uh],t?"readwrite":"readonly").objectStore(uh)}function fh(){var e=indexedDB.deleteDatabase(sh);return new lh(e).toPromise()}function dh(){var e=indexedDB.open(sh,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(uh,{keyPath:ch})}catch(kz){n(kz)}})),e.addEventListener("success",si(ci().mark((function n(){var r;return ci().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(uh)){n.next=12;break}return r.close(),n.next=5,fh();case 5:return n.t0=t,n.next=8,dh();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ph(e,t,n){return vh.apply(this,arguments)}function vh(){return vh=si(ci().mark((function e(t,n,r){var a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=hh(t,!0).put((i(a={},ch,n),i(a,"value",r),a)),e.abrupt("return",new lh(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),vh.apply(this,arguments)}function yh(e,t){return mh.apply(this,arguments)}function mh(){return mh=si(ci().mark((function e(t,n){var r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hh(t,!1).get(n),e.next=3,new lh(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),mh.apply(this,arguments)}function gh(e,t){var n=hh(e,!0).delete(t);return new lh(n).toPromise()}var kh=function(){function e(){dt(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return vt(e,[{key:"_openDb",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,dh();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=si(ci().mark((function e(t){var n,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rh()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=si(ci().mark((function e(){var t=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Zl._getInstance(rh()?self:null),this.receiver._subscribe("keyChanged",function(){var e=si(ci().mark((function e(n,r){var i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=si(ci().mark((function e(){var t,n,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ih();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new th(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&oh()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=si(ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,dh();case 5:return t=e.sent,e.next=8,ph(t,Kl,"1");case 8:return e.next=10,gh(t,Kl);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=si(ci().mark((function e(t,n){var r=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ph(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return yh(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=si(ci().mark((function e(t){var n=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return gh(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=si(ci().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=hh(e,!1).getAll();return new lh(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=da(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(si(ci().mark((function t(){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();kh.type="LOCAL";var _h=kh;function wh(e,t){return Ws(e,"POST","/v2/accounts/mfaSignIn:start",zs(e,t))}function bh(e){return xh.apply(this,arguments)}function xh(){return(xh=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ws(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eh(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Is("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Th(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Ih=1e12,Ch=function(){function e(t){dt(this,e),this.auth=t,this.counter=Ih,this._widgets=new Map}return vt(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Sh(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Ih;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Ih;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=si(ci().mark((function e(t){var n,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Ih,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Sh=function(){function e(t,n,r){var i=this;dt(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Ps(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return vt(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(kz){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(kz){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Nh=Th("rcb"),Ph=new Us(3e4,6e4),Rh="https://www.google.com/recaptcha/api.js?",Ah=function(){function e(){dt(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!nh().grecaptcha}return vt(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ps(Oh(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(nh().grecaptcha):new Promise((function(r,i){var a=nh().setTimeout((function(){i(Is(e,"network-request-failed"))}),Ph.get());nh()[Nh]=function(){nh().clearTimeout(a),delete nh()[Nh];var o=nh().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Is(e,"internal-error"))},Eh("".concat(Rh,"?").concat(Ja({onload:Nh,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Is(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!nh().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Oh(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Dh=function(){function e(){dt(this,e)}return vt(e,[{key:"load",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ch(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Lh="recaptcha",Mh={theme:"light",type:"image"},Fh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Mh),r=arguments.length>2?arguments[2]:void 0;dt(this,e),this.parameters=n,this.type=Lh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bu(r),this.isInvisible="invisible"===this.parameters.size,Ps("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Ps(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dh:new Ah,this.validateStartingState()}return vt(e,[{key:"verify",value:function(){var e=si(ci().mark((function e(){var t,n,r,i=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(kz){return Promise.reject(kz)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Ps(!this.parameters.sitekey,this.auth,"argument-error"),Ps(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ps("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=nh()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Ps(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=si(ci().mark((function e(){var t,n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=si(ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ps(Ms()&&!rh(),this.auth,"internal-error"),e.next=3,Uh();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,bh(this.auth);case 8:Ps(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Ps(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Uh(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var jh=function(){function e(t,n){dt(this,e),this.verificationId=t,this.onConfirmation=n}return vt(e,[{key:"confirm",value:function(e){var t=Ic._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function qh(){return(qh=si(ci().mark((function e(t,n,r){var i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bu(t),e.next=3,Wh(i,n,co(r));case 3:return a=e.sent,e.abrupt("return",new jh(a,(function(e){return nl(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vh(e,t,n){return Bh.apply(this,arguments)}function Bh(){return(Bh=si(ci().mark((function e(t,n,r){var i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),e.next=3,$c(!1,i,"phone");case 3:return e.next=5,Wh(i.auth,n,co(r));case 5:return a=e.sent,e.abrupt("return",new jh(a,(function(e){return il(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zh(){return(zh=si(ci().mark((function e(t,n,r){var i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=co(t),e.next=3,Wh(i.auth,n,co(r));case 3:return a=e.sent,e.abrupt("return",new jh(a,(function(e){return ol(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wh(e,t,n){return Hh.apply(this,arguments)}function Hh(){return Hh=si(ci().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Ps("string"===typeof a,t,"argument-error"),Ps(r.type===Lh,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Ps("enroll"===s.type,t,"internal-error"),e.next=13,zl(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Ps("signin"===s.type,t,"internal-error"),Ps(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,wh(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,_c(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Hh.apply(this,arguments)}function Kh(){return(Kh=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qc(co(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gh=function(){function e(t){dt(this,e),this.providerId=e.PROVIDER_ID,this.auth=Bu(t)}return vt(e,[{key:"verifyPhoneNumber",value:function(e,t){return Wh(this.auth,e,co(t))}}],[{key:"credential",value:function(e,t){return Ic._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Ic._fromTokenResponse(n,r):null}}]),e}();function Qh(e,t){return t?Ds(t):(Ps(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Gh.PROVIDER_ID="phone",Gh.PHONE_SIGN_IN_METHOD="phone";var Yh=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this,"custom","custom")).params=e,r}return vt(n,[{key:"_getIdTokenResponse",value:function(e){return mc(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return mc(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return mc(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Gu);function $h(e){return el(e.auth,new Yh(e),e.bypassAuthState)}function Jh(e){var t=e.auth,n=e.user;return Ps(n,t,"internal-error"),Xc(n,new Yh(e),e.bypassAuthState)}function Xh(e){return Zh.apply(this,arguments)}function Zh(){return(Zh=si(ci().mark((function e(t){var n,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Ps(r=t.user,n,"internal-error"),e.abrupt("return",Qc(r,new Yh(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ef=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];dt(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return vt(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=si(ci().mark((function t(n,r){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=si(ci().mark((function e(t){var n,r,i,a,o,s,u;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $h;case"linkViaPopup":case"linkViaRedirect":return Xh;case"reauthViaPopup":case"reauthViaRedirect":return Jh;default:Ts(this.auth,"internal-error")}}},{key:"resolve",value:function(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),tf=new Us(2e3,1e4);function nf(e,t,n){return rf.apply(this,arguments)}function rf(){return(rf=si(ci().mark((function e(t,n,r){var i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bu(t),Ss(t,n,Nc),a=Qh(i,r),o=new uf(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function af(){return(af=si(ci().mark((function e(t,n,r){var i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ss((i=co(t)).auth,n,Nc),a=Qh(i.auth,r),o=new uf(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function of(e,t,n){return sf.apply(this,arguments)}function sf(){return(sf=si(ci().mark((function e(t,n,r){var i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ss((i=co(t)).auth,n,Nc),a=Qh(i.auth,r),o=new uf(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uf=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a,o){var s;return dt(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=sn(s),s}return vt(n,[{key:"executeNotNull",value:function(){var e=si(ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Ps(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=si(ci().mark((function e(){var t,n=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return As(1===this.filter.length,"Popup operations only handle one event"),t=eh(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Is(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Is(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Is(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,tf.get())}()}}]),n}(ef);uf.currentPopupAction=null;var cf=new Map,lf=function(e){rn(n,e);var t=cn(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return dt(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return vt(n,[{key:"execute",value:function(){var e=si(ci().mark((function e(){var t,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=cf.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,hf(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,nn(en(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:cf.set(this.auth._key(),t);case 21:return this.bypassAuthState||cf.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=si(ci().mark((function e(t){var r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",nn(en(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",nn(en(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ef);function hf(e,t){return ff.apply(this,arguments)}function ff(){return ff=si(ci().mark((function e(t,n){var r,i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yf(n),i=vf(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),ff.apply(this,arguments)}function df(e,t){return pf.apply(this,arguments)}function pf(){return(pf=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vf(t)._set(yf(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vf(e){return Ds(e._redirectPersistence)}function yf(e){return Iu("pendingRedirect",e.config.apiKey,e.name)}function mf(e,t,n){return function(e,t,n){return gf.apply(this,arguments)}(e,t,n)}function gf(){return(gf=si(ci().mark((function e(t,n,r){var i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bu(t),Ss(t,n,Nc),a=Qh(i,r),e.next=5,df(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kf(e,t,n){return function(e,t,n){return _f.apply(this,arguments)}(e,t,n)}function _f(){return(_f=si(ci().mark((function e(t,n,r){var i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ss((i=co(t)).auth,n,Nc),a=Qh(i.auth,r),e.next=5,df(a,i.auth);case 5:return e.next=7,Cf(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wf(e,t,n){return function(e,t,n){return bf.apply(this,arguments)}(e,t,n)}function bf(){return(bf=si(ci().mark((function e(t,n,r){var i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ss((i=co(t)).auth,n,Nc),a=Qh(i.auth,r),e.next=5,$c(!1,i,n.providerId);case 5:return e.next=7,df(a,i.auth);case 7:return e.next=9,Cf(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xf(e,t){return Ef.apply(this,arguments)}function Ef(){return(Ef=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bu(t)._initializationPromise;case 2:return e.abrupt("return",Tf(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tf(e,t){return If.apply(this,arguments)}function If(){return If=si(ci().mark((function e(t,n){var r,i,a,o,s,u=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Bu(t),a=Qh(i,n),o=new lf(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),If.apply(this,arguments)}function Cf(e){return Sf.apply(this,arguments)}function Sf(){return(Sf=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eh("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nf=function(){function e(t){dt(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return vt(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Rf(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Is(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pf(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Pf(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Pf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Rf(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Af(e){return Of.apply(this,arguments)}function Of(){return Of=si(ci().mark((function e(t){var n,r=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ws(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Of.apply(this,arguments)}var Df=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lf=/^https?/;function Mf(){return(Mf=si(ci().mark((function e(t){var n,r,i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Af(t);case 4:n=e.sent,r=n.authorizedDomains,i=da(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Ff(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ts(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Ff(e){var t=Ls(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Lf.test(r))return!1;if(Df.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Uf=new Us(3e4,6e4);function jf(){var e=nh().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ft(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var qf=null;function Vf(e){return qf=qf||function(e){return new Promise((function(t,n){var r,i,a;function o(){jf(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){jf(),n(Is(e,"network-request-failed"))},timeout:Uf.get()})}if(null===(i=null===(r=nh().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=nh().gapi)||void 0===a?void 0:a.load)){var s=Th("iframefcb");return nh()[s]=function(){gapi.load?o():n(Is(e,"network-request-failed"))},Eh("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw qf=null,e}))}(e),qf}var Bf=new Us(5e3,15e3),zf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hf(e){var t=e.config;Ps(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?js(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Wo},i=Wf.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ja(r).slice(1))}function Kf(e){return Gf.apply(this,arguments)}function Gf(){return Gf=si(ci().mark((function e(t){var n,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vf(t);case 2:return n=e.sent,Ps(r=nh().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Hf(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zf,dontclear:!0},(function(e){return new Promise(function(){var n=si(ci().mark((function n(r,i){var a,o,s;return ci().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){nh().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Is(t,"network-request-failed"),o=nh().setTimeout((function(){i(a)}),Bf.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Gf.apply(this,arguments)}var Qf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yf="_blank",$f="http://localhost",Jf=function(){function e(t){dt(this,e),this.window=t,this.associatedEvent=null}return vt(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(kz){}}}]),e}();function Xf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Qf),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Pa().toLowerCase();n&&(s=Ru(c)?Yf:n),Nu(c)&&(t=t||$f,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=h(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Fu(c)&&"_self"!==s)return Zf(t||"",s),new Jf(null);var f=window.open(t||"",s,l);Ps(f,e,"popup-blocked");try{f.focus()}catch(kz){}return new Jf(f)}function Zf(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var ed="__/auth/handler",td="emulator/auth/handler";function nd(e,t,n,r,i,a){Ps(e.config.authDomain,e,"auth-domain-config-required"),Ps(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Wo,eventId:i};if(t instanceof Nc){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Ga(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=h(u[s],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Pc){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ed);return js(t,td)}(e),"?").concat(Ja(p).slice(1))}var rd="webStorageSupport",id=function(){function e(){dt(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jl,this._completeRedirectFn=Tf}return vt(e,[{key:"_openPopup",value:function(){var e=si(ci().mark((function e(t,n,r,i){var a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return As(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=nd(t,n,r,Ls(),i),e.abrupt("return",Xf(t,o,eh()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=si(ci().mark((function e(t,n,r,i){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=nd(t,n,r,Ls(),i),nh().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(As(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=si(ci().mark((function e(t){var n,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kf(t);case 2:return n=e.sent,r=new Nf(t),n.register("authEvent",(function(e){return Ps(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(rd,{type:rd},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Ts(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Mf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ju()||Pu()||Mu()}}]),e}(),ad=id,od=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this,"phone")).credential=e,r}return vt(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ws(e,"POST","/v2/accounts/mfaEnrollment:finalize",zs(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ws(e,"POST","/v2/accounts/mfaSignIn:finalize",zs(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){dt(this,e),this.factorId=t}return vt(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Rs("unexpected MultiFactorSessionType")}}}]),e}()),sd=function(){function e(){dt(this,e)}return vt(e,null,[{key:"assertion",value:function(e){return od._fromCredential(e)}}]),e}();sd.FACTOR_ID="phone";var ud,cd="@firebase/auth",ld="0.19.9",hd=function(){function e(t){dt(this,e),this.auth=t,this.internalListeners=new Map}return vt(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Ps(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function fd(){return window}ud="Browser",Lo(new lo("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){Ps(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Ps(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:ud,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qu(ud)},r=new Vu(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ds);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Lo(new lo("auth-internal",(function(e){return function(e){return new hd(e)}(Bu(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),$o(cd,ld,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(ud)),$o(cd,ld,"esm2017");function dd(e,t,n){return pd.apply(this,arguments)}function pd(){return pd=si(ci().mark((function e(t,n,r){var i,a,o,s,u;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fd(),o=a.BuildInfo,As(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,_d(n.sessionId);case 4:return s=e.sent,u={},Mu()?u.ibi=o.packageName:Ou()?u.apn=o.packageName:Ts(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",nd(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),pd.apply(this,arguments)}function vd(){return(vd=si(ci().mark((function e(t){var n,r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fd(),r=n.BuildInfo,i={},Mu()?i.iosBundleId=r.packageName:Ou()?i.androidPackageName=r.packageName:Ts(t,"operation-not-supported-in-this-environment"),e.next=5,Af(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yd(e){var t=fd().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function md(e,t,n){return gd.apply(this,arguments)}function gd(){return gd=si(ci().mark((function e(t,n,r){var i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fd(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(Is(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Ou()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),gd.apply(this,arguments)}function kd(e){var t,n,r,i,a,o,s,u,c,l,h=fd();Ps("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ps("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ps("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ps("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ps("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function _d(e){return wd.apply(this,arguments)}function wd(){return(wd=si(ci().mark((function e(t){var n,r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bd(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bd(e){if(As(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var xd=function(e){rn(n,e);var t=cn(n);function n(){var e;return dt(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return vt(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),nn(en(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Nf);function Ed(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Nd(),postBody:null,tenantId:e.tenantId,error:Is(e,"no-auth-event")}}function Td(e,t){return Pd()._set(Rd(e),t)}function Id(e){return Cd.apply(this,arguments)}function Cd(){return(Cd=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pd()._get(Rd(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Pd()._remove(Rd(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sd(e,t){var n,r,i=function(e){var t=Ad(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ad(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ad(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Ad(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(kz){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?Is(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Nd(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Pd(){return Ds(Yl)}function Rd(e){return Iu("authEvent",e.config.apiKey,e.name)}function Ad(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=s(t=n)||ht(t)||c(t)||l();r[0];return Xa(r.slice(1).join("?"))}var Od=function(){function e(){dt(this,e),this._redirectPersistence=Jl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Tf}return vt(e,[{key:"_initialize",value:function(){var e=si(ci().mark((function e(t){var n,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new xd(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Ts(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=si(ci().mark((function e(t,n,r,i){var a,o,s,u;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kd(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),cf.clear(),e.next=10,this._originValidation(t);case 10:return o=Ed(t,r,i),e.next=13,Td(t,o);case 13:return e.next=15,dd(t,o,n);case 15:return s=e.sent,e.next=18,yd(s);case 18:return u=e.sent,e.abrupt("return",md(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return vd.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=fd(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(si(ci().mark((function n(){return ci().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Id(e);case 2:t.onEvent(Ld());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=si(ci().mark((function n(r){var i,a;return ci().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Id(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Sd(i,r.url)),t.onEvent(a||Ld());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");fd().handleOpenURL=function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(kz){console.error(kz)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Dd=Od;function Ld(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Is("no-auth-event")}}function Md(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Fd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return!("file:"!==Md()&&"ionic:"!==Md()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ud(){return La()&&11===(null===document||void 0===document?void 0:document.documentMode)}function jd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/Edge\/\d+/.test(e)}function qd(){try{var e=self.localStorage,t=eh();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return Ud()||jd(e)}()||Fa()}catch(kz){return Vd()&&Fa()}return!1}function Vd(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Bd(){return("http:"===Md()||"https:"===Md()||Oa()||Fd())&&!(Da()||Aa())&&qd()&&!Vd()}function zd(){return Fd()&&"undefined"!==typeof document}function Wd(){return Hd.apply(this,arguments)}function Hd(){return(Hd=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zd()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kd={LOCAL:"local",NONE:"none",SESSION:"session"},Gd=Ps,Qd="persistence";function Yd(e,t){Gd(Object.values(Kd).includes(t),e,"invalid-persistence-type"),Da()?Gd(t!==Kd.SESSION,e,"unsupported-persistence-type"):Aa()?Gd(t===Kd.NONE,e,"unsupported-persistence-type"):Vd()?Gd(t===Kd.NONE||t===Kd.LOCAL&&Fa(),e,"unsupported-persistence-type"):Gd(t===Kd.NONE||qd(),e,"unsupported-persistence-type")}function $d(e){return Jd.apply(this,arguments)}function Jd(){return Jd=si(ci().mark((function e(t){var n,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Xd(),r=Iu(Qd,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Jd.apply(this,arguments)}function Xd(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(kz){return null}}var Zd=Ps,ep=function(){function e(){dt(this,e),this.browserResolver=Ds(ad),this.cordovaResolver=Ds(Dd),this.underlyingResolver=null,this._redirectPersistence=Jl,this._completeRedirectFn=Tf}return vt(e,[{key:"_initialize",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=si(ci().mark((function e(t,n,r,i){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=si(ci().mark((function e(t,n,r,i){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return zd()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Zd(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=si(ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Wd();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function tp(e){return e.unwrap()}function np(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new sp(e,function(e,t){var n,r=co(e),i=t;return Ps(t.customData.operationType,r,"argument-error"),Ps(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Bl._fromError(r,i)}(e,t));else if(r){var i=rp(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function rp(e){var t=(e instanceof Ua?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ua)&&"temporaryProof"in t&&"phoneNumber"in t)return Gh.credentialFromResult(e);var n,r=t.providerId;if(!r||r===hs)return null;switch(r){case ls:n=Oc;break;case us:n=Ac;break;case cs:n=Dc;break;case fs:n=Fc;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?Lc._create(r,s):kc._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new Rc(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Ua?n.credentialFromError(e):n.credentialFromResult(e)}function ip(e,t){return t.catch((function(t){throw t instanceof Ua&&np(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,rp(t)),additionalUserInfo:ql(e),user:up.getOrCreate(r)}}))}function ap(e,t){return op.apply(this,arguments)}function op(){return(op=si(ci().mark((function e(t,n){var r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return ip(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sp=function(){function e(t,n){dt(this,e),this.resolver=n,this.auth=t.wrapped()}return vt(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return ip(tp(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),up=function(){function e(t){dt(this,e),this._delegate=t,this.multiFactor=function(e){var t=co(e);return Hl.has(t)||Hl.set(t,Wl._fromUser(t)),Hl.get(t)}(t)}return vt(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ip(this.auth,il(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ap(this.auth,Vh(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ip(this.auth,of(this._delegate,t,ep)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$d(Bu(this.auth));case 2:return e.abrupt("return",wf(this._delegate,t,ep));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ip(this.auth,ol(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ap(this.auth,function(e,t,n){return zh.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return ip(this.auth,function(e,t,n){return af.apply(this,arguments)}(this._delegate,e,ep))}},{key:"reauthenticateWithRedirect",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$d(Bu(this.auth));case 2:return e.abrupt("return",kf(this._delegate,t,ep));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Cl.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kc(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Al(co(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Al(co(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Kh.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Rl.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Sl.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();up.USER_MAP=new WeakMap;var cp=Ps,lp=function(){function e(t,n){if(dt(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;cp(r,"invalid-api-key",{appName:t.name}),cp(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?ep:void 0;this._delegate=n.initialize({options:{persistence:fp(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(_s),this.linkUnderlyingAuth()}return vt(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?up.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Wu(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return yl.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ml(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return vl.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ip(this._delegate,_l(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Il.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Cc.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=si(ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cp(Bd(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,xf(this._delegate,ep);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",ip(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Bu(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=hp(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=hp(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return bl.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return pl.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=si(ci().mark((function e(t){var n,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Yd(this._delegate,t),e.t0=t,e.next=e.t0===Kd.SESSION?4:e.t0===Kd.LOCAL?6:e.t0===Kd.NONE?11:13;break;case 4:return n=Jl,e.abrupt("break",14);case 6:return e.next=8,Ds(_h)._isAvailable();case 8:return r=e.sent,n=r?_h:Yl,e.abrupt("break",14);case 11:return n=Tu,e.abrupt("break",14);case 13:return e.abrupt("return",Ts("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return ip(this._delegate,function(e){return Bc.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return ip(this._delegate,nl(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return ip(this._delegate,function(e,t){return ll.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return ip(this._delegate,function(e,t,n){return nl(co(e),Sc.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return ip(this._delegate,function(e,t,n){return xl.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ap(this._delegate,function(e,t,n){return qh.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cp(Bd(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",ip(this._delegate,nf(this._delegate,t,ep)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cp(Bd(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,$d(this._delegate);case 3:return e.abrupt("return",mf(this._delegate,t,ep));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return kl.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function hp(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&up.getOrCreate(e))},error:t,complete:n}}function fp(e,t){var n=function(e,t){var n=Xd();if(!n)return[];var r=Iu(Qd,e,t);switch(n.getItem(r)){case Kd.NONE:return[Tu];case Kd.LOCAL:return[_h,Jl];case Kd.SESSION:return[Jl];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(_h)||n.push(_h),"undefined"!==typeof window)for(var r=0,i=[Yl,Jl];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Tu)||n.push(Tu),n}lp.Persistence=Kd;var dp=function(){function e(){dt(this,e),this.providerId="phone",this._delegate=new Gh(tp(as.auth()))}return vt(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Gh.credential(e,t)}}]),e}();dp.PHONE_SIGN_IN_METHOD=Gh.PHONE_SIGN_IN_METHOD,dp.PROVIDER_ID=Gh.PROVIDER_ID;var pp,vp=Ps,yp=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:as.app();dt(this,e),vp(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Fh(t,n,i.auth()),this.type=this._delegate.type}return vt(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(pp=as).INTERNAL.registerComponent(new lo("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new lp(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ds,PASSWORD_RESET:ps,RECOVER_EMAIL:vs,REVERT_SECOND_FACTOR_ADDITION:ys,VERIFY_AND_CHANGE_EMAIL:ms,VERIFY_EMAIL:gs}},EmailAuthProvider:Sc,FacebookAuthProvider:Ac,GithubAuthProvider:Dc,GoogleAuthProvider:Oc,OAuthProvider:Rc,SAMLAuthProvider:Mc,PhoneAuthProvider:dp,PhoneMultiFactorGenerator:sd,RecaptchaVerifier:yp,TwitterAuthProvider:Fc,Auth:lp,AuthCredential:Gu,Error:Ua}).setInstantiationMode("LAZY").setMultipleInstances(!1)),pp.registerVersion("@firebase/auth-compat","0.2.9");var mp,gp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},kp={},_p=_p||{},wp=gp||self;function bp(){}function xp(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ep(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Tp="closure_uid_"+(1e9*Math.random()>>>0),Ip=0;function Cp(e,t,n){return e.call.apply(e.bind,arguments)}function Sp(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Np(e,t,n){return(Np=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Cp:Sp).apply(null,arguments)}function Pp(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Rp(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ap(){this.s=this.s,this.o=this.o}var Op={};Ap.prototype.s=!1,Ap.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Tp)&&e[Tp]||(e[Tp]=++Ip)}(this);delete Op[e]}},Ap.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Dp=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Lp=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Mp(e){return Array.prototype.concat.apply([],arguments)}function Fp(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Up(e){return/^[\s\xa0]*$/.test(e)}var jp,qp=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Vp(e,t){return-1!=e.indexOf(t)}function Bp(e,t){return e<t?-1:e>t?1:0}e:{var zp=wp.navigator;if(zp){var Wp=zp.userAgent;if(Wp){jp=Wp;break e}}jp=""}function Hp(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Kp(e){var t={};for(var n in e)t[n]=e[n];return t}var Gp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Qp(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Gp.length;a++)n=Gp[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Yp(e){return Yp[" "](e),e}Yp[" "]=bp;var $p,Jp=Vp(jp,"Opera"),Xp=Vp(jp,"Trident")||Vp(jp,"MSIE"),Zp=Vp(jp,"Edge"),ev=Zp||Xp,tv=Vp(jp,"Gecko")&&!(Vp(jp.toLowerCase(),"webkit")&&!Vp(jp,"Edge"))&&!(Vp(jp,"Trident")||Vp(jp,"MSIE"))&&!Vp(jp,"Edge"),nv=Vp(jp.toLowerCase(),"webkit")&&!Vp(jp,"Edge");function rv(){var e=wp.document;return e?e.documentMode:void 0}e:{var iv="",av=function(){var e=jp;return tv?/rv:([^\);]+)(\)|;)/.exec(e):Zp?/Edge\/([\d\.]+)/.exec(e):Xp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):nv?/WebKit\/(\S+)/.exec(e):Jp?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(av&&(iv=av?av[1]:""),Xp){var ov=rv();if(null!=ov&&ov>parseFloat(iv)){$p=String(ov);break e}}$p=iv}var sv,uv={};function cv(){return function(e){var t=uv;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=qp(String($p)).split("."),n=qp("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Bp(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Bp(0==a[2].length,0==o[2].length)||Bp(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(wp.document&&Xp){var lv=rv();sv=lv||(parseInt($p,10)||void 0)}else sv=void 0;var hv=sv,fv=function(){if(!wp.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{wp.addEventListener("test",bp,t),wp.removeEventListener("test",bp,t)}catch(n){}return e}();function dv(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function pv(e,t){if(dv.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(tv){e:{try{Yp(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:vv[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&pv.Z.h.call(this)}}dv.prototype.h=function(){this.defaultPrevented=!0},Rp(pv,dv);var vv={2:"touch",3:"pen",4:"mouse"};pv.prototype.h=function(){pv.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var yv="closure_listenable_"+(1e6*Math.random()|0),mv=0;function gv(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++mv,this.ca=this.fa=!1}function kv(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function _v(e){this.src=e,this.g={},this.h=0}function wv(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Dp(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(kv(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function bv(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}_v.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=bv(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new gv(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var xv="closure_lm_"+(1e6*Math.random()|0),Ev={};function Tv(e,t,n,r,i){if(r&&r.once)return Cv(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Tv(e,t[a],n,r,i);return null}return n=Dv(n),e&&e[yv]?e.N(t,n,Ep(r)?!!r.capture:!!r,i):Iv(e,t,n,!1,r,i)}function Iv(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ep(i)?!!i.capture:!!i,s=Av(e);if(s||(e[xv]=s=new _v(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Rv;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)fv||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Pv(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Cv(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Cv(e,t[a],n,r,i);return null}return n=Dv(n),e&&e[yv]?e.O(t,n,Ep(r)?!!r.capture:!!r,i):Iv(e,t,n,!0,r,i)}function Sv(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Sv(e,t[a],n,r,i);else r=Ep(r)?!!r.capture:!!r,n=Dv(n),e&&e[yv]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=bv(a=e.g[t],n,r,i))&&(kv(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Av(e))&&(t=e.g[t.toString()],e=-1,t&&(e=bv(t,n,r,i)),(n=-1<e?t[e]:null)&&Nv(n))}function Nv(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[yv])wv(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Pv(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Av(t))?(wv(n,e),0==n.h&&(n.src=null,t[xv]=null)):kv(e)}}}function Pv(e){return e in Ev?Ev[e]:Ev[e]="on"+e}function Rv(e,t){if(e.ca)e=!0;else{t=new pv(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Nv(e),e=n.call(r,t)}return e}function Av(e){return(e=e[xv])instanceof _v?e:null}var Ov="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dv(e){return"function"===typeof e?e:(e[Ov]||(e[Ov]=function(t){return e.handleEvent(t)}),e[Ov])}function Lv(){Ap.call(this),this.i=new _v(this),this.P=this,this.I=null}function Mv(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new dv(t,e);else if(t instanceof dv)t.target=t.target||e;else{var i=t;Qp(t=new dv(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Fv(o,r,!0,t)&&i}if(i=Fv(o=t.g=e,r,!0,t)&&i,i=Fv(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Fv(o=t.g=n[a],r,!1,t)&&i}function Fv(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&wv(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Rp(Lv,Ap),Lv.prototype[yv]=!0,Lv.prototype.removeEventListener=function(e,t,n,r){Sv(this,e,t,n,r)},Lv.prototype.M=function(){if(Lv.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)kv(n[r]);delete t.g[e],t.h--}}this.I=null},Lv.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Lv.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Uv=wp.JSON.stringify;function jv(){var e=Gv,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var qv,Vv=function(){function e(){dt(this,e),this.h=this.g=null}return vt(e,[{key:"add",value:function(e,t){var n=Bv.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Bv=new(function(){function e(t,n){dt(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return vt(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new zv}),(function(e){return e.reset()})),zv=function(){function e(){dt(this,e),this.next=this.g=this.h=null}return vt(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Wv(e){wp.setTimeout((function(){throw e}),0)}function Hv(e,t){qv||function(){var e=wp.Promise.resolve(void 0);qv=function(){e.then(Qv)}}(),Kv||(qv(),Kv=!0),Gv.add(e,t)}var Kv=!1,Gv=new Vv;function Qv(){for(var e;e=jv();){try{e.h.call(e.g)}catch(n){Wv(n)}var t=Bv;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Kv=!1}function Yv(e,t){Lv.call(this),this.h=e||1,this.g=t||wp,this.j=Np(this.kb,this),this.l=Date.now()}function $v(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Jv(e,t,n){if("function"===typeof e)n&&(e=Np(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Np(e.handleEvent,e)}return 2147483647<Number(t)?-1:wp.setTimeout(e,t||0)}function Xv(e){e.g=Jv((function(){e.g=null,e.i&&(e.i=!1,Xv(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Rp(Yv,Lv),(mp=Yv.prototype).da=!1,mp.S=null,mp.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Mv(this,"tick"),this.da&&($v(this),this.start()))}},mp.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mp.M=function(){Yv.Z.M.call(this),$v(this),delete this.g};var Zv=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return vt(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Xv(this)}},{key:"M",value:function(){nn(en(n.prototype),"M",this).call(this),this.g&&(wp.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ap);function ey(e){Ap.call(this),this.h=e,this.g={}}Rp(ey,Ap);var ty=[];function ny(e,t,n,r){Array.isArray(n)||(n&&(ty[0]=n.toString()),n=ty);for(var i=0;i<n.length;i++){var a=Tv(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ry(e){Hp(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Nv(e)}),e),e.g={}}function iy(){this.g=!0}function ay(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Uv(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}ey.prototype.M=function(){ey.Z.M.call(this),ry(this)},ey.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},iy.prototype.Aa=function(){this.g=!1},iy.prototype.info=function(){};var oy={},sy=null;function uy(){return sy=sy||new Lv}function cy(e){dv.call(this,oy.Ma,e)}function ly(e){var t=uy();Mv(t,new cy(t,e))}function hy(e,t){dv.call(this,oy.STAT_EVENT,e),this.stat=t}function fy(e){var t=uy();Mv(t,new hy(t,e))}function dy(e,t){dv.call(this,oy.Na,e),this.size=t}function py(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return wp.setTimeout((function(){e()}),t)}oy.Ma="serverreachability",Rp(cy,dv),oy.STAT_EVENT="statevent",Rp(hy,dv),oy.Na="timingevent",Rp(dy,dv);var vy={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},yy={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function my(){}function gy(e){return e.h||(e.h=e.i())}function ky(){}my.prototype.h=null;var _y,wy={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function by(){dv.call(this,"d")}function xy(){dv.call(this,"c")}function Ey(){}function Ty(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new ey(this),this.P=Cy,e=ev?125:void 0,this.W=new Yv(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Iy}function Iy(){this.i=null,this.g="",this.h=!1}Rp(by,dv),Rp(xy,dv),Rp(Ey,my),Ey.prototype.g=function(){return new XMLHttpRequest},Ey.prototype.i=function(){return{}},_y=new Ey;var Cy=45e3,Sy={},Ny={};function Py(e,t,n){e.K=1,e.v=Zy(Gy(t)),e.s=n,e.U=!0,Ry(e,null)}function Ry(e,t){e.F=Date.now(),Ly(e),e.A=Gy(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),fm(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Iy,e.g=pg(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Zv(Np(e.Ia,e,e.g),e.O)),ny(e.V,e.g,"readystatechange",e.gb),t=e.H?Kp(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ly(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Ay(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Oy(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Dy(e,n))==Ny){4==t&&(e.o=4,fy(14),i=!1),ay(e.j,e.m,null,"[Incomplete Response]");break}if(r==Sy){e.o=4,fy(15),ay(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ay(e.j,e.m,r,null),qy(e,r)}Ay(e)&&r!=Ny&&r!=Sy&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,fy(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),og(t),t.L=!0,fy(11))):(ay(e.j,e.m,n,"[Invalid Chunked Response]"),jy(e),Uy(e))}function Dy(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ny:(n=Number(t.substring(n,r)),isNaN(n)?Sy:(r+=1)+n>t.length?Ny:(t=t.substr(r,n),e.C=r+n,t))}function Ly(e){e.Y=Date.now()+e.P,My(e,e.P)}function My(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=py(Np(e.eb,e),t)}function Fy(e){e.B&&(wp.clearTimeout(e.B),e.B=null)}function Uy(e){0==e.l.G||e.I||cg(e.l,e)}function jy(e){Fy(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,$v(e.W),ry(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function qy(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||_m(n.i,e)))if(n.I=e.N,!e.J&&_m(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ug(n),Jm(n)}ag(n),fy(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=py(Np(n.ab,n),6e3));if(1>=km(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else hg(n,11)}else if((e.J||n.g==e)&&ug(n),!Up(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Vp(l,"spdy")||Vp(l,"quic")||Vp(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(wm(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Xy(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=dg(r,r.H?r.la:null,r.W),d.J){bm(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Fy(p),Ly(p)),r.g=d}else ig(r);0<n.l.length&&eg(n)}else"stop"!=a[0]&&"close"!=a[0]||hg(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?hg(n,7):$m(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}ly(4)}catch(a){}}function Vy(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(xp(e)||"string"===typeof e)Lp(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(xp(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(xp(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function By(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof By)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function zy(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Wy(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Wy(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Wy(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(mp=Ty.prototype).setTimeout=function(e){this.P=e},mp.gb=function(e){e=e.target;var t=this.L;t&&3==Hm(e)?t.l():this.Ia(e)},mp.Ia=function(e){try{if(e==this.g)e:{var t=Hm(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||ev||this.g&&(this.h.h||this.g.ga()||Km(this.g)))){this.I||4!=t||7==n||ly(8==n||0>=r?3:2),Fy(this);var i=this.g.ba();this.N=i;t:if(Ay(this)){var a=Km(this.g);e="";var o=a.length,s=4==Hm(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){jy(this),Uy(this);var u="";break t}this.h.i=new wp.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Up(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,fy(12),jy(this),Uy(this);break e}ay(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qy(this,i)}this.U?(Oy(this,t,u),ev&&this.i&&3==t&&(ny(this.V,this.W,"tick",this.fb),this.W.start())):(ay(this.j,this.m,u,null),qy(this,u)),4==t&&jy(this),this.i&&!this.I&&(4==t?cg(this.l,this):(this.i=!1,Ly(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,fy(12)):(this.o=0,fy(13)),jy(this),Uy(this)}}}catch(t){}},mp.fb=function(){if(this.g){var e=Hm(this.g),t=this.g.ga();this.C<t.length&&(Fy(this),Oy(this,e,t),this.i&&4!=e&&Ly(this))}},mp.cancel=function(){this.I=!0,jy(this)},mp.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ly(3),fy(17)),jy(this),this.o=2,Uy(this)):My(this,this.Y-e)},(mp=By.prototype).R=function(){zy(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},mp.T=function(){return zy(this),this.g.concat()},mp.get=function(e,t){return Wy(this.h,e)?this.h[e]:t},mp.set=function(e,t){Wy(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},mp.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Hy=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ky(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ky){this.g=void 0!==t?t:e.g,Qy(this,e.j),this.s=e.s,Yy(this,e.i),$y(this,e.m),this.l=e.l,t=e.h;var n=new um;n.i=t.i,t.g&&(n.g=new By(t.g),n.h=t.h),Jy(this,n),this.o=e.o}else e&&(n=String(e).match(Hy))?(this.g=!!t,Qy(this,n[1]||"",!0),this.s=em(n[2]||""),Yy(this,n[3]||"",!0),$y(this,n[4]),this.l=em(n[5]||"",!0),Jy(this,n[6]||"",!0),this.o=em(n[7]||"")):(this.g=!!t,this.h=new um(null,this.g))}function Gy(e){return new Ky(e)}function Qy(e,t,n){e.j=n?em(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Yy(e,t,n){e.i=n?em(t,!0):t}function $y(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Jy(e,t,n){t instanceof um?(e.h=t,function(e,t){t&&!e.j&&(cm(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(lm(this,t),fm(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=tm(t,om)),e.h=new um(t,e.g))}function Xy(e,t,n){e.h.set(t,n)}function Zy(e){return Xy(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function em(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function tm(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,nm),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function nm(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ky.prototype.toString=function(){var e=[],t=this.j;t&&e.push(tm(t,rm,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(tm(t,rm,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(tm(n,"/"==n.charAt(0)?am:im,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",tm(n,sm)),e.join("")};var rm=/[#\/\?@]/g,im=/[#\?:]/g,am=/[#\?]/g,om=/[#\?@]/g,sm=/#/g;function um(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function cm(e){e.g||(e.g=new By,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function lm(e,t){cm(e),t=dm(e,t),Wy(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Wy((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&zy(e)))}function hm(e,t){return cm(e),t=dm(e,t),Wy(e.g.h,t)}function fm(e,t,n){lm(e,t),0<n.length&&(e.i=null,e.g.set(dm(e,t),Fp(n)),e.h+=n.length)}function dm(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(mp=um.prototype).add=function(e,t){cm(this),this.i=null,e=dm(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},mp.forEach=function(e,t){cm(this),this.g.forEach((function(n,r){Lp(n,(function(n){e.call(t,n,r,this)}),this)}),this)},mp.T=function(){cm(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},mp.R=function(e){cm(this);var t=[];if("string"===typeof e)hm(this,e)&&(t=Mp(t,this.g.get(dm(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Mp(t,e[n])}return t},mp.set=function(e,t){return cm(this),this.i=null,hm(this,e=dm(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},mp.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},mp.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var pm=vt((function e(t,n){dt(this,e),this.h=t,this.g=n}));function vm(e){this.l=e||mm,wp.PerformanceNavigationTiming?e=0<(e=wp.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(wp.g&&wp.g.Ea&&wp.g.Ea()&&wp.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ym,mm=10;function gm(e){return!!e.h||!!e.g&&e.g.size>=e.j}function km(e){return e.h?1:e.g?e.g.size:0}function _m(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function wm(e,t){e.g?e.g.add(t):e.h=t}function bm(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function xm(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=da(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Fp(e.i)}function Em(){}function Tm(){this.g=new Em}function Im(e,t,n){var r=n||"";try{Vy(e,(function(e,n){var i=e;Ep(e)&&(i=Uv(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(kz){throw t.push(r+"type="+encodeURIComponent("_badmap")),kz}}function Cm(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Sm(e){this.l=e.$b||null,this.j=e.ib||!1}function Nm(e,t){Lv.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Pm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vm.prototype.cancel=function(){if(this.i=xm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=da(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Em.prototype.stringify=function(e){return wp.JSON.stringify(e,void 0)},Em.prototype.parse=function(e){return wp.JSON.parse(e,void 0)},Rp(Sm,my),Sm.prototype.g=function(){return new Nm(this.l,this.j)},Sm.prototype.i=(ym={},function(){return ym}),Rp(Nm,Lv);var Pm=0;function Rm(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Am(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Om(e)}function Om(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(mp=Nm.prototype).open=function(e,t){if(this.readyState!=Pm)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Om(this)},mp.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||wp).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},mp.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Am(this)),this.readyState=Pm},mp.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Om(this)),this.g&&(this.readyState=3,Om(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof wp.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Rm(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},mp.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Am(this):Om(this),3==this.readyState&&Rm(this)}},mp.Ua=function(e){this.g&&(this.response=this.responseText=e,Am(this))},mp.Ta=function(e){this.g&&(this.response=e,Am(this))},mp.ha=function(){this.g&&Am(this)},mp.setRequestHeader=function(e,t){this.v.append(e,t)},mp.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},mp.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Dm=wp.JSON.parse;function Lm(e){Lv.call(this),this.headers=new By,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Mm,this.K=this.L=!1}Rp(Lm,Lv);var Mm="",Fm=/^https?$/i,Um=["POST","PUT"];function jm(e){return"content-type"==e.toLowerCase()}function qm(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Vm(e),zm(e)}function Vm(e){e.D||(e.D=!0,Mv(e,"complete"),Mv(e,"error"))}function Bm(e){if(e.h&&"undefined"!=typeof _p&&(!e.C[1]||4!=Hm(e)||2!=e.ba()))if(e.v&&4==Hm(e))Jv(e.Fa,0,e);else if(Mv(e,"readystatechange"),4==Hm(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Hy)[1]||null;if(!a&&wp.self&&wp.self.location){var o=wp.self.location.protocol;a=o.substr(0,o.length-1)}i=!Fm.test(a?a.toLowerCase():"")}t=i}if(t)Mv(e,"complete"),Mv(e,"success");else{e.m=6;try{var s=2<Hm(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Vm(e)}}finally{zm(e)}}}function zm(e,t){if(e.g){Wm(e);var n=e.g,r=e.C[0]?bp:null;e.g=null,e.C=null,t||Mv(e,"ready");try{n.onreadystatechange=r}catch(kz){}}}function Wm(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(wp.clearTimeout(e.A),e.A=null)}function Hm(e){return e.g?e.g.readyState:0}function Km(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Mm:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gm(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Hp(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Xy(e,t,n))}function Qm(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ym(e){this.za=0,this.l=[],this.h=new iy,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qm("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qm("baseRetryDelayMs",5e3,e),this.$a=Qm("retryDelaySeedMs",1e4,e),this.Ya=Qm("forwardChannelMaxRetries",2,e),this.ra=Qm("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new vm(e&&e.concurrentRequestLimit),this.Ca=new Tm,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function $m(e){if(Xm(e),3==e.G){var t=e.V++,n=Gy(e.F);Xy(n,"SID",e.J),Xy(n,"RID",t),Xy(n,"TYPE","terminate"),ng(e,n),(t=new Ty(e,e.h,t,void 0)).K=2,t.v=Zy(Gy(n)),n=!1,wp.navigator&&wp.navigator.sendBeacon&&(n=wp.navigator.sendBeacon(t.v.toString(),"")),!n&&wp.Image&&((new Image).src=t.v,n=!0),n||(t.g=pg(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ly(t)}fg(e)}function Jm(e){e.g&&(og(e),e.g.cancel(),e.g=null)}function Xm(e){Jm(e),e.u&&(wp.clearTimeout(e.u),e.u=null),ug(e),e.i.cancel(),e.m&&("number"===typeof e.m&&wp.clearTimeout(e.m),e.m=null)}function Zm(e,t){e.l.push(new pm(e.Za++,t)),3==e.G&&eg(e)}function eg(e){gm(e.i)||e.m||(e.m=!0,Hv(e.Ha,e),e.C=0)}function tg(e,t){var n;n=t?t.m:e.V++;var r=Gy(e.F);Xy(r,"SID",e.J),Xy(r,"RID",n),Xy(r,"AID",e.U),ng(e,r),e.o&&e.s&&Gm(r,e.o,e.s),n=new Ty(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=rg(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),wm(e.i,n),Py(n,r,t)}function ng(e,t){e.j&&Vy({},(function(e,n){Xy(t,n,e)}))}function rg(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Np(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Im(l,o,"req"+c+"_")}catch(Bg){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ig(e){e.g||e.u||(e.Y=1,Hv(e.Ga,e),e.A=0)}function ag(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=py(Np(e.Ga,e),lg(e,e.A)),e.A++,!0)}function og(e){null!=e.B&&(wp.clearTimeout(e.B),e.B=null)}function sg(e){e.g=new Ty(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Gy(e.oa);Xy(t,"RID","rpc"),Xy(t,"SID",e.J),Xy(t,"CI",e.N?"0":"1"),Xy(t,"AID",e.U),ng(e,t),Xy(t,"TYPE","xmlhttp"),e.o&&e.s&&Gm(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Zy(Gy(t)),n.s=null,n.U=!0,Ry(n,e)}function ug(e){null!=e.v&&(wp.clearTimeout(e.v),e.v=null)}function cg(e,t){var n=null;if(e.g==t){ug(e),og(e),e.g=null;var r=2}else{if(!_m(e.i,t))return;n=t.D,bm(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Mv(r=uy(),new dy(r,n,t,i)),eg(e)}else ig(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(km(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=py(Np(e.Ha,e,t),lg(e,e.C)),e.C++,!0))}(e,t)||2==r&&ag(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:hg(e,5);break;case 4:hg(e,10);break;case 3:hg(e,6);break;default:hg(e,2)}}function lg(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function hg(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Np(e.jb,e);n||(n=new Ky("//www.google.com/images/cleardot.gif"),wp.location&&"http"==wp.location.protocol||Qy(n,"https"),Zy(n)),function(e,t){var n=new iy;if(wp.Image){var r=new Image;r.onload=Pp(Cm,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Pp(Cm,n,r,"TestLoadImage: error",!1,t),r.onabort=Pp(Cm,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Pp(Cm,n,r,"TestLoadImage: timeout",!1,t),wp.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else fy(2);e.G=0,e.j&&e.j.va(t),fg(e),Xm(e)}function fg(e){e.G=0,e.I=-1,e.j&&(0==xm(e.i).length&&0==e.l.length||(e.i.i.length=0,Fp(e.l),e.l.length=0),e.j.ua())}function dg(e,t,n){var r=function(e){return e instanceof Ky?Gy(e):new Ky(e,void 0)}(n);if(""!=r.i)t&&Yy(r,t+"."+r.i),$y(r,r.m);else{var i=wp.location;r=function(e,t,n,r){var i=new Ky(null,void 0);return e&&Qy(i,e),t&&Yy(i,t),n&&$y(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Hp(e.aa,(function(e,t){Xy(r,t,e)})),t=e.D,n=e.sa,t&&n&&Xy(r,t,n),Xy(r,"VER",e.ma),ng(e,r),r}function pg(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Lm(new Sm({ib:!0})):new Lm(e.qa)).L=e.H,t}function vg(){}function yg(){if(Xp&&!(10<=Number(hv)))throw Error("Environmental error: no available transport.")}function mg(e,t){Lv.call(this),this.g=new Ym(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Up(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Up(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _g(this)}function gg(e){by.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function kg(){xy.call(this),this.status=1}function _g(e){this.g=e}(mp=Lm.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_y.g(),this.C=this.u?gy(this.u):gy(_y),this.g.onreadystatechange=Np(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void qm(this,a)}e=n||"";var i=new By(this.headers);r&&Vy(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=jm,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=wp.FormData&&e instanceof wp.FormData,!(0<=Dp(Um,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Wm(this),0<this.B&&((this.K=function(e){return Xp&&cv()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Np(this.pa,this)):this.A=Jv(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){qm(this,a)}},mp.pa=function(){"undefined"!=typeof _p&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mv(this,"timeout"),this.abort(8))},mp.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Mv(this,"complete"),Mv(this,"abort"),zm(this))},mp.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zm(this,!0)),Lm.Z.M.call(this)},mp.Fa=function(){this.s||(this.F||this.v||this.l?Bm(this):this.cb())},mp.cb=function(){Bm(this)},mp.ba=function(){try{return 2<Hm(this)?this.g.status:-1}catch(ym){return-1}},mp.ga=function(){try{return this.g?this.g.responseText:""}catch(ym){return""}},mp.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Dm(t)}},mp.Da=function(){return this.m},mp.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(mp=Ym.prototype).ma=8,mp.G=1,mp.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},mp.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Ty(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Qp(n=Kp(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=rg(this,t,r),Xy(i=Gy(this.F),"RID",e),Xy(i,"CVER",22),this.D&&Xy(i,"X-HTTP-Session-Id",this.D),ng(this,i),this.o&&n&&Gm(i,this.o,n),wm(this.i,t),this.Ra&&Xy(i,"TYPE","init"),this.ja?(Xy(i,"$req",r),Xy(i,"SID","null"),t.$=!0,Py(t,i,null)):Py(t,i,r),this.G=2}}else 3==this.G&&(e?tg(this,e):0==this.l.length||gm(this.i)||tg(this))},mp.Ga=function(){if(this.u=null,sg(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=py(Np(this.bb,this),e)}},mp.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,fy(10),Jm(this),sg(this))},mp.ab=function(){null!=this.v&&(this.v=null,Jm(this),ag(this),fy(19))},mp.jb=function(e){e?(this.h.info("Successfully pinged google.com"),fy(2)):(this.h.info("Failed to ping google.com"),fy(1))},(mp=vg.prototype).xa=function(){},mp.wa=function(){},mp.va=function(){},mp.ua=function(){},mp.Oa=function(){},yg.prototype.g=function(e,t){return new mg(e,t)},Rp(mg,Lv),mg.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Hv(Np(e.hb,e,t))),fy(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=dg(e,null,e.W),eg(e)},mg.prototype.close=function(){$m(this.g)},mg.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Zm(this.g,t)}else this.v?((t={}).__data__=Uv(e),Zm(this.g,t)):Zm(this.g,e)},mg.prototype.M=function(){this.g.j=null,delete this.j,$m(this.g),delete this.g,mg.Z.M.call(this)},Rp(gg,by),Rp(kg,xy),Rp(_g,vg),_g.prototype.xa=function(){Mv(this.g,"a")},_g.prototype.wa=function(e){Mv(this.g,new gg(e))},_g.prototype.va=function(e){Mv(this.g,new kg(e))},_g.prototype.ua=function(){Mv(this.g,"b")},yg.prototype.createWebChannel=yg.prototype.g,mg.prototype.send=mg.prototype.u,mg.prototype.open=mg.prototype.m,mg.prototype.close=mg.prototype.close,vy.NO_ERROR=0,vy.TIMEOUT=8,vy.HTTP_ERROR=6,yy.COMPLETE="complete",ky.EventType=wy,wy.OPEN="a",wy.CLOSE="b",wy.ERROR="c",wy.MESSAGE="d",Lv.prototype.listen=Lv.prototype.N,Lm.prototype.listenOnce=Lm.prototype.O,Lm.prototype.getLastError=Lm.prototype.La,Lm.prototype.getLastErrorCode=Lm.prototype.Da,Lm.prototype.getStatus=Lm.prototype.ba,Lm.prototype.getResponseJson=Lm.prototype.Qa,Lm.prototype.getResponseText=Lm.prototype.ga,Lm.prototype.send=Lm.prototype.ea;var wg=kp.createWebChannelTransport=function(){return new yg},bg=kp.getStatEventTarget=function(){return uy()},xg=kp.ErrorCode=vy,Eg=kp.EventType=yy,Tg=kp.Event=oy,Ig=kp.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Cg=kp.FetchXmlHttpFactory=Sm,Sg=kp.WebChannel=ky,Ng=kp.XhrIo=Lm,Pg="@firebase/firestore",Rg=function(){function e(t){dt(this,e),this.uid=t}return vt(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Rg.UNAUTHENTICATED=new Rg(null),Rg.GOOGLE_CREDENTIALS=new Rg("google-credentials-uid"),Rg.FIRST_PARTY=new Rg("first-party-uid"),Rg.MOCK_USER=new Rg("mock-user");var Ag="9.6.7",Og=new Eo("@firebase/firestore");function Dg(){return Og.logLevel}function Lg(e){if(Og.logLevel<=vo.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ug);Og.debug.apply(Og,["Firestore (".concat(Ag,"): ").concat(e)].concat(ft(i)))}}function Mg(e){if(Og.logLevel<=vo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ug);Og.error.apply(Og,["Firestore (".concat(Ag,"): ").concat(e)].concat(ft(i)))}}function Fg(e){if(Og.logLevel<=vo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ug);Og.warn.apply(Og,["Firestore (".concat(Ag,"): ").concat(e)].concat(ft(i)))}}function Ug(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function jg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ag,") INTERNAL ASSERTION FAILED: ")+e;throw Mg(t),new Error(t)}function qg(e,t){e||jg()}function Vg(e,t){return e}var Bg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},zg=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return vt(n)}(Ua),Wg=vt((function e(){var t=this;dt(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Hg=vt((function e(t,n){dt(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Kg=function(){function e(){dt(this,e)}return vt(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Rg.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Gg=function(){function e(t){dt(this,e),this.token=t,this.changeListener=null}return vt(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Qg=function(){function e(t){dt(this,e),this.t=t,this.currentUser=Rg.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return vt(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Wg;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Wg,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Lg("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Lg("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Wg)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Lg("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(qg("string"==typeof n.accessToken),new Hg(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return qg(null===e||"string"==typeof e),new Rg(e)}}]),e}(),Yg=vt((function e(t,n,r){dt(this,e),this.type="FirstParty",this.user=Rg.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),$g=function(){function e(t,n,r){dt(this,e),this.h=t,this.l=n,this.m=r}return vt(e,[{key:"getToken",value:function(){return Promise.resolve(new Yg(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Rg.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Jg=vt((function e(t){dt(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Xg=function(){function e(t){dt(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return vt(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Lg("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Lg("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Lg("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Lg("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(qg("string"==typeof t.token),e.p=t.token,new Jg(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Zg=function(){function e(t,n){var r=this;dt(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return vt(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function ek(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Zg.A=-1;var tk=function(){function e(){dt(this,e)}return vt(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ek(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function nk(e,t){return e<t?-1:e>t?1:0}function rk(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ik(e){return e+"\0"}var ak=function(){function e(t,n){if(dt(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new zg(Bg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new zg(Bg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new zg(Bg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new zg(Bg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return vt(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?nk(this.nanoseconds,e.nanoseconds):nk(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ok=function(){function e(t){dt(this,e),this.timestamp=t}return vt(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ak(0,0))}}]),e}();function sk(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function uk(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ck(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var lk=function(){function e(t,n,r){dt(this,e),void 0===n?n=0:n>t.length&&jg(),void 0===r?r=t.length-n:r>t.length-n&&jg(),this.segments=t,this.offset=n,this.len=r}return vt(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),hk=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new zg(Bg.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,ft(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lk),fk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dk=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return fk.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new zg(Bg.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new zg(Bg.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new zg(Bg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new zg(Bg.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(lk),pk=function(){function e(t){dt(this,e),this.fields=t,t.sort(dk.comparator)}return vt(e,[{key:"covers",value:function(e){var t,n=da(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return rk(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var vk=function(e){function t(e){dt(this,t),this.binaryString=e}return vt(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return nk(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();vk.EMPTY_BYTE_STRING=new vk("");var yk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mk(e){if(qg(!!e),"string"==typeof e){var t=0,n=yk.exec(e);if(qg(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:gk(e.seconds),nanos:gk(e.nanos)}}function gk(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function kk(e){return"string"==typeof e?vk.fromBase64String(e):vk.fromUint8Array(e)}function _k(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wk(e){var t=e.mapValue.fields.__previous_value__;return _k(t)?wk(t):t}function bk(e){var t=mk(e.mapValue.fields.__local_write_time__.timestampValue);return new ak(t.seconds,t.nanos)}var xk=vt((function e(t,n,r,i,a,o,s,u){dt(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),Ek=function(){function e(t,n){dt(this,e),this.projectId=t,this.database=n||"(default)"}return vt(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Tk(e){return null==e}function Ik(e){return 0===e&&1/e==-1/0}function Ck(e){return"number"==typeof e&&Number.isInteger(e)&&!Ik(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Sk=function(){function e(t){dt(this,e),this.path=t}return vt(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===hk.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(hk.fromString(t))}},{key:"fromName",value:function(t){return new e(hk.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(hk.emptyPath())}},{key:"comparator",value:function(e,t){return hk.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new hk(t.slice()))}}]),e}(),Nk={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function Pk(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_k(e)?4:10:jg()}function Rk(e,t){if(e===t)return!0;var n=Pk(e);if(n!==Pk(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bk(e).isEqual(bk(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=mk(e.timestampValue),r=mk(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return kk(e.bytesValue).isEqual(kk(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return gk(e.geoPointValue.latitude)===gk(t.geoPointValue.latitude)&&gk(e.geoPointValue.longitude)===gk(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return gk(e.integerValue)===gk(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=gk(e.doubleValue),r=gk(t.doubleValue);return n===r?Ik(n)===Ik(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return rk(e.arrayValue.values||[],t.arrayValue.values||[],Rk);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(sk(n)!==sk(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Rk(n[i],r[i])))return!1;return!0}(e,t);default:return jg()}}function Ak(e,t){return void 0!==(e.values||[]).find((function(e){return Rk(e,t)}))}function Ok(e,t){if(e===t)return 0;var n=Pk(e),r=Pk(t);if(n!==r)return nk(n,r);switch(n){case 0:return 0;case 1:return nk(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=gk(e.integerValue||e.doubleValue),r=gk(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Dk(e.timestampValue,t.timestampValue);case 4:return Dk(bk(e),bk(t));case 5:return nk(e.stringValue,t.stringValue);case 6:return function(e,t){var n=kk(e),r=kk(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=nk(n[i],r[i]);if(0!==a)return a}return nk(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=nk(gk(e.latitude),gk(t.latitude));return 0!==n?n:nk(gk(e.longitude),gk(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Ok(n[i],r[i]);if(a)return a}return nk(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=nk(r[o],a[o]);if(0!==s)return s;var u=Ok(n[r[o]],i[a[o]]);if(0!==u)return u}return nk(r.length,a.length)}(e.mapValue,t.mapValue);default:throw jg()}}function Dk(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return nk(e,t);var n=mk(e),r=mk(t),i=nk(n.seconds,r.seconds);return 0!==i?i:nk(n.nanos,r.nanos)}function Lk(e){return Mk(e)}function Mk(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=mk(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?kk(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Sk.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=da(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Mk(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=da(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Mk(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):jg();var t,n}function Fk(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Uk(e){return!!e&&"integerValue"in e}function jk(e){return!!e&&"arrayValue"in e}function qk(e){return!!e&&"nullValue"in e}function Vk(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bk(e){return!!e&&"mapValue"in e}function zk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return uk(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=zk(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=zk(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Wk=function(){function e(t){dt(this,e),this.value=t}return vt(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Bk(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zk(t)}},{key:"setAll",value:function(e){var t=this,n=dk.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=zk(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Bk(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Rk(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Bk(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){uk(t,(function(t,n){return e[t]=n}));var r,i=da(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(zk(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Hk(e){var t=[];return uk(e.fields,(function(e,n){var r=new dk([e]);if(Bk(n)){var i=Hk(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=da(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new pk(t)}var Kk=function(){function e(t,n,r,i,a,o){dt(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return vt(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Wk.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Wk.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ok.min(),ok.min(),Wk.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,ok.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ok.min(),Wk.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ok.min(),Wk.empty(),2)}}]),e}(),Gk=vt((function e(t,n,r,i){dt(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));Gk.UNKNOWN_ID=-1;var Qk=vt((function e(t,n){dt(this,e),this.fieldPath=t,this.kind=n})),Yk=function(){function e(t,n){dt(this,e),this.sequenceNumber=t,this.offset=n}return vt(e,null,[{key:"empty",value:function(){return new e(0,$k.min())}}]),e}(),$k=function(){function e(t,n,r){dt(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return vt(e,null,[{key:"min",value:function(){return new e(ok.min(),Sk.empty(),-1)}}]),e}(),Jk=vt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;dt(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function Xk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Jk(e,t,n,r,i,a,o)}function Zk(e){var t=Vg(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Lk(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Tk(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Lk(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Lk(e)})).join(",")),t.P=n}return t.P}function e_(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!d_(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Rk(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!v_(e.startAt,t.startAt)&&v_(e.endAt,t.endAt)}function t_(e){return Sk.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var n_=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a;return dt(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return vt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(Ok(t,this.value)):null!==t&&Pk(this.value)===Pk(t)&&this.V(Ok(t,this.value))}},{key:"V",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jg()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new r_(e,t,r):"array-contains"===t?new s_(e,r):"in"===t?new u_(e,r):"not-in"===t?new c_(e,r):"array-contains-any"===t?new l_(e,r):new n(e,t,r)}},{key:"v",value:function(e,t,n){return"in"===t?new i_(e,n):new a_(e,n)}}]),n}(function(){return vt((function e(){dt(this,e)}))}()),r_=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a;return dt(this,n),(a=t.call(this,e,r,i)).key=Sk.fromName(i.referenceValue),a}return vt(n,[{key:"matches",value:function(e){var t=Sk.comparator(e.key,this.key);return this.V(t)}}]),n}(n_),i_=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,e,"in",r)).keys=o_("in",r),i}return vt(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(n_),a_=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,e,"not-in",r)).keys=o_("not-in",r),i}return vt(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(n_);function o_(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Sk.fromName(e.referenceValue)}))}var s_=function(e){rn(n,e);var t=cn(n);function n(e,r){return dt(this,n),t.call(this,e,"array-contains",r)}return vt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return jk(t)&&Ak(t.arrayValue,this.value)}}]),n}(n_),u_=function(e){rn(n,e);var t=cn(n);function n(e,r){return dt(this,n),t.call(this,e,"in",r)}return vt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ak(this.value.arrayValue,t)}}]),n}(n_),c_=function(e){rn(n,e);var t=cn(n);function n(e,r){return dt(this,n),t.call(this,e,"not-in",r)}return vt(n,[{key:"matches",value:function(e){if(Ak(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ak(this.value.arrayValue,t)}}]),n}(n_),l_=function(e){rn(n,e);var t=cn(n);function n(e,r){return dt(this,n),t.call(this,e,"array-contains-any",r)}return vt(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!jk(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ak(t.value.arrayValue,e)}))}}]),n}(n_),h_=vt((function e(t,n){dt(this,e),this.position=t,this.inclusive=n})),f_=vt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";dt(this,e),this.field=t,this.dir=n}));function d_(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function p_(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Sk.comparator(Sk.fromName(o.referenceValue),n.key):Ok(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function v_(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Rk(e.position[n],t.position[n]))return!1;return!0}var y_=vt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;dt(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function m_(e,t,n,r,i,a,o,s){return new y_(e,t,n,r,i,a,o,s)}function g_(e){return new y_(e)}function k_(e){return!Tk(e.limit)&&"F"===e.limitType}function __(e){return!Tk(e.limit)&&"L"===e.limitType}function w_(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function b_(e){var t,n=da(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function x_(e){return null!==e.collectionGroup}function E_(e){var t=Vg(e);if(null===t.D){t.D=[];var n=b_(t),r=w_(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new f_(n)),t.D.push(new f_(dk.keyField(),"asc"));else{var i,a=!1,o=da(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new f_(dk.keyField(),u))}}}return t.D}function T_(e){var t=Vg(e);if(!t.C)if("F"===t.limitType)t.C=Xk(t.path,t.collectionGroup,E_(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=da(E_(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new f_(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new h_(t.endAt.position,!t.endAt.inclusive):null,u=t.startAt?new h_(t.startAt.position,!t.startAt.inclusive):null;t.C=Xk(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function I_(e,t,n){return new y_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function C_(e,t){return e_(T_(e),T_(t))&&e.limitType===t.limitType}function S_(e){return"".concat(Zk(T_(e)),"|lt:").concat(e.limitType)}function N_(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Lk(t.value));var t})).join(", "),"]")),Tk(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Lk(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Lk(e)})).join(",")),"Target(".concat(t,")")}(T_(e)),"; limitType=").concat(e.limitType,")")}function P_(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Sk.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=da(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=da(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=p_(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,E_(e),t))&&!(e.endAt&&!function(e,t,n){var r=p_(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,E_(e),t))}(e,t)}function R_(e){return function(t,n){var r,i=!1,a=da(E_(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=A_(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function A_(e,t,n){var r=e.field.isKeyField()?Sk.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ok(r,i):jg()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return jg()}}function O_(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ik(t)?"-0":t}}function D_(e){return{integerValue:""+e}}function L_(e,t){return Ck(t)?D_(t):O_(e,t)}var M_=vt((function e(){dt(this,e),this._=void 0}));function F_(e,t,n){return e instanceof q_?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof V_?B_(e,t):e instanceof z_?W_(e,t):function(e,t){var n=j_(e,t),r=K_(n)+K_(e.k);return Uk(n)&&Uk(e.k)?D_(r):O_(e.O,r)}(e,t)}function U_(e,t,n){return e instanceof V_?B_(e,t):e instanceof z_?W_(e,t):n}function j_(e,t){return e instanceof H_?Uk(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var q_=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n)}(M_),V_=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this)).elements=e,r}return vt(n)}(M_);function B_(e,t){var n,r=G_(t),i=da(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Rk(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var z_=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this)).elements=e,r}return vt(n)}(M_);function W_(e,t){var n,r=G_(t),i=da(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Rk(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var H_=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this)).O=e,i.k=r,i}return vt(n)}(M_);function K_(e){return gk(e.integerValue||e.doubleValue)}function G_(e){return jk(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Q_=vt((function e(t,n){dt(this,e),this.field=t,this.transform=n}));var Y_=vt((function e(t,n){dt(this,e),this.version=t,this.transformResults=n})),$_=function(){function e(t,n){dt(this,e),this.updateTime=t,this.exists=n}return vt(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function J_(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var X_=vt((function e(){dt(this,e)}));function Z_(e,t,n){e instanceof iw?function(e,t,n){var r=e.value.clone(),i=sw(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof aw?function(e,t,n){if(J_(e.precondition,t)){var r=sw(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ow(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ew(e,t,n){e instanceof iw?function(e,t,n){if(J_(e.precondition,t)){var r=e.value.clone(),i=uw(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(rw(t),r).setHasLocalMutations()}}(e,t,n):e instanceof aw?function(e,t,n){if(J_(e.precondition,t)){var r=uw(e.fieldTransforms,n,t),i=t.data;i.setAll(ow(e)),i.setAll(r),t.convertToFoundDocument(rw(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){J_(e.precondition,t)&&t.convertToNoDocument(ok.min())}(e,t)}function tw(e,t){var n,r=null,i=da(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=j_(a.transform,o||null);null!=s&&(null==r&&(r=Wk.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function nw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&rk(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof V_&&t instanceof V_||e instanceof z_&&t instanceof z_?rk(e.elements,t.elements,Rk):e instanceof H_&&t instanceof H_?Rk(e.k,t.k):e instanceof q_&&t instanceof q_}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function rw(e){return e.isFoundDocument()?e.version:ok.min()}var iw=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return dt(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return vt(n)}(X_),aw=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return dt(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return vt(n)}(X_);function ow(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function sw(e,t,n){var r=new Map;qg(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,U_(o,s,n[i]))}return r}function uw(e,t,n){var r,i=new Map,a=da(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,F_(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var cw,lw,hw=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return vt(n)}(X_),fw=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return vt(n)}(X_),dw=vt((function e(t){dt(this,e),this.count=t}));function pw(e){switch(e){default:return jg();case Bg.CANCELLED:case Bg.UNKNOWN:case Bg.DEADLINE_EXCEEDED:case Bg.RESOURCE_EXHAUSTED:case Bg.INTERNAL:case Bg.UNAVAILABLE:case Bg.UNAUTHENTICATED:return!1;case Bg.INVALID_ARGUMENT:case Bg.NOT_FOUND:case Bg.ALREADY_EXISTS:case Bg.PERMISSION_DENIED:case Bg.FAILED_PRECONDITION:case Bg.ABORTED:case Bg.OUT_OF_RANGE:case Bg.UNIMPLEMENTED:case Bg.DATA_LOSS:return!0}}function vw(e){if(void 0===e)return Mg("GRPC error has no .code"),Bg.UNKNOWN;switch(e){case cw.OK:return Bg.OK;case cw.CANCELLED:return Bg.CANCELLED;case cw.UNKNOWN:return Bg.UNKNOWN;case cw.DEADLINE_EXCEEDED:return Bg.DEADLINE_EXCEEDED;case cw.RESOURCE_EXHAUSTED:return Bg.RESOURCE_EXHAUSTED;case cw.INTERNAL:return Bg.INTERNAL;case cw.UNAVAILABLE:return Bg.UNAVAILABLE;case cw.UNAUTHENTICATED:return Bg.UNAUTHENTICATED;case cw.INVALID_ARGUMENT:return Bg.INVALID_ARGUMENT;case cw.NOT_FOUND:return Bg.NOT_FOUND;case cw.ALREADY_EXISTS:return Bg.ALREADY_EXISTS;case cw.PERMISSION_DENIED:return Bg.PERMISSION_DENIED;case cw.FAILED_PRECONDITION:return Bg.FAILED_PRECONDITION;case cw.ABORTED:return Bg.ABORTED;case cw.OUT_OF_RANGE:return Bg.OUT_OF_RANGE;case cw.UNIMPLEMENTED:return Bg.UNIMPLEMENTED;case cw.DATA_LOSS:return Bg.DATA_LOSS;default:return jg()}}(lw=cw||(cw={}))[lw.OK=0]="OK",lw[lw.CANCELLED=1]="CANCELLED",lw[lw.UNKNOWN=2]="UNKNOWN",lw[lw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lw[lw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lw[lw.NOT_FOUND=5]="NOT_FOUND",lw[lw.ALREADY_EXISTS=6]="ALREADY_EXISTS",lw[lw.PERMISSION_DENIED=7]="PERMISSION_DENIED",lw[lw.UNAUTHENTICATED=16]="UNAUTHENTICATED",lw[lw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lw[lw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lw[lw.ABORTED=10]="ABORTED",lw[lw.OUT_OF_RANGE=11]="OUT_OF_RANGE",lw[lw.UNIMPLEMENTED=12]="UNIMPLEMENTED",lw[lw.INTERNAL=13]="INTERNAL",lw[lw.UNAVAILABLE=14]="UNAVAILABLE",lw[lw.DATA_LOSS=15]="DATA_LOSS";var yw=function(){function e(t,n){dt(this,e),this.comparator=t,this.root=n||gw.EMPTY}return vt(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,gw.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,gw.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new mw(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new mw(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new mw(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new mw(this.root,e,this.comparator,!0)}}]),e}(),mw=function(){function e(t,n,r,i){dt(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return vt(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),gw=function(){function e(t,n,r,i,a){dt(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return vt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw jg();if(this.right.isRed())throw jg();var e=this.left.check();if(e!==this.right.check())throw jg();return e+(this.isRed()?0:1)}}]),e}();gw.EMPTY=null,gw.RED=!0,gw.BLACK=!1,gw.EMPTY=new(function(){function e(){dt(this,e),this.size=0}return vt(e,[{key:"key",get:function(){throw jg()}},{key:"value",get:function(){throw jg()}},{key:"color",get:function(){throw jg()}},{key:"left",get:function(){throw jg()}},{key:"right",get:function(){throw jg()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new gw(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var kw=function(){function e(t){dt(this,e),this.comparator=t,this.data=new yw(this.comparator)}return vt(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new _w(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new _w(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),_w=function(){function e(t){dt(this,e),this.iter=t}return vt(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ww(e){return e.hasNext()?e.getNext():void 0}var bw=new yw(Sk.comparator);function xw(){return bw}var Ew=new yw(Sk.comparator);function Tw(){return Ew}var Iw=new yw(Sk.comparator),Cw=new kw(Sk.comparator);function Sw(){for(var e=Cw,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Nw=new kw(nk);function Pw(){return Nw}var Rw=function(){function e(t,n,r,i,a){dt(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return vt(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Aw.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(ok.min(),r,Pw(),xw(),Sw())}}]),e}(),Aw=function(){function e(t,n,r,i,a){dt(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return vt(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(vk.EMPTY_BYTE_STRING,n,Sw(),Sw(),Sw())}}]),e}(),Ow=vt((function e(t,n,r,i){dt(this,e),this.M=t,this.removedTargetIds=n,this.key=r,this.$=i})),Dw=vt((function e(t,n){dt(this,e),this.targetId=t,this.F=n})),Lw=vt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vk.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;dt(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Mw=function(){function e(){dt(this,e),this.B=0,this.L=jw(),this.U=vk.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return vt(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=Sw(),t=Sw(),n=Sw();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:jg()}})),new Aw(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=jw()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Fw=function(){function e(t){dt(this,e),this.nt=t,this.st=new Map,this.it=xw(),this.rt=Uw(),this.ot=new kw(nk)}return vt(e,[{key:"ct",value:function(e){var t,n=da(e.M);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ut(r,e.$):this.at(r,e.key,e.$)}}catch(s){n.e(s)}finally{n.f()}var i,a=da(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.$)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:jg()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.F.count,r=this.wt(t);if(r){var i=r.target;if(t_(i))if(0===n){var a=new Sk(i.path);this.at(t,a,Kk.newNoDocument(a,ok.min()))}else qg(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&t_(a.target)){var o=new Sk(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.at(i,o,Kk.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Sw();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Rw(e,n,this.ot,this.it,r);return this.it=xw(),this.rt=Uw(),this.ot=new kw(nk),i}},{key:"ut",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Mw,this.st.set(e,t)),t}},{key:"Et",value:function(e){var t=this.rt.get(e);return t||(t=new kw(nk),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Lg("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Mw),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Uw(){return new yw(Sk.comparator)}function jw(){return new yw(Sk.comparator)}var qw={asc:"ASCENDING",desc:"DESCENDING"},Vw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bw=vt((function e(t,n){dt(this,e),this.databaseId=t,this.N=n}));function zw(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ww(e,t){return e.N?t.toBase64():t.toUint8Array()}function Hw(e,t){return zw(e,t.toTimestamp())}function Kw(e){return qg(!!e),ok.fromTimestamp(function(e){var t=mk(e);return new ak(t.seconds,t.nanos)}(e))}function Gw(e,t){return function(e){return new hk(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Qw(e){var t=hk.fromString(e);return qg(mb(t)),t}function Yw(e,t){return Gw(e.databaseId,t.path)}function $w(e,t){var n=Qw(t);if(n.get(1)!==e.databaseId.projectId)throw new zg(Bg.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new zg(Bg.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Sk(eb(n))}function Jw(e,t){return Gw(e.databaseId,t)}function Xw(e){var t=Qw(e);return 4===t.length?hk.emptyPath():eb(t)}function Zw(e){return new hk(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function eb(e){return qg(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function tb(e,t,n){return{name:Yw(e,t),fields:n.value.mapValue.fields}}function nb(e,t,n){var r=$w(e,t.name),i=Kw(t.updateTime),a=new Wk({mapValue:{fields:t.fields}}),o=Kk.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function rb(e,t){return"found"in t?function(e,t){qg(!!t.found),t.found.name,t.found.updateTime;var n=$w(e,t.found.name),r=Kw(t.found.updateTime),i=new Wk({mapValue:{fields:t.found.fields}});return Kk.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){qg(!!t.missing),qg(!!t.readTime);var n=$w(e,t.missing),r=Kw(t.readTime);return Kk.newNoDocument(n,r)}(e,t):jg()}function ib(e,t){var n;if(t instanceof iw)n={update:tb(e,t.key,t.value)};else if(t instanceof hw)n={delete:Yw(e,t.key)};else if(t instanceof aw)n={update:tb(e,t.key,t.data),updateMask:yb(t.fieldMask)};else{if(!(t instanceof fw))return jg();n={verify:Yw(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof q_)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof V_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof z_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof H_)return{fieldPath:t.field.canonicalString(),increment:n.k};throw jg()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Hw(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:jg()}(e,t.precondition)),n}function ab(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?$_.updateTime(Kw(e.updateTime)):void 0!==e.exists?$_.exists(e.exists):$_.none()}(t.currentDocument):$_.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)qg("REQUEST_TIME"===t.setToServerValue),n=new q_;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new V_(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new z_(i)}else"increment"in t?n=new H_(e,t.increment):jg();var a=dk.fromServerFormat(t.fieldPath);return new Q_(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=$w(e,t.update.name),a=new Wk({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new pk(t.map((function(e){return dk.fromServerFormat(e)})))}(t.updateMask);return new aw(i,a,o,n,r)}return new iw(i,a,n,r)}if(t.delete){var s=$w(e,t.delete);return new hw(s,n)}if(t.verify){var u=$w(e,t.verify);return new fw(u,n)}return jg()}function ob(e,t){return{documents:[Jw(e,t.path)]}}function sb(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Jw(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Jw(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Vk(e.value))return{unaryFilter:{field:fb(e.field),op:"IS_NAN"}};if(qk(e.value))return{unaryFilter:{field:fb(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Vk(e.value))return{unaryFilter:{field:fb(e.field),op:"IS_NOT_NAN"}};if(qk(e.value))return{unaryFilter:{field:fb(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fb(e.field),op:hb(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:fb(e.field),direction:lb(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||Tk(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ub(e){var t=Xw(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){qg(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=cb(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new f_(db(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Tk(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new h_(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new h_(n,t)}(n.endAt)),m_(t,i,s,o,u,"F",c,l)}function cb(e){return e?void 0!==e.unaryFilter?[vb(e)]:void 0!==e.fieldFilter?[pb(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return cb(e)})).reduce((function(e,t){return e.concat(t)})):jg():[]}function lb(e){return qw[e]}function hb(e){return Vw[e]}function fb(e){return{fieldPath:e.canonicalString()}}function db(e){return dk.fromServerFormat(e.fieldPath)}function pb(e){return n_.create(db(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jg()}}(e.fieldFilter.op),e.fieldFilter.value)}function vb(e){switch(e.unaryFilter.op){case"IS_NAN":var t=db(e.unaryFilter.field);return n_.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=db(e.unaryFilter.field);return n_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=db(e.unaryFilter.field);return n_.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=db(e.unaryFilter.field);return n_.create(i,"!=",{nullValue:"NULL_VALUE"});default:return jg()}}function yb(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function mb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function gb(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=_b(t)),t=kb(e.get(n),t);return _b(t)}function kb(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function _b(e){return e+"\x01\x01"}function wb(e){var t=e.length;if(qg(t>=2),2===t)return qg("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),hk.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&jg(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:jg()}a=o+2}return new hk(r)}var bb=vt((function e(t,n){dt(this,e),this.seconds=t,this.nanoseconds=n})),xb=vt((function e(t,n,r){dt(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));xb.store="owner",xb.key="owner";var Eb=vt((function e(t,n,r){dt(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));Eb.store="mutationQueues",Eb.keyPath="userId";var Tb=vt((function e(t,n,r,i,a){dt(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));Tb.store="mutations",Tb.keyPath="batchId",Tb.userMutationsIndex="userMutationsIndex",Tb.userMutationsKeyPath=["userId","batchId"];var Ib=function(){function e(){dt(this,e)}return vt(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,gb(t)]}},{key:"key",value:function(e,t,n){return[e,gb(t),n]}}]),e}();Ib.store="documentMutations",Ib.PLACEHOLDER=new Ib;var Cb=vt((function e(t,n){dt(this,e),this.path=t,this.readTime=n})),Sb=vt((function e(t,n){dt(this,e),this.path=t,this.version=n})),Nb=vt((function e(t,n,r,i,a,o){dt(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));Nb.store="remoteDocuments",Nb.readTimeIndex="readTimeIndex",Nb.readTimeIndexPath="readTime",Nb.collectionReadTimeIndex="collectionReadTimeIndex",Nb.collectionReadTimeIndexPath=["parentPath","readTime"];var Pb=vt((function e(t){dt(this,e),this.byteSize=t}));Pb.store="remoteDocumentGlobal",Pb.key="remoteDocumentGlobalKey";var Rb=vt((function e(t,n,r,i,a,o,s){dt(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=s}));Rb.store="targets",Rb.keyPath="targetId",Rb.queryTargetsIndexName="queryTargetsIndex",Rb.queryTargetsKeyPath=["canonicalId","targetId"];var Ab=vt((function e(t,n,r){dt(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));Ab.store="targetDocuments",Ab.keyPath=["targetId","path"],Ab.documentTargetsIndex="documentTargetsIndex",Ab.documentTargetsKeyPath=["path","targetId"];var Ob=vt((function e(t,n,r,i){dt(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));Ob.key="targetGlobalKey",Ob.store="targetGlobal";var Db=vt((function e(t,n){dt(this,e),this.collectionId=t,this.parent=n}));Db.store="collectionParents",Db.keyPath=["collectionId","parent"];var Lb=vt((function e(t,n,r,i){dt(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));Lb.store="clientMetadata",Lb.keyPath="clientId";var Mb=vt((function e(t,n,r){dt(this,e),this.bundleId=t,this.createTime=n,this.version=r}));Mb.store="bundles",Mb.keyPath="bundleId";var Fb=vt((function e(t,n,r){dt(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));Fb.store="namedQueries",Fb.keyPath="name";var Ub=vt((function e(t,n,r){dt(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r}));Ub.store="indexConfiguration",Ub.keyPath="indexId",Ub.collectionGroupIndex="collectionGroupIndex",Ub.collectionGroupIndexPath="collectionGroup";var jb=vt((function e(t,n,r,i,a,o){dt(this,e),this.indexId=t,this.uid=n,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=o}));jb.store="indexState",jb.keyPath=["indexId","uid"],jb.sequenceNumberIndex="sequenceNumberIndex",jb.sequenceNumberIndexPath=["uid","sequenceNumber"];var qb=vt((function e(t,n,r,i,a){dt(this,e),this.indexId=t,this.uid=n,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}));qb.store="indexEntries",qb.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],qb.documentKeyIndex="documentKeyIndex",qb.documentKeyIndexPath=["indexId","uid","documentKey"];var Vb=vt((function e(t,n,r,i,a,o){dt(this,e),this.userId=t,this.collectionPath=n,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=o}));Vb.store="documentOverlays",Vb.keyPath=["userId","collectionPath","documentId"],Vb.collectionPathOverlayIndex="collectionPathOverlayIndex",Vb.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Vb.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Vb.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];var Bb=[Eb.store,Tb.store,Ib.store,Nb.store,Rb.store,xb.store,Ob.store,Ab.store].concat([Lb.store]).concat([Pb.store]).concat([Db.store]).concat([Mb.store,Fb.store]),zb=[].concat(ft(Bb),[Vb.store]),Wb=[].concat(ft(zb),[Ub.store,jb.store,qb.store]),Hb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Kb=function(){function e(){dt(this,e),this.onCommittedListeners=[]}return vt(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Gb=function(){function e(t){var n=this;dt(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return vt(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&jg(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=da(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Qb=function(){function e(t,n){var r=this;dt(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Wg,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Jb(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=nx(e.target.error);r.At.reject(new Jb(t,n))}}return vt(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Lg("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Zb(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Jb(n,t)}}}]),e}(),Yb=function(){function e(t,n,r){dt(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.vt(Pa())&&Mg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return vt(e,[{key:"xt",value:function(){var e=si(ci().mark((function e(t){var n=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Lg("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Jb(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new zg(Bg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new zg(Bg.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Jb(t,n))},i.onupgradeneeded=function(e){Lg("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Lg("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Ot&&(this.db.onversionchange=function(e){return n.Ot(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mt",value:function(e){this.Ot=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=si(ci().mark((function e(t,n,r,i){var a,o,s,u,c=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(ci().mark((function e(){var n,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.xt(t);case 2:return c.db=e.sent,n=Qb.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),Gb.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,Lg("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Lg("SimpleDb","Removing database:",e),ex(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"Vt",value:function(){if(!Fa())return!1;if(e.St())return!0;var t=Pa(),n=e.vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/TeenCafe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"Nt",value:function(e,t){return e.store(t)}},{key:"vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),$b=function(){function e(t){dt(this,e),this.$t=t,this.Ft=!1,this.Bt=null}return vt(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return ex(this.$t.delete())}}]),e}(),Jb=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,Bg.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return vt(n)}(zg);function Xb(e){return"IndexedDbTransactionError"===e.name}var Zb=function(){function e(t){dt(this,e),this.store=t}return vt(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Lg("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Lg("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ex(n)}},{key:"add",value:function(e){return Lg("SimpleDb","ADD",this.store.name,e,e),ex(this.store.add(e))}},{key:"get",value:function(e){var t=this;return ex(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Lg("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Lg("SimpleDb","DELETE",this.store.name,e),ex(this.store.delete(e))}},{key:"count",value:function(){return Lg("SimpleDb","COUNT",this.store.name),ex(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Gb((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){Lg("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Qt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"Wt",value:function(e){var t=this.cursor({});return new Gb((function(n,r){t.onerror=function(e){var t=nx(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Gb((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new $b(i),o=t(i.primaryKey,i.value,a);if(o instanceof Gb){var s=o.catch((function(e){return a.done(),Gb.reject(e)}));n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Gb.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function ex(e){return new Gb((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=nx(e.target.error);n(t)}}))}var tx=!1;function nx(e){var t=Yb.vt(Pa());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new zg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return tx||(tx=!0,setTimeout((function(){throw r}),0)),r}}return e}var rx=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this)).zt=e,i.currentSequenceNumber=r,i}return vt(n)}(Kb);function ix(e,t){var n=Vg(e);return Yb.Nt(n.zt,t)}var ax=function(){function e(t,n,r,i){dt(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return vt(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Z_(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=da(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&ew(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=da(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&ew(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ok.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Sw())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&rk(this.mutations,e.mutations,(function(e,t){return nw(e,t)}))&&rk(this.baseMutations,e.baseMutations,(function(e,t){return nw(e,t)}))}}]),e}(),ox=function(){function e(t,n,r,i){dt(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return vt(e,null,[{key:"from",value:function(t,n,r){qg(t.mutations.length===r.length);for(var i=Iw,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),sx=function(){function e(t,n){dt(this,e),this.largestBatchId=t,this.mutation=n}return vt(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),ux=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ok.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ok.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vk.EMPTY_BYTE_STRING;dt(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return vt(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),cx=vt((function e(t){dt(this,e),this.Ht=t}));function lx(e,t){var n;if(t.document)n=nb(e.Ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Sk.fromSegments(t.noDocument.path),i=vx(t.noDocument.readTime);n=Kk.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return jg();var a=Sk.fromSegments(t.unknownDocument.path),o=vx(t.unknownDocument.version);n=Kk.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(dx(t.readTime)),n}function hx(e,t){var n=fx(t.readTime),r=t.key.path.popLast().toArray();if(t.isFoundDocument()){var i=function(e,t){return{name:Yw(e,t.key),fields:t.data.value.mapValue.fields,updateTime:zw(e,t.version.toTimestamp())}}(e.Ht,t),a=t.hasCommittedMutations;return new Nb(null,null,i,a,n,r)}if(t.isNoDocument()){var o=t.key.path.toArray(),s=px(t.version),u=t.hasCommittedMutations;return new Nb(null,new Cb(o,s),null,u,n,r)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=px(t.version);return new Nb(new Sb(c,l),null,null,!0,n,r)}return jg()}function fx(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function dx(e){var t=new ak(e[0],e[1]);return ok.fromTimestamp(t)}function px(e){var t=e.toTimestamp();return new bb(t.seconds,t.nanoseconds)}function vx(e){var t=new ak(e.seconds,e.nanoseconds);return ok.fromTimestamp(t)}function yx(e,t){for(var n=(t.baseMutations||[]).map((function(t){return ab(e.Ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return ab(e.Ht,t)})),s=ak.fromMillis(t.localWriteTimeMs);return new ax(t.batchId,s,n,o)}function mx(e){var t,n,r=vx(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?vx(e.lastLimboFreeSnapshotVersion):ok.min();return void 0!==e.query.documents?(qg(1===(n=e.query).documents.length),t=T_(g_(Xw(n.documents[0])))):t=function(e){return T_(ub(e))}(e.query),new ux(t,e.targetId,0,e.lastListenSequenceNumber,r,i,vk.fromBase64String(e.resumeToken))}function gx(e,t){var n,r=px(t.snapshotVersion),i=px(t.lastLimboFreeSnapshotVersion);n=t_(t.target)?ob(e.Ht,t.target):sb(e.Ht,t.target);var a=t.resumeToken.toBase64();return new Rb(t.targetId,Zk(t.target),r,a,t.sequenceNumber,i,n)}function kx(e){var t=ub({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?I_(t,t.limit,"L"):t}function _x(e,t){return new sx(t.largestBatchId,ab(e.Ht,t.overlayMutation))}function wx(e,t){var n=t.path.lastSegment();return[e,gb(t.path.popLast()),n]}var bx=function(){function e(){dt(this,e)}return vt(e,[{key:"getBundleMetadata",value:function(e,t){return xx(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:vx(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return xx(e).put({bundleId:(n=t).id,createTime:px(Kw(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Ex(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:kx(t.bundledQuery),readTime:vx(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Ex(e).put(function(e){return{name:e.name,readTime:px(Kw(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function xx(e){return ix(e,Mb.store)}function Ex(e){return ix(e,Fb.store)}var Tx=function(){function e(t,n){dt(this,e),this.O=t,this.userId=n}return vt(e,[{key:"getOverlay",value:function(e,t){var n=this;return Ix(e).get(wx(this.userId,t)).next((function(e){return e?_x(n.O,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n){var a=new sx(t,n);i.push(r.Yt(e,a))})),Gb.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(gb(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Ix(e).Gt(Vb.collectionPathOverlayIndex,i))})),Gb.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=new Map,a=gb(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ix(e).qt(Vb.collectionPathOverlayIndex,o).next((function(e){var t,n=da(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=_x(r.O,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=new Map,s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ix(e).Qt({index:Vb.collectionGroupOverlayIndex,range:s},(function(e,t,n){var s=_x(a.O,t);o.size<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Yt",value:function(e,t){return Ix(e).put(function(e,t,n){var r=h(wx(t,n.mutation.key),3),i=(r[0],r[1]),a=r[2];return new Vb(t,i,a,n.mutation.key.getCollectionGroup(),n.largestBatchId,ib(e.Ht,n.mutation))}(this.O,this.userId,t))}}],[{key:"Jt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Ix(e){return ix(e,Vb.store)}var Cx=function(){function e(){dt(this,e)}return vt(e,[{key:"Xt",value:function(e,t){this.Zt(e,t),t.te()}},{key:"Zt",value:function(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(gk(e.integerValue));else if("doubleValue"in e){var n=gk(e.doubleValue);isNaN(n)?this.ee(t,13):(this.ee(t,15),Ik(n)?t.ne(0):t.ne(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se("".concat(r.seconds||"")),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(kk(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ee(t,45),t.ne(i.latitude||0),t.ne(i.longitude||0)}else"mapValue"in e?Rk(e,Nk)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):jg()}},{key:"ie",value:function(e,t){this.ee(t,25),this.he(e,t)}},{key:"he",value:function(e,t){t.se(e)}},{key:"ue",value:function(e,t){var n=e.fields||{};this.ee(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ie(a,t),this.Zt(n[a],t)}}},{key:"ae",value:function(e,t){var n=e.values||[];this.ee(t,50);var r,i=da(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Zt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ce",value:function(e,t){var n=this;this.ee(t,37),Sk.fromName(e).path.forEach((function(e){n.ee(t,60),n.he(e,t)}))}},{key:"ee",value:function(e,t){e.ne(t)}},{key:"re",value:function(e){e.ne(2)}}]),e}();function Sx(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Nx(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Sx(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Cx.le=new Cx;var Px=function(){function e(){dt(this,e),this.buffer=new Uint8Array(1024),this.position=0}return vt(e,[{key:"fe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.de(n.value),n=t.next();this._e()}},{key:"we",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.me(n.value),n=t.next();this.ge()}},{key:"ye",value:function(e){var t,n=da(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.de(i);else if(i<2048)this.de(960|i>>>6),this.de(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.de(480|i>>>12),this.de(128|63&i>>>6),this.de(128|63&i);else{var a=r.codePointAt(0);this.de(240|a>>>18),this.de(128|63&a>>>12),this.de(128|63&a>>>6),this.de(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this._e()}},{key:"pe",value:function(e){var t,n=da(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.me(i);else if(i<2048)this.me(960|i>>>6),this.me(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.me(480|i>>>12),this.me(128|63&i>>>6),this.me(128|63&i);else{var a=r.codePointAt(0);this.me(240|a>>>18),this.me(128|63&a>>>12),this.me(128|63&a>>>6),this.me(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ge()}},{key:"Ie",value:function(e){var t=this.Ee(e),n=Nx(t);this.Te(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ae",value:function(e){var t=this.Ee(e),n=Nx(t);this.Te(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Re",value:function(){this.Pe(255),this.Pe(255)}},{key:"be",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ve",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"de",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"me",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"_e",value:function(){this.Pe(0),this.Pe(1)}},{key:"ge",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Te(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Te(1),this.buffer[this.position++]=~e}},{key:"Te",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Rx=function(){function e(t){dt(this,e),this.Se=t}return vt(e,[{key:"oe",value:function(e){this.Se.fe(e)}},{key:"se",value:function(e){this.Se.ye(e)}},{key:"ne",value:function(e){this.Se.Ie(e)}},{key:"te",value:function(){this.Se.Re()}}]),e}(),Ax=function(){function e(t){dt(this,e),this.Se=t}return vt(e,[{key:"oe",value:function(e){this.Se.we(e)}},{key:"se",value:function(e){this.Se.pe(e)}},{key:"ne",value:function(e){this.Se.Ae(e)}},{key:"te",value:function(){this.Se.be()}}]),e}(),Ox=function(){function e(){dt(this,e),this.Se=new Px,this.De=new Rx(this.Se),this.Ce=new Ax(this.Se)}return vt(e,[{key:"seed",value:function(e){this.Se.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.De:this.Ce}},{key:"Ve",value:function(){return this.Se.Ve()}},{key:"reset",value:function(){this.Se.reset()}}]),e}(),Dx=vt((function e(t,n,r,i){dt(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}));function Lx(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Sk.comparator(e.documentKey,t.documentKey))?n:0!==(n=Mx(e.arrayValue,t.arrayValue))?n:Mx(e.directionalValue,t.directionalValue)}function Mx(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Fx=function(){function e(){dt(this,e),this.xe=new Ux}return vt(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.xe.add(t),Gb.resolve()}},{key:"getCollectionParents",value:function(e,t){return Gb.resolve(this.xe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Gb.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Gb.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return Gb.resolve(Sw())}},{key:"getFieldIndex",value:function(e,t){return Gb.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Gb.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Gb.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Gb.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Gb.resolve()}}]),e}(),Ux=function(){function e(){dt(this,e),this.index={}}return vt(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new kw(hk.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new kw(hk.comparator)).toArray()}}]),e}(),jx=function(){function e(t){dt(this,e),this.user=t,this.ke=new Ux,this.uid=t.uid||""}return vt(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.ke.add(t)}));var a={collectionId:r,parent:gb(i)};return qx(e).put(a)}return Gb.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ik(t),""],!1,!0);return qx(e).qt(r).next((function(e){var r,i=da(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(wb(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Bx(e),r=function(e){return new Ub(e.indexId,e.collectionGroup,e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]})))}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Bx(e),r=zx(e),i=Vx(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return Gb.resolve(Sw())}},{key:"getFieldIndex",value:function(e,t){return Gb.resolve(null)}},{key:"Oe",value:function(e,t){var n,r=new Ox,i=da(function(e){return e.fields.filter((function(e){return 2!==e.kind}))}(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);Cx.le.Xt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Ve()}},{key:"Me",value:function(e){var t=new Ox;return Cx.le.Xt(e,t.Ne(0)),t.Ve()}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Bx(e),i=zx(e);return(t?r.qt(Ub.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Gb.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Yk(t.sequenceNumber,new $k(vx(t.readTime),new Sk(wb(t.documentKey)),t.largestBatchId)):Yk.empty(),r=e.fields.map((function(e){var t=h(e,2),n=t[0],r=t[1];return new Qk(dk.fromServerFormat(n),r)}));return new Gk(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){return e.indexState.sequenceNumber-t.indexState.sequenceNumber})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Bx(e),a=zx(e);return this.$e(e).next((function(e){return i.qt(Ub.collectionGroupIndex,IDBKeyRange.bound(t,t)).next((function(t){return Gb.forEach(t,(function(t){return a.put(function(e,t,n,r){return new jb(e,t.uid||"",n,px(r.readTime),gb(r.documentKey.path),r.largestBatchId)}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Gb.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Gb.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Gb.forEach(a,(function(r){return n.Fe(e,t,r).next((function(t){var a=n.Be(i,r);return t.isEqual(a)?Gb.resolve():n.Le(e,i,t,a)}))}))}))}))}},{key:"Ue",value:function(e,t,n){return Vx(e).put(new qb(n.indexId,this.uid,n.arrayValue,n.directionalValue,gb(t.key.path)))}},{key:"qe",value:function(e,t,n){return Vx(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,gb(t.key.path)])}},{key:"Fe",value:function(e,t,n){var r=Vx(e),i=new kw(Lx);return r.Qt({index:qb.documentKeyIndex,range:IDBKeyRange.only([n.indexId,this.uid,gb(t.path)])},(function(e,r){i=i.add(new Dx(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"Be",value:function(e,t){var n=new kw(Lx),r=this.Oe(t,e);if(null==r)return n;var i=function(e){return e.fields.find((function(e){return 2===e.kind}))}(t);if(null!=i){var a=e.data.field(i.fieldPath);if(jk(a)){var o,s=da(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new Dx(t.indexId,e.key,this.Me(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new Dx(t.indexId,e.key,new Uint8Array,r));return n}},{key:"Le",value:function(e,t,n,r){var i=this;Lg("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=ww(a),u=ww(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=ww(o)):l?(i(s),s=ww(a)):(s=ww(a),u=ww(o))}}(n,r,Lx,(function(n){a.push(i.Ue(e,t,n))}),(function(n){a.push(i.qe(e,t,n))})),Gb.waitFor(a)}},{key:"$e",value:function(e){var t=1;return zx(e).Qt({index:jb.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}}]),e}();function qx(e){return ix(e,Db.store)}function Vx(e){return ix(e,qb.store)}function Bx(e){return ix(e,Ub.store)}function zx(e){return ix(e,jb.store)}var Wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hx=function(){function e(t,n,r){dt(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return vt(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Kx(e,t,n){var r=e.store(Tb.store),i=e.store(Ib.store),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Qt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){qg(1===s)})));var c,l=[],h=da(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=Ib.key(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return Gb.waitFor(a).next((function(){return l}))}function Gx(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw jg();t=e.noDocument}return JSON.stringify(t).length}Hx.DEFAULT_COLLECTION_PERCENTILE=10,Hx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hx.DEFAULT=new Hx(41943040,Hx.DEFAULT_COLLECTION_PERCENTILE,Hx.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hx.DISABLED=new Hx(-1,0,0);var Qx=function(){function e(t,n,r,i){dt(this,e),this.userId=t,this.O=n,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}return vt(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $x(e).Qt({index:Tb.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Jx(e),o=$x(e);return o.add({}).next((function(s){qg("number"==typeof s);var u,c=new ax(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return ib(e.Ht,t)})),i=n.mutations.map((function(t){return ib(e.Ht,t)}));return new Tb(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.O,i.userId,c),h=[],f=new kw((function(e,t){return nk(e.canonicalString(),t.canonicalString())})),d=da(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=Ib.key(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,Ib.PLACEHOLDER))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Ke[s]=c.keys()})),Gb.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return $x(e).get(t).next((function(e){return e?(qg(e.userId===n.userId),yx(n.O,e)):null}))}},{key:"Ge",value:function(e,t){var n=this;return this.Ke[t]?Gb.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Ke[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return $x(e).Qt({index:Tb.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(qg(t.batchId>=r),a=yx(n.O,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return $x(e).Qt({index:Tb.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $x(e).qt(Tb.userMutationsIndex,n).next((function(e){return e.map((function(e){return yx(t.O,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Ib.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Jx(e).Qt({range:i},(function(r,i,o){var s=h(r,3),u=s[0],c=s[1],l=s[2],f=wb(c);if(u===n.userId&&t.path.isEqual(f))return $x(e).get(l).next((function(e){if(!e)throw jg();qg(e.userId===n.userId),a.push(yx(n.O,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new kw(nk),i=[];return t.forEach((function(t){var a=Ib.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Jx(e).Qt({range:o},(function(e,i,a){var o=h(e,3),s=o[0],u=o[1],c=o[2],l=wb(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),Gb.waitFor(i).next((function(){return n.je(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Ib.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new kw(nk);return Jx(e).Qt({range:o},(function(e,t,a){var o=h(e,3),u=o[0],c=o[1],l=o[2],f=wb(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.je(e,s)}))}},{key:"je",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push($x(e).get(t).next((function(e){if(null===e)throw jg();qg(e.userId===n.userId),r.push(yx(n.O,e))})))})),Gb.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Kx(e.zt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Qe(t.batchId)})),Gb.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Qe",value:function(e){delete this.Ke[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Gb.resolve();var r=IDBKeyRange.lowerBound(Ib.prefixForUser(t.userId)),i=[];return Jx(e).Qt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=wb(e[1]);i.push(a)}else r.done()})).next((function(){qg(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Yx(e,this.userId,t)}},{key:"We",value:function(e){var t=this;return Xx(e).get(this.userId).next((function(e){return e||new Eb(t.userId,-1,"")}))}}],[{key:"Jt",value:function(t,n,r,i){return qg(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Yx(e,t,n){var r=Ib.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Jx(e).Qt({range:a,jt:!0},(function(e,n,r){var a=h(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function $x(e){return ix(e,Tb.store)}function Jx(e){return ix(e,Ib.store)}function Xx(e){return ix(e,Eb.store)}var Zx=function(){function e(t){dt(this,e),this.ze=t}return vt(e,[{key:"next",value:function(){return this.ze+=2,this.ze}}],[{key:"He",value:function(){return new e(0)}},{key:"Je",value:function(){return new e(-1)}}]),e}(),eE=function(){function e(t,n){dt(this,e),this.referenceDelegate=t,this.O=n}return vt(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Ye(e).next((function(n){var r=new Zx(n.highestTargetId);return n.highestTargetId=r.next(),t.Xe(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Ye(e).next((function(e){return ok.fromTimestamp(new ak(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Ye(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Ye(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Xe(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ze(e,t).next((function(){return n.Ye(e).next((function(r){return r.targetCount+=1,n.tn(t,r),n.Xe(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ze(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return tE(e).delete(t.targetId)})).next((function(){return n.Ye(e)})).next((function(t){return qg(t.targetCount>0),t.targetCount-=1,n.Xe(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return tE(e).Qt((function(o,s){var u=mx(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return Gb.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return tE(e).Qt((function(e,n){var r=mx(n);t(r)}))}},{key:"Ye",value:function(e){return nE(e).get(Ob.key).next((function(e){return qg(null!==e),e}))}},{key:"Xe",value:function(e,t){return nE(e).put(Ob.key,t)}},{key:"Ze",value:function(e,t){return tE(e).put(gx(this.O,t))}},{key:"tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Ye(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Zk(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return tE(e).Qt({range:r,index:Rb.queryTargetsIndexName},(function(e,n,r){var a=mx(n);e_(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=rE(e);return t.forEach((function(t){var o=gb(t.path);i.push(a.put(new Ab(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),Gb.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=rE(e);return Gb.forEach(t,(function(t){var a=gb(t.path);return Gb.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=rE(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=rE(e),i=Sw();return r.Qt({range:n,jt:!0},(function(e,t,n){var r=wb(e[1]),a=new Sk(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=gb(t.path),r=IDBKeyRange.bound([n],[ik(n)],!1,!0),i=0;return rE(e).Qt({index:Ab.documentTargetsIndex,jt:!0,range:r},(function(e,t,n){var r=h(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Tt",value:function(e,t){return tE(e).get(t).next((function(e){return e?mx(e):null}))}}]),e}();function tE(e){return ix(e,Rb.store)}function nE(e){return ix(e,Ob.store)}function rE(e){return ix(e,Ab.store)}function iE(e){return aE.apply(this,arguments)}function aE(){return aE=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Bg.FAILED_PRECONDITION&&t.message===Hb){e.next=2;break}throw t;case 2:Lg("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),aE.apply(this,arguments)}function oE(e,t){var n=h(e,2),r=n[0],i=n[1],a=h(t,2),o=a[0],s=a[1],u=nk(r,o);return 0===u?nk(i,s):u}var sE=function(){function e(t){dt(this,e),this.en=t,this.buffer=new kw(oE),this.nn=0}return vt(e,[{key:"sn",value:function(){return++this.nn}},{key:"rn",value:function(e){var t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();oE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),uE=function(){function e(t,n){dt(this,e),this.garbageCollector=t,this.asyncQueue=n,this.on=!1,this.cn=null}return vt(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}},{key:"stop",value:function(){this.cn&&(this.cn.cancel(),this.cn=null)}},{key:"started",get:function(){return null!==this.cn}},{key:"un",value:function(e){var t=this,n=this.on?3e5:6e4;Lg("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,si(ci().mark((function n(){return ci().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.cn=null,t.on=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Xb(n.t0)){n.next=12;break}Lg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,iE(n.t0);case 14:return n.next=16,t.un(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),cE=function(){function e(t,n){dt(this,e),this.an=t,this.params=n}return vt(e,[{key:"calculateTargetCount",value:function(e,t){return this.an.hn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Gb.resolve(Zg.A);var r=new sE(t);return this.an.forEachTarget(e,(function(e){return r.rn(e.sequenceNumber)})).next((function(){return n.an.ln(e,(function(e){return r.rn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.an.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.an.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Lg("LruGarbageCollector","Garbage collection skipped; disabled"),Gb.resolve(Wx)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Lg("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Wx):n.fn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.an.getCacheSize(e)}},{key:"fn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Lg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Dg()<=vo.DEBUG&&Lg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Gb.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),lE=function(){function e(t,n){dt(this,e),this.db=t,this.garbageCollector=function(e,t){return new cE(e,t)}(this,n)}return vt(e,[{key:"hn",value:function(e){var t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"dn",value:function(e){var t=0;return this.ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ln",value:function(e,t){return this._n(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return hE(e,n)}},{key:"removeReference",value:function(e,t,n){return hE(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return hE(e,t)}},{key:"wn",value:function(e,t){return function(e,t){var n=!1;return Xx(e).Wt((function(r){return Yx(e,r,t).next((function(e){return e&&(n=!0),Gb.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this._n(e,(function(o,s){if(s<=t){var u=n.wn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,ok.min()),rE(e).delete([0,gb(o.path)])}))}));i.push(u)}})).next((function(){return Gb.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return hE(e,t)}},{key:"_n",value:function(e,t){var n,r=rE(e),i=Zg.A;return r.Qt({index:Ab.documentTargetsIndex},(function(e,r){var a=h(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Zg.A&&t(new Sk(wb(n)),i),i=u,n=s):i=Zg.A})).next((function(){i!==Zg.A&&t(new Sk(wb(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function hE(e,t){return rE(e).put(function(e,t){return new Ab(0,gb(e.path),t)}(t,e.currentSequenceNumber))}var fE=function(){function e(t,n){dt(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return vt(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=da(n);try{for(i.s();!(r=i.n()).done;){var a=h(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){uk(this.inner,(function(t,n){var r,i=da(n);try{for(i.s();!(r=i.n()).done;){var a=h(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ck(this.inner)}}]),e}(),dE=function(){function e(){dt(this,e),this.changes=new fE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return vt(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Kk.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Gb.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),pE=function(){function e(t){dt(this,e),this.O=t}return vt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return mE(e).put(gE(t),n)}},{key:"removeEntry",value:function(e,t){var n=mE(e),r=gE(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.mn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return mE(e).get(gE(t)).next((function(e){return n.gn(t,e)}))}},{key:"yn",value:function(e,t){var n=this;return mE(e).get(gE(t)).next((function(e){return{document:n.gn(t,e),size:Gx(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=xw();return this.pn(e,t,(function(e,t){var i=n.gn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"In",value:function(e,t){var n=this,r=xw(),i=new yw(Sk.comparator);return this.pn(e,t,(function(e,t){var a=n.gn(e,t);r=r.insert(e,a),i=i.insert(e,Gx(t))})).next((function(){return{documents:r,En:i}}))}},{key:"pn",value:function(e,t,n){if(t.isEmpty())return Gb.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return mE(e).Qt({range:r},(function(e,t,r){for(var o=Sk.fromSegments(e);a&&Sk.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Ut(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getAll",value:function(e,t,n){var r=this,i=xw(),a=t.length+1,o={};if(n.isEqual(ok.min())){var s=t.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.toArray(),c=fx(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Nb.collectionReadTimeIndex}return mE(e).Qt(o,(function(e,n,o){if(e.length===a){var s=r.gn(Sk.fromSegments(e),n);t.isPrefixOf(s.key.path)?i=i.insert(s.key,s):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new vE(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return yE(e).get(Pb.key).next((function(e){return qg(!!e),e}))}},{key:"mn",value:function(e,t){return yE(e).put(Pb.key,t)}},{key:"gn",value:function(e,t){if(t){var n=lx(this.O,t);if(!n.isNoDocument()||!n.version.isEqual(ok.min()))return n}return Kk.newInvalidDocument(e)}}]),e}(),vE=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this)).Tn=e,i.trackRemovals=r,i.An=new fE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return vt(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new kw((function(e,t){return nk(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.An.get(a);if(o.isValidDocument()){var u=hx(t.Tn.O,o);i=i.add(a.path.popLast());var c=Gx(u);r+=c-s,n.push(t.Tn.addEntry(e,a,u))}else if(r-=s,t.trackRemovals){var l=hx(t.Tn.O,o.convertToNoDocument(ok.min()));n.push(t.Tn.addEntry(e,a,l))}else n.push(t.Tn.removeEntry(e,a))})),i.forEach((function(r){n.push(t.Tn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Tn.updateMetadata(e,r)),Gb.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Tn.yn(e,t).next((function(e){return n.An.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Tn.In(e,t).next((function(e){var t=e.documents;return e.En.forEach((function(e,t){n.An.set(e,t)})),t}))}}]),n}(dE);function yE(e){return ix(e,Pb.store)}function mE(e){return ix(e,Nb.store)}function gE(e){return e.path.toArray()}var kE=function(){function e(t){dt(this,e),this.O=t}return vt(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Qb("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(xb.store)}(e),function(e){e.createObjectStore(Eb.store,{keyPath:Eb.keyPath}),e.createObjectStore(Tb.store,{keyPath:Tb.keyPath,autoIncrement:!0}).createIndex(Tb.userMutationsIndex,Tb.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Ib.store)}(e),_E(e),function(e){e.createObjectStore(Nb.store)}(e));var o=Gb.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Ab.store),e.deleteObjectStore(Rb.store),e.deleteObjectStore(Ob.store)}(e),_E(e)),o=o.next((function(){return function(e){var t=e.store(Ob.store),n=new Ob(0,0,ok.min().toTimestamp(),0);return t.put(Ob.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(Tb.store).qt().next((function(n){e.deleteObjectStore(Tb.store),e.createObjectStore(Tb.store,{keyPath:Tb.keyPath,autoIncrement:!0}).createIndex(Tb.userMutationsIndex,Tb.userMutationsKeyPath,{unique:!0});var r=t.store(Tb.store),i=n.map((function(e){return r.put(e)}));return Gb.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(Lb.store,{keyPath:Lb.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Rn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(Pb.store)}(e),i.Pn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.bn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.vn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Nb.store);t.createIndex(Nb.readTimeIndex,Nb.readTimeIndexPath,{unique:!1}),t.createIndex(Nb.collectionReadTimeIndex,Nb.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Vn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(Mb.store,{keyPath:Mb.keyPath})}(e),function(e){e.createObjectStore(Fb.store,{keyPath:Fb.keyPath})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore(Vb.store,{keyPath:Vb.keyPath});t.createIndex(Vb.collectionPathOverlayIndex,Vb.collectionPathOverlayIndexPath,{unique:!1}),t.createIndex(Vb.collectionGroupOverlayIndex,Vb.collectionGroupOverlayIndexPath,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){!function(e){e.createObjectStore(Ub.store,{keyPath:Ub.keyPath,autoIncrement:!0}).createIndex(Ub.collectionGroupIndex,Ub.collectionGroupIndexPath,{unique:!1}),e.createObjectStore(jb.store,{keyPath:jb.keyPath}).createIndex(jb.sequenceNumberIndex,jb.sequenceNumberIndexPath,{unique:!1}),e.createObjectStore(qb.store,{keyPath:qb.keyPath}).createIndex(qb.documentKeyIndex,qb.documentKeyIndexPath,{unique:!1})}(e)}))),o}},{key:"Pn",value:function(e){var t=0;return e.store(Nb.store).Qt((function(e,n){t+=Gx(n)})).next((function(){var n=new Pb(t);return e.store(Pb.store).put(Pb.key,n)}))}},{key:"Rn",value:function(e){var t=this,n=e.store(Eb.store),r=e.store(Tb.store);return n.qt().next((function(n){return Gb.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt(Tb.userMutationsIndex,i).next((function(r){return Gb.forEach(r,(function(r){qg(r.userId===n.userId);var i=yx(t.O,r);return Kx(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"bn",value:function(e){var t=e.store(Ab.store),n=e.store(Nb.store);return e.store(Ob.store).get(Ob.key).next((function(e){var r=[];return n.Qt((function(n,i){var a=new hk(n),o=function(e){return[0,gb(e)]}(a);r.push(t.get(o).next((function(n){return n?Gb.resolve():function(n){return t.put(new Ab(0,gb(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return Gb.waitFor(r)}))}))}},{key:"vn",value:function(e,t){e.createObjectStore(Db.store,{keyPath:Db.keyPath});var n=t.store(Db.store),r=new Ux,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:gb(i)})}};return t.store(Nb.store).Qt({jt:!0},(function(e,t){var n=new hk(e);return i(n.popLast())})).next((function(){return t.store(Ib.store).Qt({jt:!0},(function(e,t){var n=h(e,3),r=(n[0],n[1]),a=(n[2],wb(r));return i(a.popLast())}))}))}},{key:"Vn",value:function(e){var t=this,n=e.store(Rb.store);return n.Qt((function(e,r){var i=mx(r),a=gx(t.O,i);return n.put(a)}))}}]),e}();function _E(e){e.createObjectStore(Ab.store,{keyPath:Ab.keyPath}).createIndex(Ab.documentTargetsIndex,Ab.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Rb.store,{keyPath:Rb.keyPath}).createIndex(Rb.queryTargetsIndexName,Rb.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Ob.store)}var wE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bE=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:12;if(dt(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Sn=a,this.window=o,this.document=s,this.Dn=c,this.Cn=l,this.schemaVersion=h,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=function(e){return Promise.resolve()},!e.Vt())throw new zg(Bg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lE(this,i),this.Bn=n+"main",this.O=new cx(u),this.Ln=new Yb(this.Bn,this.schemaVersion,new kE(this.O)),this.Un=new eE(this.referenceDelegate,this.O),this.qn=function(e){return new pE(e)}(this.O),this.Kn=new bx,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===l&&Mg("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return vt(e,[{key:"start",value:function(){var e=this;return this.jn().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new zg(Bg.FAILED_PRECONDITION,wE);return e.Qn(),e.Wn(),e.zn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Un.getHighestSequenceNumber(t)}))})).then((function(t){e.Nn=new Zg(t,e.Dn)})).then((function(){e.xn=!0})).catch((function(t){return e.Ln&&e.Ln.close(),Promise.reject(t)}))}},{key:"Hn",value:function(e){var t=this;return this.Fn=function(){var n=si(ci().mark((function n(r){return ci().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ln.Mt(function(){var t=si(ci().mark((function t(n){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget(si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.jn();case 4:case"end":return e.stop()}}),e)})))))}},{key:"jn",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return EE(t).put(new Lb(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Jn(t).next((function(t){t||(e.isPrimary=!1,e.Sn.enqueueRetryable((function(){return e.Fn(!1)})))}))})).next((function(){return e.Yn(t)})).next((function(n){return e.isPrimary&&!n?e.Xn(t).next((function(){return!1})):!!n&&e.Zn(t).next((function(){return!0}))}))})).catch((function(t){if(Xb(t))return Lg("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Lg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Sn.enqueueRetryable((function(){return e.Fn(t)})),e.isPrimary=t}))}},{key:"Jn",value:function(e){var t=this;return xE(e).get(xb.key).next((function(e){return Gb.resolve(t.ts(e))}))}},{key:"es",value:function(e){return EE(e).delete(this.clientId)}},{key:"ns",value:function(){var e=si(ci().mark((function e(){var t,n,r,i,a=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.ss(this.$n,18e5)){e.next=6;break}return this.$n=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ix(e,Lb.store);return t.qt().next((function(e){var n=a.rs(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Gb.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Gn){n=da(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Gn.removeItem(this.os(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"zn",value:function(){var e=this;this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.jn().then((function(){return e.ns()})).then((function(){return e.zn()}))}))}},{key:"ts",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Yn",value:function(e){var t=this;return this.Cn?Gb.resolve(!0):xE(e).get(xb.key).next((function(n){if(null!==n&&t.ss(n.leaseTimestampMs,5e3)&&!t.cs(n.ownerId)){if(t.ts(n)&&t.networkEnabled)return!0;if(!t.ts(n)){if(!n.allowTabSynchronization)throw new zg(Bg.FAILED_PRECONDITION,wE);return!1}}return!(!t.networkEnabled||!t.inForeground)||EE(e).qt().next((function(e){return void 0===t.rs(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Lg("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=si(ci().mark((function e(){var t=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xn=!1,this.us(),this.Mn&&(this.Mn.cancel(),this.Mn=null),this.hs(),this.ls(),e.next=7,this.Ln.runTransaction("shutdown","readwrite",[xb.store,Lb.store],(function(e){var n=new rx(e,Zg.A);return t.Xn(n).next((function(){return t.es(n)}))}));case 7:this.Ln.close(),this.fs();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rs",value:function(e,t){var n=this;return e.filter((function(e){return n.ss(e.updateTimeMs,t)&&!n.cs(e.clientId)}))}},{key:"ds",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return EE(t).qt().next((function(t){return e.rs(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xn}},{key:"getMutationQueue",value:function(e,t){return Qx.Jt(e,this.O,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getIndexManager",value:function(e){return new jx(e)}},{key:"getDocumentOverlayCache",value:function(e){return Tx.Jt(this.O,e)}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;Lg("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=13===(i=this.schemaVersion)?Wb:12===i?zb:11===i?Bb:void jg();return this.Ln.runTransaction(e,o,s,(function(i){return a=new rx(i,r.Nn?r.Nn.next():Zg.A),"readwrite-primary"===t?r.Jn(a).next((function(e){return!!e||r.Yn(a)})).next((function(t){if(!t)throw Mg("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Sn.enqueueRetryable((function(){return r.Fn(!1)})),new zg(Bg.FAILED_PRECONDITION,Hb);return n(a)})).next((function(e){return r.Zn(a).next((function(){return e}))})):r._s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"_s",value:function(e){var t=this;return xE(e).get(xb.key).next((function(e){if(null!==e&&t.ss(e.leaseTimestampMs,5e3)&&!t.cs(e.ownerId)&&!t.ts(e)&&!(t.Cn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new zg(Bg.FAILED_PRECONDITION,wE)}))}},{key:"Zn",value:function(e){var t=new xb(this.clientId,this.allowTabSynchronization,Date.now());return xE(e).put(xb.key,t)}},{key:"Xn",value:function(e){var t=this,n=xE(e);return n.get(xb.key).next((function(e){return t.ts(e)?(Lg("IndexedDbPersistence","Releasing primary lease."),n.delete(xb.key)):Gb.resolve()}))}},{key:"ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Mg("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Qn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=function(){e.Sn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.jn()}))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}},{key:"hs",value:function(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}},{key:"Wn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=function(){t.us(),!Aa()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Sn.enterRestrictedMode(!0),t.Sn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.kn))}},{key:"ls",value:function(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}},{key:"cs",value:function(e){var t;try{var n=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Lg("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Mg("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"us",value:function(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(Rp){Mg("Failed to set zombie client id.",Rp)}}},{key:"fs",value:function(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(Rp){}}},{key:"os",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"Vt",value:function(){return Yb.Vt()}}]),e}();function xE(e){return ix(e,xb.store)}function EE(e){return ix(e,Lb.store)}function TE(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var IE=vt((function e(t,n){dt(this,e),this.progress=t,this.ws=n})),CE=function(){function e(t,n,r){dt(this,e),this.qn=t,this.gs=n,this.indexManager=r}return vt(e,[{key:"ys",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.ps(e,t,r)}))}},{key:"ps",value:function(e,t,n){return this.qn.getEntry(e,t).next((function(e){var t,r=da(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Is",value:function(e,t){e.forEach((function(e,n){var r,i=da(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Es",value:function(e,t){var n=this;return this.qn.getEntries(e,t).next((function(t){return n.Ts(e,t).next((function(){return t}))}))}},{key:"Ts",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Is(t,e)}))}},{key:"As",value:function(e,t,n){return function(e){return Sk.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Rs(e,t.path):x_(t)?this.Ps(e,t,n):this.bs(e,t,n)}},{key:"Rs",value:function(e,t){return this.ys(e,new Sk(t)).next((function(e){var t=Tw();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ps",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Tw();return this.indexManager.getCollectionParents(e,i).next((function(o){return Gb.forEach(o,(function(o){var s=function(e,t){return new y_(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.bs(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"bs",value:function(e,t,n){var r,i=this;return this.qn.getAll(e,t.path,n).next((function(n){return r=n,i.gs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=da(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=da(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=Kk.newInvalidDocument(u),r=r.insert(u,c)),ew(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){P_(t,n)||(r=r.remove(e))})),r}))}}]),e}(),SE=function(){function e(t,n,r,i){dt(this,e),this.targetId=t,this.fromCache=n,this.vs=r,this.Vs=i}return vt(e,null,[{key:"Ss",value:function(t,n){var r,i=Sw(),a=Sw(),o=da(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),NE=function(){function e(){dt(this,e)}return vt(e,[{key:"Ds",value:function(e){this.Cs=e}},{key:"As",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(ok.min())?this.Ns(e,t):this.Cs.Es(e,r).next((function(a){var o=i.xs(t,a);return(k_(t)||__(t))&&i.ks(t.limitType,o,r,n)?i.Ns(e,t):(Dg()<=vo.DEBUG&&Lg("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),N_(t)),i.Cs.As(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"xs",value:function(e,t){var n=new kw(R_(e));return t.forEach((function(t,r){P_(e,r)&&(n=n.add(r))})),n}},{key:"ks",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ns",value:function(e,t){return Dg()<=vo.DEBUG&&Lg("QueryEngine","Using full collection scan to execute query:",N_(t)),this.Cs.As(e,t,ok.min())}}]),e}(),PE=function(){function e(t,n,r,i){dt(this,e),this.persistence=t,this.Os=n,this.O=i,this.Ms=new yw(nk),this.$s=new fE((function(e){return Zk(e)}),e_),this.Fs=ok.min(),this.Bs=t.getRemoteDocumentCache(),this.Un=t.getTargetCache(),this.Kn=t.getBundleCache(),this.Ls(r)}return vt(e,[{key:"Ls",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new CE(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ms)}))}}]),e}();function RE(e,t,n,r){return new PE(e,t,n,r)}function AE(e,t){return OE.apply(this,arguments)}function OE(){return OE=si(ci().mark((function e(t,n){var r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vg(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.gs.getAllMutationBatches(e).next((function(i){return t=i,r.Ls(n),r.gs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Sw(),u=da(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=da(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=da(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=da(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.Us.Es(e,s).next((function(e){return{qs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),OE.apply(this,arguments)}function DE(e,t){var n=Vg(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Gb.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);qg(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.gs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}function LE(e){var t=Vg(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Un.getLastRemoteSnapshotVersion(e)}))}function ME(e,t){var n=Vg(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.Ms;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Un.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Un.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(vk.EMPTY_BYTE_STRING,ok.min()).withLastLimboFreeSnapshotVersion(ok.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Un.updateTargetData(e,c))}}));var s=xw();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(FE(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(ok.min())){var u=n.Un.getLastRemoteSnapshotVersion(e).next((function(t){return n.Un.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return Gb.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Us.Ts(e,s)})).next((function(){return s}))})).then((function(e){return n.Ms=i,e}))}function FE(e,t,n){var r=Sw();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=xw();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(ok.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Lg("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function UE(e,t){var n=Vg(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.gs.getNextMutationBatchAfterBatchId(e,t)}))}function jE(e,t){var n=Vg(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Un.getTargetData(e,t).next((function(i){return i?(r=i,Gb.resolve(r)):n.Un.allocateTargetId(e).next((function(i){return r=new ux(t,i,0,e.currentSequenceNumber),n.Un.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.$s.set(t,e.targetId)),e}))}function qE(e,t,n){return VE.apply(this,arguments)}function VE(){return VE=si(ci().mark((function e(t,n,r){var i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Vg(t),a=i.Ms.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Xb(e.t1)){e.next=12;break}throw e.t1;case 12:Lg("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ms=i.Ms.remove(n),i.$s.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),VE.apply(this,arguments)}function BE(e,t,n){var r=Vg(e),i=ok.min(),a=Sw();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Vg(e),i=r.$s.get(n);return void 0!==i?Gb.resolve(r.Ms.get(i)):r.Un.getTargetData(t,n)}(r,e,T_(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Os.As(e,t,n?i:ok.min(),n?a:Sw())})).next((function(e){return{documents:e,Ks:a}}))}))}function zE(e,t){var n=Vg(e),r=Vg(n.Un),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Tt(e,t).next((function(e){return e?e.target:null}))}))}function WE(e){var t=Vg(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Vg(e),i=xw(),a=fx(n),o=mE(t),s=IDBKeyRange.lowerBound(a,!0);return o.Qt({index:Nb.readTimeIndex,range:s},(function(e,t){var n=lx(r.O,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{ws:i,readTime:dx(a)}}))}(t.Bs,e,t.Fs)})).then((function(e){var n=e.ws,r=e.readTime;return t.Fs=r,n}))}function HE(e){return KE.apply(this,arguments)}function KE(){return KE=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vg(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=mE(e),n=ok.min();return t.Qt({index:Nb.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=dx(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.Fs=e})));case 2:case"end":return e.stop()}}),e)}))),KE.apply(this,arguments)}function GE(e,t,n,r){return QE.apply(this,arguments)}function QE(){return QE=si(ci().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,d,p;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Vg(t),o=Sw(),s=xw(),u=da(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.Gs(l.metadata.name),l.document&&(o=o.add(h)),(f=n.js(l)).setReadTime(n.Qs(l.metadata.readTime)),s=s.insert(h,f)}catch(v){u.e(v)}finally{u.f()}return d=a.Bs.newChangeBuffer({trackRemovals:!0}),e.next=7,jE(a,function(e){return T_(g_(hk.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return FE(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Un.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Un.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Us.Ts(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),QE.apply(this,arguments)}function YE(e,t){return $E.apply(this,arguments)}function $E(){return $E=si(ci().mark((function e(t,n){var r,i,a,o=arguments;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Sw(),e.next=3,jE(t,T_(kx(n.bundledQuery)));case 3:return i=e.sent,a=Vg(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Kw(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Kn.saveNamedQuery(e,n);var o=i.withResumeToken(vk.EMPTY_BYTE_STRING,t);return a.Ms=a.Ms.insert(o.targetId,o),a.Un.updateTargetData(e,o).next((function(){return a.Un.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Un.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Kn.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),$E.apply(this,arguments)}var JE=function(){function e(t){dt(this,e),this.O=t,this.Ws=new Map,this.zs=new Map}return vt(e,[{key:"getBundleMetadata",value:function(e,t){return Gb.resolve(this.Ws.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Ws.set(t.id,{id:(n=t).id,version:n.version,createTime:Kw(n.createTime)}),Gb.resolve()}},{key:"getNamedQuery",value:function(e,t){return Gb.resolve(this.zs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.zs.set(t.name,function(e){return{name:e.name,query:kx(e.bundledQuery),readTime:Kw(e.readTime)}}(t)),Gb.resolve()}}]),e}(),XE=function(){function e(){dt(this,e),this.overlays=new yw(Sk.comparator),this.Hs=new Map}return vt(e,[{key:"getOverlay",value:function(e,t){return Gb.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n){r.Yt(e,t,n)})),Gb.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Hs.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Hs.delete(n)),Gb.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=new Map,i=t.length+1,a=new Sk(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Gb.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new yw((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=new Map,i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=new Map,c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(t,e)})),!(u.size>=r)););return Gb.resolve(u)}},{key:"Yt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);null!==r&&this.Hs.get(r.largestBatchId).delete(n.key),this.overlays=this.overlays.insert(n.key,new sx(t,n));var i=this.Hs.get(t);void 0===i&&(i=new Set,this.Hs.set(t,i)),i.add(n.key)}}}]),e}(),ZE=function(){function e(){dt(this,e),this.Js=new kw(eT.Ys),this.Xs=new kw(eT.Zs)}return vt(e,[{key:"isEmpty",value:function(){return this.Js.isEmpty()}},{key:"addReference",value:function(e,t){var n=new eT(e,t);this.Js=this.Js.add(n),this.Xs=this.Xs.add(n)}},{key:"ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ei(new eT(e,t))}},{key:"ni",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"si",value:function(e){var t=this,n=new Sk(new hk([])),r=new eT(n,e),i=new eT(n,e+1),a=[];return this.Xs.forEachInRange([r,i],(function(e){t.ei(e),a.push(e.key)})),a}},{key:"ii",value:function(){var e=this;this.Js.forEach((function(t){return e.ei(t)}))}},{key:"ei",value:function(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}},{key:"ri",value:function(e){var t=new Sk(new hk([])),n=new eT(t,e),r=new eT(t,e+1),i=Sw();return this.Xs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new eT(e,0),n=this.Js.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),eT=function(){function e(t,n){dt(this,e),this.key=t,this.oi=n}return vt(e,null,[{key:"Ys",value:function(e,t){return Sk.comparator(e.key,t.key)||nk(e.oi,t.oi)}},{key:"Zs",value:function(e,t){return nk(e.oi,t.oi)||Sk.comparator(e.key,t.key)}}]),e}(),tT=function(){function e(t,n){dt(this,e),this.indexManager=t,this.referenceDelegate=n,this.gs=[],this.ci=1,this.ui=new kw(eT.Ys)}return vt(e,[{key:"checkEmpty",value:function(e){return Gb.resolve(0===this.gs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ci;this.ci++,this.gs.length>0&&this.gs[this.gs.length-1];var a=new ax(i,t,n,r);this.gs.push(a);var o,s=da(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ui=this.ui.add(new eT(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Gb.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Gb.resolve(this.ai(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.hi(n),i=r<0?0:r;return Gb.resolve(this.gs.length>i?this.gs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Gb.resolve(0===this.gs.length?-1:this.ci-1)}},{key:"getAllMutationBatches",value:function(e){return Gb.resolve(this.gs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new eT(t,0),i=new eT(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],(function(e){var t=n.ai(e.oi);a.push(t)})),Gb.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new kw(nk);return t.forEach((function(e){var t=new eT(e,0),i=new eT(e,Number.POSITIVE_INFINITY);n.ui.forEachInRange([t,i],(function(e){r=r.add(e.oi)}))})),Gb.resolve(this.li(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Sk.isDocumentKey(i)||(i=i.child(""));var a=new eT(new Sk(i),0),o=new kw(nk);return this.ui.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.oi)),!0)}),a),Gb.resolve(this.li(o))}},{key:"li",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ai(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;qg(0===this.fi(t.batchId,"removed")),this.gs.shift();var r=this.ui;return Gb.forEach(t.mutations,(function(i){var a=new eT(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ui=r}))}},{key:"Qe",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new eT(t,0),r=this.ui.firstAfterOrEqual(n);return Gb.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.gs.length,Gb.resolve()}},{key:"fi",value:function(e,t){return this.hi(e)}},{key:"hi",value:function(e){return 0===this.gs.length?0:e-this.gs[0].batchId}},{key:"ai",value:function(e){var t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}]),e}(),nT=function(){function e(t){dt(this,e),this.di=t,this.docs=new yw(Sk.comparator),this.size=0}return vt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.di(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Gb.resolve(n?n.document.mutableCopy():Kk.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=xw();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Kk.newInvalidDocument(e))})),Gb.resolve(r)}},{key:"getAll",value:function(e,t,n){for(var r=xw(),i=new Sk(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||u.readTime.compareTo(n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return Gb.resolve(r)}},{key:"_i",value:function(e,t){return Gb.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new rT(this)}},{key:"getSize",value:function(e){return Gb.resolve(this.size)}}]),e}(),rT=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this)).Tn=e,r}return vt(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Tn.addEntry(e,i)):t.Tn.removeEntry(r)})),Gb.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Tn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Tn.getEntries(e,t)}}]),n}(dE),iT=function(){function e(t){dt(this,e),this.persistence=t,this.wi=new fE((function(e){return Zk(e)}),e_),this.lastRemoteSnapshotVersion=ok.min(),this.highestTargetId=0,this.mi=0,this.gi=new ZE,this.targetCount=0,this.yi=Zx.He()}return vt(e,[{key:"forEachTarget",value:function(e,t){return this.wi.forEach((function(e,n){return t(n)})),Gb.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Gb.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Gb.resolve(this.mi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.yi.next(),Gb.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.mi&&(this.mi=t),Gb.resolve()}},{key:"Ze",value:function(e){this.wi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.yi=new Zx(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ze(t),this.targetCount+=1,Gb.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ze(t),Gb.resolve()}},{key:"removeTargetData",value:function(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,Gb.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.wi.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.wi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Gb.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Gb.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.wi.get(t)||null;return Gb.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.gi.ti(t,n),Gb.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.gi.ni(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Gb.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.gi.si(t),Gb.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.gi.ri(t);return Gb.resolve(n)}},{key:"containsKey",value:function(e,t){return Gb.resolve(this.gi.containsKey(t))}}]),e}(),aT=function(){function e(t,n){var r=this;dt(this,e),this.pi={},this.overlays={},this.Nn=new Zg(0),this.xn=!1,this.xn=!0,this.referenceDelegate=t(this),this.Un=new iT(this),this.indexManager=new Fx,this.qn=new nT((function(e){return r.referenceDelegate.Ii(e)})),this.O=new cx(n),this.Kn=new JE(this.O)}return vt(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xn=!1,Promise.resolve()}},{key:"started",get:function(){return this.xn}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new XE,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.pi[e.toKey()];return n||(n=new tT(t,this.referenceDelegate),this.pi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;Lg("MemoryPersistence","Starting transaction:",e);var i=new oT(this.Nn.next());return this.referenceDelegate.Ei(),n(i).next((function(e){return r.referenceDelegate.Ti(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ai",value:function(e,t){return Gb.or(Object.values(this.pi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),oT=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return vt(n)}(Kb),sT=function(){function e(t){dt(this,e),this.persistence=t,this.Ri=new ZE,this.Pi=null}return vt(e,[{key:"vi",get:function(){if(this.Pi)return this.Pi;throw jg()}},{key:"addReference",value:function(e,t,n){return this.Ri.addReference(n,t),this.vi.delete(n.toString()),Gb.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ri.removeReference(n,t),this.vi.add(n.toString()),Gb.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.vi.add(t.toString()),Gb.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ri.si(t.targetId).forEach((function(e){return n.vi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ei",value:function(){this.Pi=new Set}},{key:"Ti",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Gb.forEach(this.vi,(function(r){var i=Sk.fromPath(r);return t.Vi(e,i).next((function(e){e||n.removeEntry(i,ok.min())}))})).next((function(){return t.Pi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Vi(e,t).next((function(e){e?n.vi.delete(t.toString()):n.vi.add(t.toString())}))}},{key:"Ii",value:function(e){return 0}},{key:"Vi",value:function(e,t){var n=this;return Gb.or([function(){return Gb.resolve(n.Ri.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ai(e,t)}])}}],[{key:"bi",value:function(t){return new e(t)}}]),e}();function uT(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function cT(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function lT(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var hT=function(){function e(t,n,r,i){dt(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return vt(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new zg(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Mg("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),fT=function(){function e(t,n,r){dt(this,e),this.targetId=t,this.state=n,this.error=r}return vt(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new zg(i.error.code,i.error.message))),a?new e(t,i.state,r):(Mg("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),dT=function(){function e(t,n){dt(this,e),this.clientId=t,this.activeTargetIds=n}return vt(e,null,[{key:"Si",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Pw(),o=0;i&&o<r.activeTargetIds.length;++o)i=Ck(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Mg("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),pT=function(){function e(t,n){dt(this,e),this.clientId=t,this.onlineState=n}return vt(e,null,[{key:"Si",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Mg("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),vT=function(){function e(){dt(this,e),this.activeTargetIds=Pw()}return vt(e,[{key:"Ci",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ni",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Di",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),yT=function(){function e(t,n,r,i,a){dt(this,e),this.window=t,this.Sn=n,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new yw(nk),this.started=!1,this.$i=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=uT(this.persistenceKey,this.xi),this.Bi=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Mi=this.Mi.insert(this.xi,new vT),this.Li=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ui=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.qi=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ki=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Gi=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}return vt(e,[{key:"start",value:function(){var e=si(ci().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ds();case 2:t=e.sent,n=da(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.xi){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(uT(this.persistenceKey,i)))&&(o=dT.Si(i,a))&&(this.Mi=this.Mi.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.ji(),(s=this.storage.getItem(this.Ki))&&(u=this.Qi(s))&&this.Wi(u),c=da(this.$i);try{for(c.s();!(l=c.n()).done;)h=l.value,this.Oi(h)}catch(d){c.e(d)}finally{c.f()}this.$i=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Bi,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.zi(this.Mi)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Mi.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Hi(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Hi(e,t,n),this.Ji(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(lT(this.persistenceKey,e));if(n){var r=fT.Si(e,n);r&&(t=r.state)}}return this.Yi.Ci(e),this.ji(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Yi.Ni(e),this.ji()}},{key:"isLocalQueryTarget",value:function(e){return this.Yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(lT(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Xi(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ji(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Zi(e)}},{key:"notifyBundleLoaded",value:function(){this.tr()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Lg("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Lg("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Lg("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Oi",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Lg("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Fi)return void Mg("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable(si(ci().mark((function e(){var r,i,a,o,s,u;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Li.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.er(n.key),e.abrupt("return",t.nr(r,null));case 6:if(!(i=t.sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.nr(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.Ui.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.ir(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.rr(a));case 16:e.next=39;break;case 18:if(!t.qi.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.ur(o));case 23:e.next=39;break;case 25:if(n.key!==t.Ki){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Qi(n.newValue))){e.next=30;break}return e.abrupt("return",t.Wi(s));case 30:e.next=39;break;case 32:if(n.key!==t.Bi){e.next=37;break}u=function(e){var t=Zg.A;if(null!=e)try{var n=JSON.parse(e);qg("number"==typeof n),t=n}catch(e){Mg("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Zg.A&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.Gi){e.next=39;break}return e.abrupt("return",t.syncEngine.ar());case 39:e.next=42;break;case 41:t.$i.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"Yi",get:function(){return this.Mi.get(this.xi)}},{key:"ji",value:function(){this.setItem(this.Fi,this.Yi.Di())}},{key:"Hi",value:function(e,t,n){var r=new hT(this.currentUser,e,t,n),i=cT(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Di())}},{key:"Ji",value:function(e){var t=cT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Zi",value:function(e){var t={clientId:this.xi,onlineState:e};this.storage.setItem(this.Ki,JSON.stringify(t))}},{key:"Xi",value:function(e,t,n){var r=lT(this.persistenceKey,e),i=new fT(e,t,n);this.setItem(r,i.Di())}},{key:"tr",value:function(){this.setItem(this.Gi,"value-not-used")}},{key:"er",value:function(e){var t=this.Li.exec(e);return t?t[1]:null}},{key:"sr",value:function(e,t){var n=this.er(e);return dT.Si(n,t)}},{key:"ir",value:function(e,t){var n=this.Ui.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return hT.Si(new Rg(i),r,t)}},{key:"cr",value:function(e,t){var n=this.qi.exec(e),r=Number(n[1]);return fT.Si(r,t)}},{key:"Qi",value:function(e){return pT.Si(e)}},{key:"rr",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.hr(t.batchId,t.state,t.error));case 2:Lg("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ur",value:function(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}},{key:"nr",value:function(e,t){var n=this,r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.dr(o,s).then((function(){n.Mi=r}))}},{key:"Wi",value:function(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"zi",value:function(e){var t=Pw();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"Vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),mT=function(){function e(){dt(this,e),this._r=new vT,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return vt(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this._r.Ci(e),this.wr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.wr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this._r.Ni(e)}},{key:"isLocalQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.wr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this._r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"start",value:function(){return this._r=new vT,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),gT=function(){function e(){dt(this,e)}return vt(e,[{key:"mr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),kT=function(){function e(){var t=this;dt(this,e),this.gr=function(){return t.yr()},this.pr=function(){return t.Ir()},this.Er=[],this.Tr()}return vt(e,[{key:"mr",value:function(e){this.Er.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}},{key:"Tr",value:function(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}},{key:"yr",value:function(){Lg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=da(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ir",value:function(){Lg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=da(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"Vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),_T={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},wT=function(){function e(t){dt(this,e),this.Ar=t.Ar,this.Rr=t.Rr}return vt(e,[{key:"Pr",value:function(e){this.br=e}},{key:"vr",value:function(e){this.Vr=e}},{key:"onMessage",value:function(e){this.Sr=e}},{key:"close",value:function(){this.Rr()}},{key:"send",value:function(e){this.Ar(e)}},{key:"Dr",value:function(){this.br()}},{key:"Cr",value:function(e){this.Vr(e)}},{key:"Nr",value:function(e){this.Sr(e)}}]),e}(),bT=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return vt(n,[{key:"Br",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Ng;o.listenOnce(Eg.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case xg.NO_ERROR:var t=o.getResponseJson();Lg("Connection","XHR received:",JSON.stringify(t)),i(t);break;case xg.TIMEOUT:Lg("Connection",'RPC "'+e+'" timed out'),a(new zg(Bg.DEADLINE_EXCEEDED,"Request time out"));break;case xg.HTTP_ERROR:var n=o.getStatus();if(Lg("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Bg).indexOf(t)>=0?t:Bg.UNKNOWN}(r.status);a(new zg(s,r.message))}else a(new zg(Bg.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new zg(Bg.UNAVAILABLE,"Connection failed."));break;default:jg()}}finally{Lg("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"Ur",value:function(e,t,n){var r=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=wg(),a=bg(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Cg({})),this.Fr(o.initMessageHeaders,t,n),Ra()||Da()||Pa().indexOf("Electron/")>=0||La()||Pa().indexOf("MSAppHost/")>=0||Oa()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Lg("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new wT({Ar:function(e){l?Lg("Connection","Not sending because WebChannel is closed:",e):(c||(Lg("Connection","Opening WebChannel transport."),u.open(),c=!0),Lg("Connection","WebChannel sending:",e),u.send(e))},Rr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,Sg.EventType.OPEN,(function(){l||Lg("Connection","WebChannel transport opened.")})),f(u,Sg.EventType.CLOSE,(function(){l||(l=!0,Lg("Connection","WebChannel transport closed"),h.Cr())})),f(u,Sg.EventType.ERROR,(function(e){l||(l=!0,Fg("Connection","WebChannel transport errored:",e),h.Cr(new zg(Bg.UNAVAILABLE,"The operation could not be completed")))})),f(u,Sg.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];qg(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Lg("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=cw[e];if(void 0!==t)return vw(t)}(a),s=i.message;void 0===o&&(o=Bg.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,h.Cr(new zg(o,s)),u.close()}else Lg("Connection","WebChannel received:",n),h.Nr(n)}})),f(a,Tg.STAT_EVENT,(function(e){e.stat===Ig.PROXY?Lg("Connection","Detected buffering proxy"):e.stat===Ig.NOPROXY&&Lg("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Dr()}),0),h}}]),n}(function(){function e(t){dt(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.kr=n+"://"+t.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return vt(e,[{key:"Mr",value:function(e,t,n,r,i){var a=this.$r(e,t);Lg("RestConnection","Sending: ",a,n);var o={};return this.Fr(o,r,i),this.Br(e,a,o,n).then((function(e){return Lg("RestConnection","Received: ",e),e}),(function(t){throw Fg("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"Lr",value:function(e,t,n,r,i){return this.Mr(e,t,n,r,i)}},{key:"Fr",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ag,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"$r",value:function(e,t){var n=_T[e];return"".concat(this.kr,"/v1/").concat(t,":").concat(n)}}]),e}());function xT(){return"undefined"!=typeof window?window:null}function ET(){return"undefined"!=typeof document?document:null}function TT(e){return new Bw(e,!0)}var IT=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;dt(this,e),this.Sn=t,this.timerId=n,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}return vt(e,[{key:"reset",value:function(){this.jr=0}},{key:"zr",value:function(){this.jr=this.Gr}},{key:"Hr",value:function(e){var t=this;this.cancel();var n=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,n-r);i>0&&Lg("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.jr," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,(function(){return t.Wr=Date.now(),e()})),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}},{key:"Yr",value:function(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}},{key:"cancel",value:function(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}},{key:"Jr",value:function(){return(Math.random()-.5)*this.jr}}]),e}(),CT=function(){function e(t,n,r,i,a,o,s,u){dt(this,e),this.Sn=t,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new IT(t,n)}return vt(e,[{key:"oo",value:function(){return 1===this.state||5===this.state||this.co()}},{key:"co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.uo()}},{key:"stop",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.oo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ao",value:function(){this.state=0,this.ro.reset()}},{key:"ho",value:function(){var e=this;this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,(function(){return e.lo()})))}},{key:"fo",value:function(e){this._o(),this.stream.send(e)}},{key:"lo",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_o",value:function(){this.so&&(this.so.cancel(),this.so=null)}},{key:"wo",value:function(){this.io&&(this.io.cancel(),this.io=null)}},{key:"close",value:function(){var e=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._o(),this.wo(),this.ro.cancel(),this.no++,4!==t?this.ro.reset():n&&n.code===Bg.RESOURCE_EXHAUSTED?(Mg(n.toString()),Mg("Using maximum backoff delay to prevent overloading the backend."),this.ro.zr()):n&&n.code===Bg.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.mo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.vr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"mo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.yo(this.no),n=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=h(t,2),i=r[0],a=r[1];e.no===n&&e.po(i,a)}),(function(n){t((function(){var t=new zg(Bg.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Io(t)}))}))}},{key:"po",value:function(e,t){var n=this,r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr((function(){r((function(){return n.state=2,n.io=n.Sn.enqueueAfterDelay(n.Zr,1e4,(function(){return n.co()&&(n.state=3),Promise.resolve()})),n.listener.Pr()}))})),this.stream.vr((function(e){r((function(){return n.Io(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"uo",value:function(){var e=this;this.state=5,this.ro.Hr(si(ci().mark((function t(){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Io",value:function(e){return Lg("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"yo",value:function(e){var t=this;return function(n){t.Sn.enqueueAndForget((function(){return t.no===e?n():(Lg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),ST=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a,o,s){var u;return dt(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).O=o,u}return vt(n,[{key:"Eo",value:function(e,t){return this.eo.Ur("Listen",e,t)}},{key:"onMessage",value:function(e){this.ro.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:jg()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(qg(void 0===t||"string"==typeof t),vk.fromBase64String(t||"")):(qg(void 0===t||t instanceof Uint8Array),vk.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Bg.UNKNOWN:vw(e.code);return new zg(t,e.message||"")}(o);n=new Lw(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=$w(e,u.document.name),l=Kw(u.document.updateTime),h=new Wk({mapValue:{fields:u.document.fields}}),f=Kk.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Ow(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=$w(e,v.document),m=v.readTime?Kw(v.readTime):ok.min(),g=Kk.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Ow([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var w=$w(e,_.document),b=_.removedTargetIds||[];n=new Ow([],b,w,null)}else{if(!("filter"in t))return jg();t.filter;var x=t.filter;x.targetId;var E=x.count||0,T=new dw(E),I=x.targetId;n=new Dw(I,T)}return n}(this.O,e),n=function(e){if(!("targetChange"in e))return ok.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ok.min():t.readTime?Kw(t.readTime):ok.min()}(e);return this.listener.To(t,n)}},{key:"Ao",value:function(e){var t={};t.database=Zw(this.O),t.addTarget=function(e,t){var n,r=t.target;return(n=t_(r)?{documents:ob(e,r)}:{query:sb(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ww(e,t.resumeToken):t.snapshotVersion.compareTo(ok.min())>0&&(n.readTime=zw(e,t.snapshotVersion.toTimestamp())),n}(this.O,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jg()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.O,e);n&&(t.labels=n),this.fo(t)}},{key:"Ro",value:function(e){var t={};t.database=Zw(this.O),t.removeTarget=e,this.fo(t)}}]),n}(CT),NT=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a,o,s){var u;return dt(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).O=o,u.Po=!1,u}return vt(n,[{key:"bo",get:function(){return this.Po}},{key:"start",value:function(){this.Po=!1,this.lastStreamToken=void 0,nn(en(n.prototype),"start",this).call(this)}},{key:"mo",value:function(){this.Po&&this.vo([])}},{key:"Eo",value:function(e,t){return this.eo.Ur("Write",e,t)}},{key:"onMessage",value:function(e){if(qg(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();var t=function(e,t){return e&&e.length>0?(qg(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Kw(e.updateTime):Kw(t);return n.isEqual(ok.min())&&(n=Kw(t)),new Y_(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Kw(e.commitTime);return this.listener.Vo(n,t)}return qg(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}},{key:"Do",value:function(){var e={};e.database=Zw(this.O),this.fo(e)}},{key:"vo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return ib(t.O,e)}))};this.fo(n)}}]),n}(CT),PT=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a){var o;return dt(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.eo=i,o.O=a,o.Co=!1,o}return vt(n,[{key:"No",value:function(){if(this.Co)throw new zg(Bg.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Mr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=h(i,2),o=a[0],s=a[1];return r.eo.Mr(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Bg.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new zg(Bg.UNKNOWN,e.toString())}))}},{key:"Lr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=h(i,2),o=a[0],s=a[1];return r.eo.Lr(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Bg.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new zg(Bg.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Co=!0}}]),n}(function(){return vt((function e(){dt(this,e)}))}()),RT=function(){function e(t,n){dt(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}return vt(e,[{key:"Mo",value:function(){var e=this;0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ko=null,e.Fo("Backend didn't respond within 10 seconds."),e.$o("Offline"),Promise.resolve()})))}},{key:"Bo",value:function(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.$o("Offline")))}},{key:"set",value:function(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}},{key:"$o",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Fo",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Oo?(Mg(t),this.Oo=!1):Lg("OnlineStateTracker",t)}},{key:"Lo",value:function(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}]),e}(),AT=vt((function e(t,n,r,i,a){var o=this;dt(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr((function(e){r.enqueueAndForget(si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=zT(o),!e.t0){e.next=5;break}return Lg("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Vg(t)).Ko.add(4),e.next=4,LT(n);case 4:return n.Qo.set("Unknown"),n.Ko.delete(4),e.next=8,OT(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Qo=new RT(r,i)}));function OT(e){return DT.apply(this,arguments)}function DT(){return DT=si(ci().mark((function e(t){var n,r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zT(t)){e.next=18;break}n=da(t.Go),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),DT.apply(this,arguments)}function LT(e){return MT.apply(this,arguments)}function MT(){return MT=si(ci().mark((function e(t){var n,r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=da(t.Go),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),MT.apply(this,arguments)}function FT(e,t){var n=Vg(e);n.qo.has(t.targetId)||(n.qo.set(t.targetId,t),BT(n)?VT(n):gI(n).co()&&jT(n,t))}function UT(e,t){var n=Vg(e),r=gI(n);n.qo.delete(t),r.co()&&qT(n,t),0===n.qo.size&&(r.co()?r.ho():zT(n)&&n.Qo.set("Unknown"))}function jT(e,t){e.Wo.Z(t.targetId),gI(e).Ao(t)}function qT(e,t){e.Wo.Z(t),gI(e).Ro(t)}function VT(e){e.Wo=new Fw({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Tt:function(t){return e.qo.get(t)||null}}),gI(e).start(),e.Qo.Mo()}function BT(e){return zT(e)&&!gI(e).oo()&&e.qo.size>0}function zT(e){return 0===Vg(e).Ko.size}function WT(e){e.Wo=void 0}function HT(e){return KT.apply(this,arguments)}function KT(){return KT=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.qo.forEach((function(e,n){jT(t,e)}));case 1:case"end":return e.stop()}}),e)}))),KT.apply(this,arguments)}function GT(e,t){return QT.apply(this,arguments)}function QT(){return QT=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:WT(t),BT(t)?(t.Qo.Bo(n),VT(t)):t.Qo.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),QT.apply(this,arguments)}function YT(e,t,n){return $T.apply(this,arguments)}function $T(){return $T=si(ci().mark((function e(t,n,r){var i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Qo.set("Online"),!(n instanceof Lw&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=si(ci().mark((function e(t,n){var r,i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=da(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.qo.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.qo.delete(o),t.Wo.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Lg("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,JT(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Ow?t.Wo.ct(n):n instanceof Dw?t.Wo._t(n):t.Wo.ht(n),r.isEqual(ok.min())){e.next=29;break}return e.prev=14,e.next=17,LE(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Wo.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.qo.get(r);i&&e.qo.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.qo.get(t);if(n){e.qo.set(t,n.withResumeToken(vk.EMPTY_BYTE_STRING,n.snapshotVersion)),qT(e,t);var r=new ux(n.target,t,1,n.sequenceNumber);jT(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Lg("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,JT(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),$T.apply(this,arguments)}function JT(e,t,n){return XT.apply(this,arguments)}function XT(){return XT=si(ci().mark((function e(t,n,r){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xb(n)){e.next=2;break}throw n;case 2:return t.Ko.add(1),e.next=5,LT(t);case 5:t.Qo.set("Offline"),r||(r=function(){return LE(t.localStore)}),t.asyncQueue.enqueueRetryable(si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lg("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Ko.delete(1),e.next=6,OT(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),XT.apply(this,arguments)}function ZT(e,t){return t().catch((function(n){return JT(e,n,t)}))}function eI(e){return tI.apply(this,arguments)}function tI(){return tI=si(ci().mark((function e(t){var n,r,i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Vg(t),r=kI(n),i=n.Uo.length>0?n.Uo[n.Uo.length-1].batchId:-1;case 2:if(!nI(n)){e.next=19;break}return e.prev=3,e.next=6,UE(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Uo.length&&r.ho(),e.abrupt("break",19);case 10:i=a.batchId,rI(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,JT(n,e.t0);case 17:e.next=2;break;case 19:iI(n)&&aI(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),tI.apply(this,arguments)}function nI(e){return zT(e)&&e.Uo.length<10}function rI(e,t){e.Uo.push(t);var n=kI(e);n.co()&&n.bo&&n.vo(t.mutations)}function iI(e){return zT(e)&&!kI(e).oo()&&e.Uo.length>0}function aI(e){kI(e).start()}function oI(e){return sI.apply(this,arguments)}function sI(){return sI=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kI(t).Do();case 1:case"end":return e.stop()}}),e)}))),sI.apply(this,arguments)}function uI(e){return cI.apply(this,arguments)}function cI(){return cI=si(ci().mark((function e(t){var n,r,i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=kI(t),r=da(t.Uo);try{for(r.s();!(i=r.n()).done;)a=i.value,n.vo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),cI.apply(this,arguments)}function lI(e,t,n){return hI.apply(this,arguments)}function hI(){return hI=si(ci().mark((function e(t,n,r){var i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Uo.shift(),a=ox.from(i,n,r),e.next=3,ZT(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,eI(t);case 5:case"end":return e.stop()}}),e)}))),hI.apply(this,arguments)}function fI(e,t){return dI.apply(this,arguments)}function dI(){return dI=si(ci().mark((function e(t,n){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&kI(t).bo,!e.t0){e.next=4;break}return e.next=4,function(){var e=si(ci().mark((function e(t,n){var r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!pw(i=n.code)||i===Bg.ABORTED){e.next=7;break}return r=t.Uo.shift(),kI(t).ao(),e.next=5,ZT(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,eI(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:iI(t)&&aI(t);case 5:case"end":return e.stop()}}),e)}))),dI.apply(this,arguments)}function pI(e,t){return vI.apply(this,arguments)}function vI(){return vI=si(ci().mark((function e(t,n){var r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Vg(t)).asyncQueue.verifyOperationInProgress(),Lg("RemoteStore","RemoteStore received new credentials"),i=zT(r),r.Ko.add(3),e.next=6,LT(r);case 6:return i&&r.Qo.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Ko.delete(3),e.next=12,OT(r);case 12:case"end":return e.stop()}}),e)}))),vI.apply(this,arguments)}function yI(e,t){return mI.apply(this,arguments)}function mI(){return mI=si(ci().mark((function e(t,n){var r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vg(t),!n){e.next=7;break}return r.Ko.delete(2),e.next=5,OT(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Ko.add(2),e.next=12,LT(r);case 12:r.Qo.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),mI.apply(this,arguments)}function gI(e){return e.zo||(e.zo=function(e,t,n){var r=Vg(e);return r.No(),new ST(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:HT.bind(null,e),vr:GT.bind(null,e),To:YT.bind(null,e)}),e.Go.push(function(){var t=si(ci().mark((function t(n){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.zo.ao(),BT(e)?VT(e):e.Qo.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.zo.stop();case 6:WT(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.zo}function kI(e){return e.Ho||(e.Ho=function(e,t,n){var r=Vg(e);return r.No(),new NT(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:oI.bind(null,e),vr:fI.bind(null,e),So:uI.bind(null,e),Vo:lI.bind(null,e)}),e.Go.push(function(){var t=si(ci().mark((function t(n){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Ho.ao(),t.next=4,eI(e);case 4:t.next=9;break;case 6:return t.next=8,e.Ho.stop();case 8:e.Uo.length>0&&(Lg("RemoteStore","Stopping write stream with ".concat(e.Uo.length," pending writes")),e.Uo=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Ho}var _I=function(){function e(t,n,r,i,a){dt(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Wg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return vt(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zg(Bg.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function wI(e,t){if(Mg("AsyncQueue","".concat(t,": ").concat(e)),Xb(e))return new zg(Bg.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var bI=function(){function e(t){dt(this,e),this.comparator=t?function(e,n){return t(e,n)||Sk.comparator(e.key,n.key)}:function(e,t){return Sk.comparator(e.key,t.key)},this.keyedMap=Tw(),this.sortedSet=new yw(this.comparator)}return vt(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),xI=function(){function e(){dt(this,e),this.Jo=new yw(Sk.comparator)}return vt(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Jo.get(t);n?0!==e.type&&3===n.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==n.type?this.Jo=this.Jo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jo=this.Jo.remove(t):1===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):jg():this.Jo=this.Jo.insert(t,e)}},{key:"Yo",value:function(){var e=[];return this.Jo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),EI=function(){function e(t,n,r,i,a,o,s,u){dt(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return vt(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&C_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,bI.emptySet(n),a,r,i,!0,!1)}}]),e}(),TI=vt((function e(){dt(this,e),this.Xo=void 0,this.listeners=[]})),II=vt((function e(){dt(this,e),this.queries=new fE((function(e){return S_(e)}),C_),this.onlineState="Unknown",this.Zo=new Set}));function CI(e,t){return SI.apply(this,arguments)}function SI(){return SI=si(ci().mark((function e(t,n){var r,i,a,o,s;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vg(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new TI),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Xo=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=wI(e.t0,"Initialization of query '".concat(N_(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.tc(r.onlineState),o.Xo&&n.ec(o.Xo)&&OI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),SI.apply(this,arguments)}function NI(e,t){return PI.apply(this,arguments)}function PI(){return PI=si(ci().mark((function e(t,n){var r,i,a,o,s;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vg(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),PI.apply(this,arguments)}function RI(e,t){var n,r=Vg(e),i=!1,a=da(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=da(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.ec(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Xo=o}}}catch(h){a.e(h)}finally{a.f()}i&&OI(r)}function AI(e,t,n){var r=Vg(e),i=r.queries.get(t);if(i){var a,o=da(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function OI(e){e.Zo.forEach((function(e){e.next()}))}var DI=function(){function e(t,n,r){dt(this,e),this.query=t,this.nc=n,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}return vt(e,[{key:"ec",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=da(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new EI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.sc?this.rc(e)&&(this.nc.next(e),a=!0):this.oc(e,this.onlineState)&&(this.cc(e),a=!0),this.ic=e,a}},{key:"onError",value:function(e){this.nc.error(e)}},{key:"tc",value:function(e){this.onlineState=e;var t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}},{key:"oc",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.uc||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"rc",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"cc",value:function(e){e=EI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}]),e}(),LI=function(){function e(t,n){dt(this,e),this.payload=t,this.byteLength=n}return vt(e,[{key:"ac",value:function(){return"metadata"in this.payload}}]),e}(),MI=function(){function e(t){dt(this,e),this.O=t}return vt(e,[{key:"Gs",value:function(e){return $w(this.O,e)}},{key:"js",value:function(e){return e.metadata.exists?nb(this.O,e.document,!1):Kk.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}},{key:"Qs",value:function(e){return Kw(e)}}]),e}(),FI=function(){function e(t,n,r){dt(this,e),this.hc=t,this.localStore=n,this.O=r,this.queries=[],this.documents=[],this.progress=UI(t)}return vt(e,[{key:"lc",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"fc",value:function(e){var t,n=new Map,r=new MI(this.O),i=da(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Gs(a.metadata.name),u=da(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Sw()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=si(ci().mark((function e(){var t,n,r,i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GE(this.localStore,new MI(this.O),this.documents,this.hc.id);case 2:t=e.sent,n=this.fc(this.documents),r=da(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,YE(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new IE(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function UI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var jI=vt((function e(t){dt(this,e),this.key=t})),qI=vt((function e(t){dt(this,e),this.key=t})),VI=function(){function e(t,n){dt(this,e),this.query=t,this.dc=n,this._c=null,this.current=!1,this.wc=Sw(),this.mutatedKeys=Sw(),this.mc=R_(t),this.gc=new bI(this.mc)}return vt(e,[{key:"yc",get:function(){return this.dc}},{key:"Ic",value:function(e,t){var n=this,r=t?t.Ec:new xI,i=t?t.gc:this.gc,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=k_(this.query)&&i.size===this.query.limit?i.last():null,c=__(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=P_(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Tc(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.mc(h,u)>0||c&&n.mc(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),k_(this.query)||__(this.query))for(;o.size>this.query.limit;){var l=k_(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{gc:o,Ec:r,ks:s,mutatedKeys:a}}},{key:"Tc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;var a=e.Ec.Yo();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jg()}};return n(e)-n(t)}(e.type,t.type)||r.mc(e.doc,t.doc)})),this.Ac(n);var o=t?this.Rc():[],s=0===this.wc.size&&this.current?1:0,u=s!==this._c;return this._c=s,0!==a.length||u?{snapshot:new EI(this.query,e.gc,i,a,e.mutatedKeys,0===s,u,!1),Pc:o}:{Pc:o}}},{key:"tc",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new xI,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}},{key:"bc",value:function(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}},{key:"Ac",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.dc=t.dc.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.dc=t.dc.delete(e)})),this.current=e.current)}},{key:"Rc",value:function(){var e=this;if(!this.current)return[];var t=this.wc;this.wc=Sw(),this.gc.forEach((function(t){e.bc(t.key)&&(e.wc=e.wc.add(t.key))}));var n=[];return t.forEach((function(t){e.wc.has(t)||n.push(new qI(t))})),this.wc.forEach((function(e){t.has(e)||n.push(new jI(e))})),n}},{key:"vc",value:function(e){this.dc=e.Ks,this.wc=Sw();var t=this.Ic(e.documents);return this.applyChanges(t,!0)}},{key:"Vc",value:function(){return EI.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}]),e}(),BI=vt((function e(t,n,r){dt(this,e),this.query=t,this.targetId=n,this.view=r})),zI=vt((function e(t){dt(this,e),this.key=t,this.Sc=!1})),WI=function(){function e(t,n,r,i,a,o){dt(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Dc={},this.Cc=new fE((function(e){return S_(e)}),C_),this.Nc=new Map,this.xc=new Set,this.kc=new yw(Sk.comparator),this.Oc=new Map,this.Mc=new ZE,this.$c={},this.Fc=new Map,this.Bc=Zx.Je(),this.onlineState="Unknown",this.Lc=void 0}return vt(e,[{key:"isPrimaryClient",get:function(){return!0===this.Lc}}]),e}();function HI(e,t){return KI.apply(this,arguments)}function KI(){return KI=si(ci().mark((function e(t,n){var r,i,a,o,s,u;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=UC(t),!(o=r.Cc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Vc(),e.next=15;break;case 6:return e.next=8,jE(r.localStore,T_(n));case 8:return s=e.sent,r.isPrimaryClient&&FT(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,GI(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),KI.apply(this,arguments)}function GI(e,t,n,r){return QI.apply(this,arguments)}function QI(){return QI=si(ci().mark((function e(t,n,r,i){var a,o,s,u,c,l;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Uc=function(e,n,r){return function(){var e=si(ci().mark((function e(t,n,r,i){var a,o,s;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ic(r),e.t0=a.ks,!e.t0){e.next=6;break}return e.next=5,BE(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ic(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(pC(t,n.targetId,s.Pc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,BE(t.localStore,n,!0);case 3:return a=e.sent,o=new VI(n,a.Ks),s=o.Ic(a.documents),u=Aw.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),pC(t,r,c.Pc),l=new BI(n,r,o),e.abrupt("return",(t.Cc.set(n,l),t.Nc.has(r)?t.Nc.get(r).push(n):t.Nc.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),QI.apply(this,arguments)}function YI(e,t){return $I.apply(this,arguments)}function $I(){return $I=si(ci().mark((function e(t,n){var r,i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vg(t),i=r.Cc.get(n),!((a=r.Nc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Nc.set(i.targetId,a.filter((function(e){return!C_(e,n)}))),void r.Cc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,qE(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),UT(r.remoteStore,i.targetId),fC(r,i.targetId)})).catch(iE);case 9:e.next=14;break;case 11:return fC(r,i.targetId),e.next=14,qE(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),$I.apply(this,arguments)}function JI(e,t,n){return XI.apply(this,arguments)}function XI(){return XI=si(ci().mark((function e(t,n,r){var i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jC(t),e.prev=1,e.next=4,function(e,t){var n,r=Vg(e),i=ak.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Sw());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Us.Es(e,a).next((function(a){n=a;var o,s=[],u=da(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=tw(c,n.get(c.key));null!=l&&s.push(new aw(c.key,l,Hk(l.value.mapValue),$_.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return r.gs.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.$c[e.currentUser.toKey()];r||(r=new yw(nk)),r=r.insert(t,n),e.$c[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,mC(i,a.changes);case 9:return e.next=11,eI(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=wI(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),XI.apply(this,arguments)}function ZI(e,t){return eC.apply(this,arguments)}function eC(){return eC=si(ci().mark((function e(t,n){var r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vg(t),e.prev=1,e.next=4,ME(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Oc.get(t);n&&(qg(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Sc=!0:e.modifiedDocuments.size>0?qg(n.Sc):e.removedDocuments.size>0&&(qg(n.Sc),n.Sc=!1))})),e.next=8,mC(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,iE(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),eC.apply(this,arguments)}function tC(e,t,n){var r=Vg(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Cc.forEach((function(e,n){var r=n.view.tc(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Vg(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=da(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.tc(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&OI(n)}(r.eventManager,t),i.length&&r.Dc.To(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function nC(e,t,n){return rC.apply(this,arguments)}function rC(){return rC=si(ci().mark((function e(t,n,r){var i,a,o,s,u,c;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Vg(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Oc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new yw(Sk.comparator)).insert(o,Kk.newNoDocument(o,ok.min())),u=Sw().add(o),c=new Rw(ok.min(),new Map,new kw(nk),s,u),e.next=9,ZI(i,c);case 9:i.kc=i.kc.remove(o),i.Oc.delete(n),yC(i),e.next=16;break;case 14:return e.next=16,qE(i.localStore,n,!1).then((function(){return fC(i,n,r)})).catch(iE);case 16:case"end":return e.stop()}}),e)}))),rC.apply(this,arguments)}function iC(e,t){return aC.apply(this,arguments)}function aC(){return aC=si(ci().mark((function e(t,n){var r,i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vg(t),i=n.batch.batchId,e.prev=1,e.next=4,DE(r.localStore,n);case 4:return a=e.sent,hC(r,i,null),lC(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,mC(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,iE(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),aC.apply(this,arguments)}function oC(e,t,n){return sC.apply(this,arguments)}function sC(){return sC=si(ci().mark((function e(t,n,r){var i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vg(t),e.prev=1,e.next=4,function(e,t){var n=Vg(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.gs.lookupMutationBatch(e,t).next((function(t){return qg(null!==t),r=t.keys(),n.gs.removeMutationBatch(e,t)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,hC(i,n,r),lC(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,mC(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,iE(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),sC.apply(this,arguments)}function uC(e,t){return cC.apply(this,arguments)}function cC(){return cC=si(ci().mark((function e(t,n){var r,i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zT((r=Vg(t)).remoteStore)||Lg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Vg(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.gs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Fc.get(i)||[]).push(n),r.Fc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=wI(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),cC.apply(this,arguments)}function lC(e,t){(e.Fc.get(t)||[]).forEach((function(e){e.resolve()})),e.Fc.delete(t)}function hC(e,t,n){var r=Vg(e),i=r.$c[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.$c[r.currentUser.toKey()]=i}}function fC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=da(e.Nc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Cc.delete(a),n&&e.Dc.qc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Nc.delete(t),e.isPrimaryClient&&e.Mc.si(t).forEach((function(t){e.Mc.containsKey(t)||dC(e,t)}))}function dC(e,t){e.xc.delete(t.path.canonicalString());var n=e.kc.get(t);null!==n&&(UT(e.remoteStore,n),e.kc=e.kc.remove(t),e.Oc.delete(n),yC(e))}function pC(e,t,n){var r,i=da(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof jI?(e.Mc.addReference(a.key,t),vC(e,a)):a instanceof qI?(Lg("SyncEngine","Document no longer in limbo: "+a.key),e.Mc.removeReference(a.key,t),e.Mc.containsKey(a.key)||dC(e,a.key)):jg()}}catch(o){i.e(o)}finally{i.f()}}function vC(e,t){var n=t.key,r=n.path.canonicalString();e.kc.get(n)||e.xc.has(r)||(Lg("SyncEngine","New document in limbo: "+n),e.xc.add(r),yC(e))}function yC(e){for(;e.xc.size>0&&e.kc.size<e.maxConcurrentLimboResolutions;){var t=e.xc.values().next().value;e.xc.delete(t);var n=new Sk(hk.fromString(t)),r=e.Bc.next();e.Oc.set(r,new zI(n)),e.kc=e.kc.insert(n,r),FT(e.remoteStore,new ux(T_(g_(n.path)),r,2,Zg.A))}}function mC(e,t,n){return gC.apply(this,arguments)}function gC(){return gC=si(ci().mark((function e(t,n,r){var i,a,o,s;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Vg(t),a=[],o=[],s=[],e.t0=i.Cc.isEmpty(),e.t0){e.next=9;break}return i.Cc.forEach((function(e,t){s.push(i.Uc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=SE.Ss(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Dc.To(a),e.next=9,function(){var e=si(ci().mark((function e(t,n){var r,i,a,o,s,u,c,l;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vg(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Gb.forEach(n,(function(t){return Gb.forEach(t.vs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Gb.forEach(t.Vs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Xb(e.t0)){e.next=10;break}throw e.t0;case 10:Lg("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=da(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ms.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ms=r.Ms.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),gC.apply(this,arguments)}function kC(e,t){return _C.apply(this,arguments)}function _C(){return _C=si(ci().mark((function e(t,n){var r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Vg(t)).currentUser.isEqual(n)){e.next=11;break}return Lg("SyncEngine","User change. New user:",n.toKey()),e.next=5,AE(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Fc.forEach((function(e){e.forEach((function(e){e.reject(new zg(Bg.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,mC(r,i.qs);case 11:case"end":return e.stop()}}),e)}))),_C.apply(this,arguments)}function wC(e,t){var n=Vg(e),r=n.Oc.get(t);if(r&&r.Sc)return Sw().add(r.key);var i=Sw(),a=n.Nc.get(t);if(!a)return i;var o,s=da(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.Cc.get(u);i=i.unionWith(c.view.yc)}}catch(l){s.e(l)}finally{s.f()}return i}function bC(e,t){return xC.apply(this,arguments)}function xC(){return xC=si(ci().mark((function e(t,n){var r,i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vg(t),e.next=3,BE(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.vc(i),e.abrupt("return",(r.isPrimaryClient&&pC(r,n.targetId,a.Pc),a));case 6:case"end":return e.stop()}}),e)}))),xC.apply(this,arguments)}function EC(e){return TC.apply(this,arguments)}function TC(){return TC=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vg(t),e.abrupt("return",WE(n.localStore).then((function(e){return mC(n,e)})));case 2:case"end":return e.stop()}}),e)}))),TC.apply(this,arguments)}function IC(e,t,n,r){return CC.apply(this,arguments)}function CC(){return CC=si(ci().mark((function e(t,n,r,i){var a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vg(t),e.next=3,function(e,t){var n=Vg(e),r=Vg(n.gs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Ge(e,t).next((function(t){return t?n.Us.Es(e,t):Gb.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,eI(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(hC(a,n,i||null),lC(a,n),function(e,t){Vg(Vg(e).gs).Qe(t)}(a.localStore,n)):jg();case 11:return e.next=13,mC(a,o);case 13:e.next=16;break;case 15:Lg("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),CC.apply(this,arguments)}function SC(e,t){return NC.apply(this,arguments)}function NC(){return NC=si(ci().mark((function e(t,n){var r,i,a,o,s,u,c,l;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(UC(r=Vg(t)),jC(r),!0!==n||!0===r.Lc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,PC(r,i.toArray());case 5:return a=e.sent,r.Lc=!0,e.next=9,yI(r.remoteStore,!0);case 9:o=da(a);try{for(o.s();!(s=o.n()).done;)u=s.value,FT(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Lc){e.next=25;break}return c=[],l=Promise.resolve(),r.Nc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return fC(r,t),qE(r.localStore,t,!0)})),UT(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,PC(r,c);case 21:return function(e){var t=Vg(e);t.Oc.forEach((function(e,n){UT(t.remoteStore,n)})),t.Mc.ii(),t.Oc=new Map,t.kc=new yw(Sk.comparator)}(r),r.Lc=!1,e.next=25,yI(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),NC.apply(this,arguments)}function PC(e,t,n){return RC.apply(this,arguments)}function RC(){return RC=si(ci().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,p,v,y,m;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Vg(t),a=[],o=[],s=da(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.Nc.get(c))||0===h.length){e.next=34;break}return e.next=11,jE(i.localStore,T_(h[0]));case 11:l=e.sent,f=da(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.Cc.get(p),e.next=20,bC(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,zE(i.localStore,c);case 36:return m=e.sent,e.next=39,jE(i.localStore,m);case 39:return l=e.sent,e.next=42,GI(i,AC(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Dc.To(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),RC.apply(this,arguments)}function AC(e){return m_(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function OC(e){var t=Vg(e);return Vg(Vg(t.localStore).persistence).ds()}function DC(e,t,n,r){return LC.apply(this,arguments)}function LC(){return LC=si(ci().mark((function e(t,n,r,i){var a,o,s;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Vg(t)).Lc){e.next=5;break}Lg("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Nc.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,WE(a.localStore);case 11:return o=e.sent,s=Rw.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,mC(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,qE(a.localStore,n,!0);case 18:return fC(a,n,i),e.abrupt("break",21);case 20:jg();case 21:case"end":return e.stop()}}),e)}))),LC.apply(this,arguments)}function MC(e,t,n){return FC.apply(this,arguments)}function FC(){return FC=si(ci().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=UC(t)).Lc){e.next=45;break}a=da(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.Nc.has(s)){e.next=10;break}return Lg("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,zE(i.localStore,s);case 12:return u=e.sent,e.next=15,jE(i.localStore,u);case 15:return c=e.sent,e.next=18,GI(i,AC(u),c.targetId,!1);case 18:FT(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=da(r),e.prev=30,f=ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.Nc.has(t),!e.t0){e.next=5;break}return e.next=5,qE(i.localStore,t,!1).then((function(){UT(i.remoteStore,t),fC(i,t)})).catch(iE);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),FC.apply(this,arguments)}function UC(e){var t=Vg(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ZI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=nC.bind(null,t),t.Dc.To=RI.bind(null,t.eventManager),t.Dc.qc=AI.bind(null,t.eventManager),t}function jC(e){var t=Vg(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oC.bind(null,t),t}function qC(e,t,n){var r=Vg(e);(function(){var e=si(ci().mark((function e(t,n,r){var i,a,o,s,u;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Vg(e),r=Kw(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Kn.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(UI(i)),a=new FI(i,t.localStore,n.O),e.next=14,n.Kc();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.lc(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.Kc();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return u=e.sent,e.next=30,mC(t,u.ws,void 0);case 30:return e.next=32,function(e,t){var n=Vg(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Kn.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),Fg("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var VC=function(){function e(){dt(this,e),this.synchronizeTabs=!1}return vt(e,[{key:"initialize",value:function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.O=TT(t.databaseInfo.databaseId),this.sharedClientState=this.Gc(t),this.persistence=this.jc(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Qc(t),this.localStore=this.Wc(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){return null}},{key:"Wc",value:function(e){return RE(this.persistence,new NE,e.initialUser,this.O)}},{key:"jc",value:function(e){return new aT(sT.bi,this.O)}},{key:"Gc",value:function(e){return new mT}},{key:"terminate",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),BC=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a;return dt(this,n),(a=t.call(this)).zc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return vt(n,[{key:"initialize",value:function(){var e=si(ci().mark((function e(t){var r=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(en(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,HE(this.localStore);case 4:return e.next=6,this.zc.initialize(this,t);case 6:return e.next=8,jC(this.zc.syncEngine);case 8:return e.next=10,eI(this.zc.remoteStore);case 10:return e.next=12,this.persistence.Hn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Wc",value:function(e){return RE(this.persistence,new NE,e.initialUser,this.O)}},{key:"Qc",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new uE(t,e.asyncQueue)}},{key:"jc",value:function(e){var t=TE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Hx.withCacheSize(this.cacheSizeBytes):Hx.DEFAULT;return new bE(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,xT(),ET(),this.O,this.sharedClientState,!!this.forceOwnership)}},{key:"Gc",value:function(e){return new mT}}]),n}(VC),zC=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,e,r,!1)).zc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return vt(n,[{key:"initialize",value:function(){var e=si(ci().mark((function e(t){var r,i=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(en(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.zc.syncEngine,e.t0=this.sharedClientState instanceof yT,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={hr:IC.bind(null,r),lr:DC.bind(null,r),dr:MC.bind(null,r),ds:OC.bind(null,r),ar:EC.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Hn(function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SC(i.zc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Gc",value:function(e){var t=xT();if(!yT.Vt(t))throw new zg(Bg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=TE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yT(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(BC),WC=function(){function e(){dt(this,e)}return vt(e,[{key:"initialize",value:function(){var e=si(ci().mark((function e(t,n){var r=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return tC(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=kC.bind(null,this.syncEngine),e.next=12,yI(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new II}},{key:"createDatastore",value:function(e){var t,n=TT(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new bT(t));return function(e,t,n,r){return new PT(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return tC(o.syncEngine,e,0)},a=kT.Vt()?new kT:new gT,new AT(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new WI(e,t,n,r,i,a);return o&&(s.Lc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vg(t),Lg("RemoteStore","RemoteStore shutting down."),n.Ko.add(5),e.next=5,LT(n);case 5:n.jo.shutdown(),n.Qo.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function HC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return si(ci().mark((function r(){var i;return ci().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var KC=function(){function e(t){dt(this,e),this.observer=t,this.muted=!1}return vt(e,[{key:"next",value:function(e){this.observer.next&&this.Hc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Jc",value:function(){this.muted=!0}},{key:"Hc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),GC=function(){function e(t,n){var r=this;dt(this,e),this.Yc=t,this.O=n,this.metadata=new Wg,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then((function(e){e&&e.ac()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return vt(e,[{key:"close",value:function(){return this.Yc.cancel()}},{key:"getMetadata",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Zc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(){var e=si(ci().mark((function e(){var t,n,r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tu();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Xc.decode(t),r=Number(n),isNaN(r)&&this.eu("length string (".concat(n,") is not valid number")),e.next=9,this.nu(r);case 9:return i=e.sent,e.abrupt("return",new LI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"su",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"tu",value:function(){var e=si(ci().mark((function e(){var t,n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.su()<0)){e.next=7;break}return e.next=3,this.iu();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.su())<0&&this.eu("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nu",value:function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.iu();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.eu("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"eu",value:function(e){throw this.Yc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"iu",value:function(){var e=si(ci().mark((function e(){var t,n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Yc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),QC=function(){function e(t){dt(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return vt(e,[{key:"lookup",value:function(){var e=si(ci().mark((function e(t){var n,r=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new zg(Bg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=si(ci().mark((function e(t,n){var r,i,a,o,s,u;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vg(t),i=Zw(r.O)+"/documents",a={documents:n.map((function(e){return Yw(r.O,e)}))},e.next=5,r.Lr("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=rb(r.O,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());qg(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new hw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=si(ci().mark((function e(){var t,n=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Sk.fromPath(t);n.mutations.push(new fw(r,n.precondition(r)))})),e.next=7,function(){var e=si(ci().mark((function e(t,n){var r,i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vg(t),i=Zw(r.O)+"/documents",a={writes:n.map((function(e){return ib(r.O,e)}))},e.next=3,r.Mr("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw jg();t=ok.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new zg(Bg.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?$_.updateTime(t):$_.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ok.min()))throw new zg(Bg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $_.updateTime(t)}return $_.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),YC=function(){function e(t,n,r,i){dt(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new IT(this.asyncQueue,"transaction_retry")}return vt(e,[{key:"run",value:function(){this.ru-=1,this.ou()}},{key:"ou",value:function(){var e=this;this.ro.Hr(si(ci().mark((function t(){var n,r;return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new QC(e.datastore),(r=e.cu(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.uu(t)}))}))})).catch((function(t){e.uu(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"cu",value:function(e){try{var t=this.updateFunction(e);return!Tk(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"uu",value:function(e){var t=this;this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget((function(){return t.ou(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"au",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!pw(t)}return!1}}]),e}(),$C=function(){function e(t,n,r,i){var a=this;dt(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Rg.UNAUTHENTICATED,this.clientId=tk.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lg("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Lg("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return vt(e,[{key:"getConfiguration",value:function(){var e=si(ci().mark((function e(){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new zg(Bg.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Wg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(si(ci().mark((function n(){var r;return ci().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=wI(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function JC(e,t){return XC.apply(this,arguments)}function XC(){return XC=si(ci().mark((function e(t,n){var r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Lg("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,AE(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),XC.apply(this,arguments)}function ZC(e,t){return eS.apply(this,arguments)}function eS(){return eS=si(ci().mark((function e(t,n){var r,i;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,tS(t);case 3:return r=e.sent,Lg("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return pI(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return pI(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),eS.apply(this,arguments)}function tS(e){return nS.apply(this,arguments)}function nS(){return nS=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Lg("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,JC(t,new VC);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),nS.apply(this,arguments)}function rS(e){return iS.apply(this,arguments)}function iS(){return iS=si(ci().mark((function e(t){return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Lg("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,ZC(t,new WC);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),iS.apply(this,arguments)}function aS(e){return tS(e).then((function(e){return e.persistence}))}function oS(e){return tS(e).then((function(e){return e.localStore}))}function sS(e){return rS(e).then((function(e){return e.remoteStore}))}function uS(e){return rS(e).then((function(e){return e.syncEngine}))}function cS(e){return lS.apply(this,arguments)}function lS(){return lS=si(ci().mark((function e(t){var n,r;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rS(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=HI.bind(null,n.syncEngine),r.onUnlisten=YI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),lS.apply(this,arguments)}function hS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Wg;return e.asyncQueue.enqueueAndForget(si(ci().mark((function i(){return ci().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new KC({next:function(a){t.enqueueAndForget((function(){return NI(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new zg(Bg.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new zg(Bg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new DI(g_(n.path),a,{includeMetadataChanges:!0,uc:!0});return CI(e,o)},i.next=3,cS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function fS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Wg;return e.asyncQueue.enqueueAndForget(si(ci().mark((function i(){return ci().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new KC({next:function(n){t.enqueueAndForget((function(){return NI(e,o)})),n.fromCache&&"server"===r.source?i.reject(new zg(Bg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new DI(n,a,{includeMetadataChanges:!0,uc:!0});return CI(e,o)},i.next=3,cS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var dS=new Map;function pS(e,t,n){if(!n)throw new zg(Bg.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function vS(e,t,n,r){if(!0===t&&!0===r)throw new zg(Bg.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function yS(e){if(!Sk.isDocumentKey(e))throw new zg(Bg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function mS(e){if(Sk.isDocumentKey(e))throw new zg(Bg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function gS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":jg()}function kS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new zg(Bg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=gS(e);throw new zg(Bg.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function _S(e,t){if(t<=0)throw new zg(Bg.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var wS=function(){function e(t){var n;if(dt(this,e),void 0===t.host){if(void 0!==t.ssl)throw new zg(Bg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new zg(Bg.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,vS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return vt(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),bS=function(){function e(t,n,r){dt(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wS({}),this._settingsFrozen=!1,t instanceof Ek?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new zg(Bg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ek(e.options.projectId)}(t))}return vt(e,[{key:"app",get:function(){if(!this._app)throw new zg(Bg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new zg(Bg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Kg;switch(e.type){case"gapi":var t=e.client;return qg(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new $g(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new zg(Bg.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=dS.get(e);t&&(Lg("ComponentProvider","Removing Datastore"),dS.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function xS(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=kS(e,bS))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Fg("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Rg.MOCK_USER;else{o=Na(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new zg(Bg.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Rg(u)}e._authCredentials=new Gg(new Hg(o,s))}}var ES=function(){function e(t,n,r){dt(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return vt(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new IS(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),TS=function(){function e(t,n,r){dt(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return vt(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),IS=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a;return dt(this,n),(a=t.call(this,e,r,g_(i)))._path=i,a.type="collection",a}return vt(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ES(this.firestore,null,new Sk(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(TS);function CS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=co(e),pS("collection","path",t),e instanceof bS){var a=hk.fromString.apply(hk,[t].concat(r));return mS(a),new IS(e,null,a)}if(!(e instanceof ES||e instanceof IS))throw new zg(Bg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(hk.fromString.apply(hk,[t].concat(r)));return mS(o),new IS(e.firestore,null,o)}function SS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=co(e),1===arguments.length&&(t=tk.R()),pS("doc","path",t),e instanceof bS){var a=hk.fromString.apply(hk,[t].concat(r));return yS(a),new ES(e,null,new Sk(a))}if(!(e instanceof ES||e instanceof IS))throw new zg(Bg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(hk.fromString.apply(hk,[t].concat(r)));return yS(o),new ES(e.firestore,e instanceof IS?e.converter:null,new Sk(o))}function NS(e,t){return e=co(e),t=co(t),(e instanceof ES||e instanceof IS)&&(t instanceof ES||t instanceof IS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function PS(e,t){return e=co(e),t=co(t),e instanceof TS&&t instanceof TS&&e.firestore===t.firestore&&C_(e._query,t._query)&&e.converter===t.converter}var RS=function(){function e(){var t=this;dt(this,e),this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new IT(this,"async_queue_retry"),this.yu=function(){var e=ET();e&&Lg("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ro.Yr()};var n=ET();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.yu)}return vt(e,[{key:"isShuttingDown",get:function(){return this.fu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.pu(),this.Iu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.fu){this.fu=!0,this.mu=e||!1;var t=ET();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}},{key:"enqueue",value:function(e){var t=this;if(this.pu(),this.fu)return new Promise((function(){}));var n=new Wg;return this.Iu((function(){return t.fu&&t.mu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.lu.push(e),t.Eu()}))}},{key:"Eu",value:function(){var e=si(ci().mark((function e(){var t=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.lu.length){e.next=14;break}return e.prev=1,e.next=4,this.lu[0]();case 4:this.lu.shift(),this.ro.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Xb(e.t0)){e.next=12;break}throw e.t0;case 12:Lg("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.lu.length>0&&this.ro.Hr((function(){return t.Eu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Iu",value:function(e){var t=this,n=this.hu.then((function(){return t.wu=!0,e().catch((function(e){t._u=e,t.wu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Mg("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.wu=!1,e}))}));return this.hu=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.pu(),this.gu.indexOf(e)>-1&&(t=0);var i=_I.createAndSchedule(this,e,t,n,(function(e){return r.Tu(e)}));return this.du.push(i),i}},{key:"pu",value:function(){this._u&&jg()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Au",value:function(){var e=si(ci().mark((function e(){var t;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.hu,e.next=3,t;case 3:if(t!==this.hu){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ru",value:function(e){var t,n=da(this.du);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.Au().then((function(){t.du.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=da(t.du);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Au()}))}},{key:"bu",value:function(e){this.gu.push(e)}},{key:"Tu",value:function(e){var t=this.du.indexOf(e);this.du.splice(t,1)}}]),e}();function AS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=da(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var OS=function(){function e(){dt(this,e),this._progressObserver={},this._taskCompletionResolver=new Wg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return vt(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),DS=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a;return dt(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new RS,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return vt(n,[{key:"_terminate",value:function(){return this._firestoreClient||MS(this),this._firestoreClient.terminate()}}]),n}(bS);function LS(e){return e._firestoreClient||MS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function MS(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new xk(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new $C(e._authCredentials,e._appCheckCredentials,e._queue,r)}function FS(e,t,n){var r=new Wg;return e.asyncQueue.enqueue(si(ci().mark((function i(){return ci().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,JC(e,n);case 3:return i.next=5,ZC(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Bg.FAILED_PRECONDITION||e.code===Bg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function US(e){return function(e){return e.asyncQueue.enqueue(si(ci().mark((function t(){var n,r;return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,aS(e);case 2:return n=t.sent,t.next=5,sS(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Vg(e);return t.Ko.delete(0),OT(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(LS(e=kS(e,DS)))}function jS(e){return function(e){return e.asyncQueue.enqueue(si(ci().mark((function t(){var n,r;return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,aS(e);case 2:return n=t.sent,t.next=5,sS(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Vg(t)).Ko.add(0),e.next=4,LT(n);case 4:n.Qo.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(LS(e=kS(e,DS)))}function qS(e,t){var n=LS(e=kS(e,DS)),r=new OS;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new GC(e,t)}(function(e,t){if(e instanceof Uint8Array)return HC(e,t);if(e instanceof ArrayBuffer)return HC(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,TT(t));e.asyncQueue.enqueueAndForget(si(ci().mark((function t(){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=qC,t.next=3,uS(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function VS(e,t){return function(e,t){return e.asyncQueue.enqueue(si(ci().mark((function n(){return ci().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Vg(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Kn.getNamedQuery(e,t)}))},n.next=3,oS(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(LS(e=kS(e,DS)),t).then((function(t){return t?new TS(e,null,t.query):null}))}function BS(e){if(e._initialized||e._terminated)throw new zg(Bg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var zS=function(){function e(){dt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new zg(Bg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dk(n)}return vt(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var WS=function(){function e(t){dt(this,e),this._byteString=t}return vt(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(vk.fromBase64String(t))}catch(t){throw new zg(Bg.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(vk.fromUint8Array(t))}}]),e}(),HS=vt((function e(t){dt(this,e),this._methodName=t})),KS=function(){function e(t,n){if(dt(this,e),!isFinite(t)||t<-90||t>90)throw new zg(Bg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new zg(Bg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return vt(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return nk(this._lat,e._lat)||nk(this._long,e._long)}}]),e}(),GS=/^__.*__$/,QS=function(){function e(t,n,r){dt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return vt(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new aw(e,this.data,this.fieldMask,t,this.fieldTransforms):new iw(e,this.data,t,this.fieldTransforms)}}]),e}(),YS=function(){function e(t,n,r){dt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return vt(e,[{key:"toMutation",value:function(e,t){return new aw(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function $S(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jg()}}var JS=function(){function e(t,n,r,i,a,o){dt(this,e),this.settings=t,this.databaseId=n,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return vt(e,[{key:"path",get:function(){return this.settings.path}},{key:"Vu",get:function(){return this.settings.Vu}},{key:"Su",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Du",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.Nu(e),r}},{key:"xu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.vu(),r}},{key:"ku",value:function(e){return this.Su({path:void 0,Cu:!0})}},{key:"Ou",value:function(e){return mN(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"vu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}},{key:"Nu",value:function(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if($S(this.Vu)&&GS.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}]),e}(),XS=function(){function e(t,n,r){dt(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.O=r||TT(t)}return vt(e,[{key:"Fu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new JS({Vu:e,methodName:t,$u:n,path:dk.emptyPath(),Cu:!1,Mu:r},this.databaseId,this.O,this.ignoreUndefinedProperties)}}]),e}();function ZS(e){var t=e._freezeSettings(),n=TT(e._databaseId);return new XS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function eN(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Fu(a.merge||a.mergeFields?2:0,t,n,i);dN("Data must be an object, but it was:",o,r);var s,u,c=hN(r,o);if(a.merge)s=new pk(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=da(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=pN(t,d,n);if(!o.contains(p))throw new zg(Bg.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));gN(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new pk(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new QS(new Wk(c),s,u)}var tN=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Vu)throw 1===e.Vu?e.Ou("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ou("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(HS);function nN(e,t,n){return new JS({Vu:3,$u:t.settings.$u,methodName:e._methodName,Cu:n},t.databaseId,t.O,t.ignoreUndefinedProperties)}var rN=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"_toFieldTransform",value:function(e){return new Q_(e.path,new q_)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(HS),iN=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,e)).Bu=r,i}return vt(n,[{key:"_toFieldTransform",value:function(e){var t=nN(this,e,!0),n=this.Bu.map((function(e){return lN(e,t)})),r=new V_(n);return new Q_(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(HS),aN=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,e)).Bu=r,i}return vt(n,[{key:"_toFieldTransform",value:function(e){var t=nN(this,e,!0),n=this.Bu.map((function(e){return lN(e,t)})),r=new z_(n);return new Q_(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(HS),oN=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,e)).Lu=r,i}return vt(n,[{key:"_toFieldTransform",value:function(e){var t=new H_(e.O,L_(e.O,this.Lu));return new Q_(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(HS);function sN(e,t,n,r){var i=e.Fu(1,t,n);dN("Data must be an object, but it was:",i,r);var a=[],o=Wk.empty();uk(r,(function(e,r){var s=yN(t,e,n);r=co(r);var u=i.xu(s);if(r instanceof tN)a.push(s);else{var c=lN(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new pk(a);return new YS(o,s,i.fieldTransforms)}function uN(e,t,n,r,i,a){var o=e.Fu(1,t,n),s=[pN(t,r,n)],u=[i];if(a.length%2!=0)throw new zg(Bg.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(pN(t,a[c])),u.push(a[c+1]);for(var l=[],h=Wk.empty(),f=s.length-1;f>=0;--f)if(!gN(l,s[f])){var d=s[f],p=u[f];p=co(p);var v=o.xu(d);if(p instanceof tN)l.push(d);else{var y=lN(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new pk(l);return new YS(h,m,o.fieldTransforms)}function cN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return lN(n,e.Fu(r?4:3,t))}function lN(e,t){if(fN(e=co(e)))return dN("Unsupported field value:",t,e),hN(e,t);if(e instanceof HS)return function(e,t){if(!$S(t.Vu))throw t.Ou("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ou("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Cu&&4!==t.Vu)throw t.Ou("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=da(e);try{for(a.s();!(n=a.n()).done;){var o=lN(n.value,t.ku(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=co(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return L_(t.O,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ak.fromDate(e);return{timestampValue:zw(t.O,n)}}if(e instanceof ak){var r=new ak(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:zw(t.O,r)}}if(e instanceof KS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof WS)return{bytesValue:Ww(t.O,e._byteString)};if(e instanceof ES){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ou("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Gw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ou("Unsupported field value: ".concat(gS(e)))}(e,t)}function hN(e,t){var n={};return ck(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):uk(e,(function(e,r){var i=lN(r,t.Du(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function fN(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ak||e instanceof KS||e instanceof WS||e instanceof ES||e instanceof HS)}function dN(e,t,n){if(!fN(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=gS(n);throw"an object"===r?t.Ou(e+" a custom object"):t.Ou(e+" "+r)}}function pN(e,t,n){if((t=co(t))instanceof zS)return t._internalPath;if("string"==typeof t)return yN(e,t);throw mN("Field path arguments must be of type string or ",e,!1,void 0,n)}var vN=new RegExp("[~\\*/\\[\\]]");function yN(e,t,n){if(t.search(vN)>=0)throw mN("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return pa(zS,ft(t.split(".")))._internalPath}catch(r){throw mN("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function mN(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new zg(Bg.INVALID_ARGUMENT,s+e+u)}function gN(e,t){return e.some((function(e){return e.isEqual(t)}))}var kN=function(){function e(t,n,r,i,a){dt(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return vt(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ES(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new _N(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(wN("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),_N=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"data",value:function(){return nn(en(n.prototype),"data",this).call(this)}}]),n}(kN);function wN(e,t){return"string"==typeof t?yN(e,t):t instanceof zS?t._internalPath:t._delegate._internalPath}var bN=function(){function e(t,n){dt(this,e),this.hasPendingWrites=t,this.fromCache=n}return vt(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),xN=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a,o,s){var u;return dt(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return vt(n,[{key:"exists",value:function(){return nn(en(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new EN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(wN("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(kN),EN=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nn(en(n.prototype),"data",this).call(this,e)}}]),n}(xN),TN=function(){function e(t,n,r,i){dt(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new bN(i.hasPendingWrites,i.fromCache),this.query=r}return vt(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new EN(n._firestore,n._userDataWriter,r.key,r,new bN(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new zg(Bg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new EN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new EN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:IN(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function IN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jg()}}function CN(e,t){return e instanceof xN&&t instanceof xN?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof TN&&t instanceof TN&&e._firestore===t._firestore&&PS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function SN(e){if(__(e)&&0===e.explicitOrderBy.length)throw new zg(Bg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var NN=vt((function e(){dt(this,e)}));function PN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var RN=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a;return dt(this,n),(a=t.call(this)).Uu=e,a.qu=r,a.Ku=i,a.type="where",a}return vt(n,[{key:"_apply",value:function(e){var t=ZS(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new zg(Bg.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){BN(o,a);var u,c=[],l=da(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(VN(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=VN(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||BN(o,a),s=cN(n,"where",o,"in"===a||"not-in"===a);var f=n_.create(i,a,s);return function(e,t){if(t.S()){var n=b_(e);if(null!==n&&!n.isEqual(t.field))throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=w_(e);null!==r&&zN(e,t.field,r)}var i=function(e,t){var n,r=da(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new zg(Bg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new zg(Bg.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new TS(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new y_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(NN);var AN=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this)).Uu=e,i.Gu=r,i.type="orderBy",i}return vt(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new f_(t,n);return function(e,t){if(null===w_(e)){var n=b_(e);null!==n&&zN(e,n,t.field)}}(e,r),r}(e._query,this.Uu,this.Gu);return new TS(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new y_(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(NN);var ON=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a;return dt(this,n),(a=t.call(this)).type=e,a.ju=r,a.Qu=i,a}return vt(n,[{key:"_apply",value:function(e){return new TS(e.firestore,e.converter,I_(e._query,this.ju,this.Qu))}}]),n}(NN);var DN=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a;return dt(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return vt(n,[{key:"_apply",value:function(e){var t=qN(e,this.type,this.Wu,this.zu);return new TS(e.firestore,e.converter,function(e,t){return new y_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(NN);function LN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new DN("startAt",t,!0)}function MN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new DN("startAfter",t,!1)}var FN=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a;return dt(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return vt(n,[{key:"_apply",value:function(e){var t=qN(e,this.type,this.Wu,this.zu);return new TS(e.firestore,e.converter,function(e,t){return new y_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(NN);function UN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FN("endBefore",t,!1)}function jN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FN("endAt",t,!0)}function qN(e,t,n,r){if(n[0]=co(n[0]),n[0]instanceof kN)return function(e,t,n,r,i){if(!r)throw new zg(Bg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=da(E_(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Fk(t,r.key));else{var c=r.data.field(u.field);if(_k(c))throw new zg(Bg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new h_(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ZS(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new zg(Bg.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!x_(e)&&-1!==c.indexOf("/"))throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(hk.fromString(c));if(!Sk.isDocumentKey(l))throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Sk(l);s.push(Fk(t,h))}else{var f=cN(n,r,c);s.push(f)}}return new h_(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function VN(e,t,n){if("string"==typeof(n=co(n))){if(""===n)throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x_(t)&&-1!==n.indexOf("/"))throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(hk.fromString(n));if(!Sk.isDocumentKey(r))throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Fk(e,new Sk(r))}if(n instanceof ES)return Fk(e,n._key);throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(gS(n),"."))}function BN(e,t){if(!Array.isArray(e)||0===e.length)throw new zg(Bg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new zg(Bg.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function zN(e,t,n){if(!n.isEqual(t))throw new zg(Bg.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var WN=function(){function e(){dt(this,e)}return vt(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Pk(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gk(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kk(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw jg()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return uk(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new KS(gk(e.latitude),gk(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=wk(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bk(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=mk(e);return new ak(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=hk.fromString(e);qg(mb(n));var r=new Ek(n.get(1),n.get(3)),i=new Sk(n.popFirst(5));return r.isEqual(t)||Mg("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function HN(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var KN=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this)).firestore=e,r}return vt(n,[{key:"convertBytes",value:function(e){return new WS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ES(this.firestore,null,t)}}]),n}(WN),GN=function(){function e(t,n){dt(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ZS(t)}return vt(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=QN(e,this._firestore),i=HN(r.converter,t,n),a=eN(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,$_.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=QN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=co(t))||t instanceof zS?uN(this._dataReader,"WriteBatch.update",i._key,t,n,o):sN(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,$_.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=QN(e,this._firestore);return this._mutations=this._mutations.concat(new hw(t._key,$_.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new zg(Bg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function QN(e,t){if((e=co(e)).firestore!==t)throw new zg(Bg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var YN=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this)).firestore=e,r}return vt(n,[{key:"convertBytes",value:function(e){return new WS(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ES(this.firestore,null,t)}}]),n}(WN);function $N(e){e=kS(e,ES);var t=kS(e.firestore,DS),n=LS(t),r=new YN(t);return function(e,t){var n=new Wg;return e.asyncQueue.enqueueAndForget(si(ci().mark((function r(){return ci().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=si(ci().mark((function e(t,n,r){var i,a;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Vg(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Us.ys(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new zg(Bg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=wI(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,oS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new xN(t,r,e._key,n,new bN(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function JN(e){e=kS(e,TS);var t=kS(e.firestore,DS),n=LS(t),r=new YN(t);return function(e,t){var n=new Wg;return e.asyncQueue.enqueueAndForget(si(ci().mark((function r(){return ci().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=si(ci().mark((function e(t,n,r){var i,a,o,s,u;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,BE(t,n,!0);case 3:i=e.sent,a=new VI(n,i.Ks),o=a.Ic(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=wI(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,oS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new TN(t,r,e,n)}))}function XN(e,t,n){e=kS(e,ES);var r=kS(e.firestore,DS),i=HN(e.converter,t,n);return nP(r,[eN(ZS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,$_.none())])}function ZN(e,t,n){e=kS(e,ES);for(var r=kS(e.firestore,DS),i=ZS(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return nP(r,[("string"==typeof(t=co(t))||t instanceof zS?uN(i,"updateDoc",e._key,t,n,o):sN(i,"updateDoc",e._key,t)).toMutation(e._key,$_.exists(!0))])}function eP(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=co(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||AS(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(AS(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof ES)l=kS(e.firestore,DS),h=g_(e._key.path),c={next:function(t){n[u]&&n[u](rP(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=kS(e,TS);l=kS(p.firestore,DS),h=p._query;var v=new YN(l);c={next:function(e){n[u]&&n[u](new TN(l,v,p,e))},error:n[u+1],complete:n[u+2]},SN(e._query)}return function(e,t,n,r){var i=new KC(r),a=new DI(t,i,n);return e.asyncQueue.enqueueAndForget(si(ci().mark((function t(){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=CI,t.next=3,cS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Jc(),e.asyncQueue.enqueueAndForget(si(ci().mark((function t(){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=NI,t.next=3,cS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(LS(l),h,f,c)}function tP(e,t){return function(e,t){var n=new KC(t);return e.asyncQueue.enqueueAndForget(si(ci().mark((function t(){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Vg(e).Zo.add(t),t.next()},t.next=3,cS(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Jc(),e.asyncQueue.enqueueAndForget(si(ci().mark((function t(){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Vg(e).Zo.delete(t)},t.next=3,cS(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(LS(e=kS(e,DS)),AS(t)?t:{next:t})}function nP(e,t){return function(e,t){var n=new Wg;return e.asyncQueue.enqueueAndForget(si(ci().mark((function r(){return ci().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=JI,r.next=3,uS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(LS(e),t)}function rP(e,t,n){var r=n.docs.get(t._key),i=new YN(e);return new xN(e,i,t._key,r,new bN(n.hasPendingWrites,n.fromCache),t.converter)}var iP=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,e,r))._firestore=e,i}return vt(n,[{key:"get",value:function(e){var t=this,r=QN(e,this._firestore),i=new YN(this._firestore);return nn(en(n.prototype),"get",this).call(this,e).then((function(e){return new xN(t._firestore,i,r._key,e._document,new bN(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){dt(this,e),this._firestore=t,this._transaction=n,this._dataReader=ZS(t)}return vt(e,[{key:"get",value:function(e){var t=this,n=QN(e,this._firestore),r=new KN(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return jg();var i=e[0];if(i.isFoundDocument())return new kN(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new kN(t._firestore,r,n._key,null,n.converter);throw jg()}))}},{key:"set",value:function(e,t,n){var r=QN(e,this._firestore),i=HN(r.converter,t,n),a=eN(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=QN(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=co(t))||t instanceof zS?uN(this._dataReader,"Transaction.update",i._key,t,n,o):sN(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=QN(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function aP(e,t){return function(e,t){var n=new Wg;return e.asyncQueue.enqueueAndForget(si(ci().mark((function r(){var i;return ci().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return rS(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new YC(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(LS(e=kS(e,DS)),(function(n){return t(new iP(e,n))}))}function oP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new iN("arrayUnion",t)}function sP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aN("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ag=e}(Wo),Lo(new lo("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new DS(i,new Qg(e.getProvider("auth-internal")),new Xg(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),$o(Pg,"3.4.5",e),$o(Pg,"3.4.5","esm2017")}();function uP(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new zg("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function cP(){if("undefined"===typeof Uint8Array)throw new zg("unimplemented","Uint8Arrays are not available in this environment.")}function lP(){if("undefined"==typeof atob)throw new zg("unimplemented","Blobs are unavailable in Firestore in this environment.")}var hP=function(){function e(t){dt(this,e),this._delegate=t}return vt(e,[{key:"toBase64",value:function(){return lP(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return cP(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return lP(),new e(WS.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return cP(),new e(WS.fromUint8Array(t))}}]),e}();function fP(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=da(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var dP=function(){function e(){dt(this,e)}return vt(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){BS(e=kS(e,DS));var n=LS(e),r=e._freezeSettings(),i=new WC;return FS(n,i,new BC(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){BS(e=kS(e,DS));var t=LS(e),n=e._freezeSettings(),r=new WC;return FS(t,r,new zC(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new zg(Bg.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Wg;return e._queue.enqueueAndForgetEvenWhileRestricted(si(ci().mark((function n(){return ci().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=si(ci().mark((function e(t){var n;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yb.Vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Yb.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(TE(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),pP=function(){function e(t,n,r){var i=this;dt(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Ek||(this._appCompat=t)}return vt(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Fg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};xS(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return US(this._delegate)}},{key:"disableNetwork",value:function(){return jS(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&vS("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Wg;return e.asyncQueue.enqueueAndForget(si(ci().mark((function n(){return ci().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=uC,n.next=3,uS(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(LS(e=kS(e,DS)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return tP(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new zg("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new SP(this,CS(this._delegate,e))}catch(kz){throw _P(kz,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new kP(this,SS(this._delegate,e))}catch(kz){throw _P(kz,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new TP(this,function(e,t){if(e=kS(e,bS),pS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new zg(Bg.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new TS(e,null,function(e){return new y_(hk.emptyPath(),e)}(t))}(this._delegate,e))}catch(kz){throw _P(kz,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return aP(this._delegate,(function(n){return e(new yP(t,n))}))}},{key:"batch",value:function(){var e=this;return LS(this._delegate),new mP(new GN(this._delegate,(function(t){return nP(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return qS(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return VS(this._delegate,e).then((function(e){return e?new TP(t,e):null}))}}]),e}(),vP=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this)).firestore=e,r}return vt(n,[{key:"convertBytes",value:function(e){return new hP(new WS(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return kP.forKey(t,this.firestore,null)}}]),n}(WN);var yP=function(){function e(t,n){dt(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new vP(t)}return vt(e,[{key:"get",value:function(e){var t=this,n=NP(e);return this._delegate.get(n).then((function(e){return new xP(t._firestore,new xN(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=NP(e);return n?(uP("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=NP(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=NP(e);return this._delegate.delete(t),this}}]),e}(),mP=function(){function e(t){dt(this,e),this._delegate=t}return vt(e,[{key:"set",value:function(e,t,n){var r=NP(e);return n?(uP("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=NP(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=NP(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),gP=function(){function e(t,n,r){dt(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return vt(e,[{key:"fromFirestore",value:function(e,t){var n=new EN(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new EP(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new vP(t),n),i.set(n,a)),a}}]),e}();gP.INSTANCES=new WeakMap;var kP=function(){function e(t,n){dt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vP(t)}return vt(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new SP(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new SP(this.firestore,CS(this._delegate,e))}catch(kz){throw _P(kz,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=co(e))instanceof ES&&NS(this._delegate,e)}},{key:"set",value:function(e,t){t=uP("DocumentReference.set",t);try{return t?XN(this._delegate,e,t):XN(this._delegate,e)}catch(kz){throw _P(kz,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ZN(this._delegate,e):ZN.apply(void 0,[this._delegate,e,t].concat(r))}catch(kz){throw _P(kz,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return nP(kS(e.firestore,DS),[new hw(e._key,$_.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=wP(n),a=bP(n,(function(t){return new xP(e.firestore,new xN(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return eP(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?$N(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=kS(e,ES);var t=kS(e.firestore,DS);return hS(LS(t),e._key,{source:"server"}).then((function(n){return rP(t,e,n)}))}(this._delegate):function(e){e=kS(e,ES);var t=kS(e.firestore,DS);return hS(LS(t),e._key).then((function(n){return rP(t,e,n)}))}(this._delegate),t.then((function(e){return new xP(n.firestore,new xN(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(gP.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new zg("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new ES(n._delegate,r,new Sk(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new ES(n._delegate,r,t))}}]),e}();function _P(e,t,n){return e.message=e.message.replace(t,n),e}function wP(e){var t,n=da(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!fP(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function bP(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=fP(e[0])?e[0]:fP(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var xP=function(){function e(t,n){dt(this,e),this._firestore=t,this._delegate=n}return vt(e,[{key:"ref",get:function(){return new kP(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return CN(this._delegate,e._delegate)}}]),e}(),EP=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||jg()}(void 0!==t),t}}]),n}(xP),TP=function(){function e(t,n){dt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vP(t)}return vt(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,PN(this._delegate,function(e,t,n){var r=t,i=wN("where",e);return new RN(i,r,n)}(t,n,r)))}catch(kz){throw _P(kz,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,PN(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=wN("orderBy",e);return new AN(n,t)}(t,n)))}catch(kz){throw _P(kz,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,PN(this._delegate,function(e){return _S("limit",e),new ON("limit",e,"F")}(t)))}catch(kz){throw _P(kz,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,PN(this._delegate,function(e){return _S("limitToLast",e),new ON("limitToLast",e,"L")}(t)))}catch(kz){throw _P(kz,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,PN(this._delegate,LN.apply(void 0,arguments)))}catch(kz){throw _P(kz,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,PN(this._delegate,MN.apply(void 0,arguments)))}catch(kz){throw _P(kz,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,PN(this._delegate,UN.apply(void 0,arguments)))}catch(kz){throw _P(kz,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,PN(this._delegate,jN.apply(void 0,arguments)))}catch(kz){throw _P(kz,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return PS(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?JN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=kS(e,TS);var t=kS(e.firestore,DS),n=LS(t),r=new YN(t);return fS(n,e._query,{source:"server"}).then((function(n){return new TN(t,r,e,n)}))}(this._delegate):function(e){e=kS(e,TS);var t=kS(e.firestore,DS),n=LS(t),r=new YN(t);return SN(e._query),fS(n,e._query).then((function(n){return new TN(t,r,e,n)}))}(this._delegate),t.then((function(e){return new CP(n.firestore,new TN(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=wP(n),a=bP(n,(function(t){return new CP(e.firestore,new TN(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return eP(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(gP.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),IP=function(){function e(t,n){dt(this,e),this._firestore=t,this._delegate=n}return vt(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new EP(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),CP=function(){function e(t,n){dt(this,e),this._firestore=t,this._delegate=n}return vt(e,[{key:"query",get:function(){return new TP(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new EP(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new IP(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new EP(n._firestore,r))}))}},{key:"isEqual",value:function(e){return CN(this._delegate,e._delegate)}}]),e}(),SP=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return vt(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new kP(this.firestore,e):null}},{key:"doc",value:function(e){try{return new kP(this.firestore,void 0===e?SS(this._delegate):SS(this._delegate,e))}catch(kz){throw _P(kz,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=kS(e.firestore,DS),r=SS(e),i=HN(e.converter,t);return nP(n,[eN(ZS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,$_.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new kP(t.firestore,e)}))}},{key:"isEqual",value:function(e){return NS(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(gP.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(TP);function NP(e){return kS(e,ES)}var PP=function(){function e(){dt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=pa(zS,n)}return vt(e,[{key:"isEqual",value:function(e){return(e=co(e))instanceof zS&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(dk.keyField().canonicalString())}}]),e}(),RP=function(){function e(t){dt(this,e),this._delegate=t}return vt(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new rN("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new tN("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=oP.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=sP.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new oN("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),AP={Firestore:pP,GeoPoint:KS,Timestamp:ak,Blob:hP,Transaction:yP,WriteBatch:mP,DocumentReference:kP,DocumentSnapshot:xP,Query:TP,QueryDocumentSnapshot:EP,QuerySnapshot:CP,CollectionReference:SP,FieldPath:PP,FieldValue:RP,setLogLevel:function(e){!function(e){Og.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new lo("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},AP)))}(e,(function(e,t){return new pP(e,t,new dP)})),e.registerVersion("@firebase/firestore-compat","0.1.14")}(as);var OP="@firebase/database",DP="0.12.5",LP="";function MP(e){LP=e}var FP=function(){function e(t){dt(this,e),this.domStorage_=t,this.prefix_="firebase:"}return vt(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),za(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ba(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),UP=function(){function e(){dt(this,e),this.cache_={},this.isInMemoryStorage=!0}return vt(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Ha(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),jP=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new FP(t)}}catch(kz){}return new UP},qP=jP("localStorage"),VP=jP("sessionStorage"),BP=new Eo("@firebase/database"),zP=function(){var e=1;return function(){return e++}}(),WP=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,ka(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new eo;n.update(t);var r=n.digest();return ba.encodeByteArray(r)},HP=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?za(r):r,t+=" "}return t},KP=null,GP=!0,QP=function(e,t){ka(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(BP.logLevel=vo.VERBOSE,KP=BP.log.bind(BP),t&&VP.set("logging_enabled",!0)):"function"===typeof e?KP=e:(KP=null,VP.remove("logging_enabled"))},YP=function(){if(!0===GP&&(GP=!1,null===KP&&!0===VP.get("logging_enabled")&&QP(!0)),KP){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=HP.apply(null,t);KP(r)}},$P=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];YP.apply(void 0,[e].concat(n))}},JP=function(){var e="FIREBASE INTERNAL ERROR: "+HP.apply(void 0,arguments);BP.error(e)},XP=function(){var e="FIREBASE FATAL ERROR: ".concat(HP.apply(void 0,arguments));throw BP.error(e),new Error(e)},ZP=function(){var e="FIREBASE WARNING: "+HP.apply(void 0,arguments);BP.warn(e)},eR=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},tR="[MIN_NAME]",nR="[MAX_NAME]",rR=function(e,t){if(e===t)return 0;if(e===tR||t===nR)return-1;if(t===tR||e===nR)return 1;var n=dR(e),r=dR(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},iR=function(e,t){return e===t?0:e<t?-1:1},aR=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+za(t))},oR=function e(t){if("object"!==typeof t||null===t)return za(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=za(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},sR=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function uR(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var cR=function(e){ka(!eR(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var lR=new RegExp("^-?(0*)\\d{1,10}$"),hR=-2147483648,fR=2147483647,dR=function(e){if(lR.test(e)){var t=Number(e);if(t>=hR&&t<=fR)return t}return null},pR=function(e){try{e()}catch(kz){setTimeout((function(){var t=kz.stack||"";throw ZP("Exception was thrown by user callback.",t),kz}),Math.floor(0))}},vR=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},yR=function(){function e(t,n){var r=this;dt(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return vt(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){ZP('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),mR=function(){function e(t,n,r){var i=this;dt(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return vt(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(YP("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ZP(e)}}]),e}(),gR=function(){function e(t){dt(this,e),this.accessToken=t}return vt(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();gR.OWNER="owner";var kR="5",_R=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wR="websocket",bR="long_polling",xR=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];dt(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qP.get("host:"+t)||this._host}return vt(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qP.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function ER(e,t,n){var r;if(ka("string"===typeof t,"typeof type must == string"),ka("object"===typeof n,"typeof params must == object"),t===wR)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==bR)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return uR(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var TR=function(){function e(){dt(this,e),this.counters_={}}return vt(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Ha(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Ia(void 0,this.counters_)}}]),e}(),IR={},CR={};function SR(e){var t=e.toString();return IR[t]||(IR[t]=new TR),IR[t]}var NR=function(){function e(t){dt(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return vt(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&pR((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),PR="start",RR="close",AR=function(){function e(t,n,r,i,a,o,s){var u=this;dt(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$P(t),this.stats_=SR(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),ER(n,bR,e)}}return vt(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new NR(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ma()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new OR((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===PR)n.id=a,n.password=o;else{if(i!==RR)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=kR,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&_R.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=za(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=xa(t),r=sR(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Ma()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=za(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Ma()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),OR=function(){function e(t,n,r,i){if(dt(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ma())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=zP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(kz){YP("frame writing exception"),kz.stack&&YP(kz.stack),YP(kz)}}}return vt(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Ma()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){YP("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(kz){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||YP("No IE domain setting required")}catch(kz){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),DR=null;"undefined"!==typeof MozWebSocket?DR=MozWebSocket:"undefined"!==typeof WebSocket&&(DR=WebSocket);var LR=function(){function e(t,n,r,i,a,o,s){dt(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$P(this.connId),this.stats_=SR(n),this.connURL=e.connectionURL_(n,o,s,i),this.nodeAdmin=n.nodeAdmin}return vt(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qP.set("previous_websocket_failure",!0);try{if(Ma()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(kR,"/").concat(LP,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/TeenCafe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o}),this.mySock=new DR(this.connURL,[],i)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new DR(this.connURL,[],s)}}catch(kz){this.log_("Error instantiating WebSocket.");var u=kz.message||kz.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){qP.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Ba(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(ka(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=za(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=sR(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(kz){this.log_("Exception thrown from WebSocket.send():",kz.message||kz.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={};return i.v=kR,!Ma()&&"undefined"!==typeof location&&location.hostname&&_R.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),ER(e,wR,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==DR&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return qP.isInMemoryStorage||!0===qP.get("previous_websocket_failure")}}]),e}();LR.responsesRequiredToBeHealthy=2,LR.healthyTimeout=3e4;var MR=function(){function e(t){dt(this,e),this.initTransports_(t)}return vt(e,[{key:"initTransports_",value:function(t){var n=LR&&LR.isAvailable(),r=n&&!LR.previouslyFailed();if(t.webSocketOnly&&(n||ZP("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[LR];else{var i,a=this.transports_=[],o=da(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[AR,LR]}}]),e}(),FR=function(){function e(t,n,r,i,a,o,s,u,c,l){dt(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$P("c:"+this.id+":"),this.transportManager_=new MR(n),this.log_("Connection created"),this.start_()}return vt(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=vR((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=aR("t",e),n=aR("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=aR("t",e),n=aR("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=aR("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?JP("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):JP("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),kR!==n&&ZP("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),vR((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vR((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qP.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),UR=function(){function e(){dt(this,e)}return vt(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),jR=function(){function e(t){dt(this,e),this.allowedEvents_=t,this.listeners_={},ka(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return vt(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=ft(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){ka(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),qR=function(e){rn(n,e);var t=cn(n);function n(){var e;return dt(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ra()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return vt(n,[{key:"getInitialEvent",value:function(e){return ka("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(jR),VR=function(){function e(t,n){if(dt(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return vt(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function BR(){return new VR("")}function zR(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function WR(e){return e.pieces_.length-e.pieceNum_}function HR(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new VR(e.pieces_,t)}function KR(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function GR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function QR(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new VR(t,0)}function YR(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof VR)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new VR(n,0)}function $R(e){return e.pieceNum_>=e.pieces_.length}function JR(e,t){var n=zR(e),r=zR(t);if(null===n)return t;if(n===r)return JR(HR(e),HR(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function XR(e,t){for(var n=GR(e,0),r=GR(t,0),i=0;i<n.length&&i<r.length;i++){var a=rR(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function ZR(e,t){if(WR(e)!==WR(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function eA(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(WR(e)>WR(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var tA=vt((function e(t,n){dt(this,e),this.errorPrefix_=n,this.parts_=GR(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=uo(this.parts_[r]);nA(this)}));function nA(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+rA(e))}function rA(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var iA=function(e){rn(n,e);var t=cn(n);function n(){var e,r,i;return dt(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return vt(n,[{key:"getInitialEvent",value:function(e){return ka("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(jR),aA=1e3,oA=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a,o,s,u,c){var l;if(dt(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=$P("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=aA,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Ma())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return iA.getInstance().on("visible",l.onVisible_,sn(l)),-1===e.host.indexOf("fblocal")&&qR.getInstance().on("online",l.onOnline_,sn(l)),l}return vt(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(za(i)),ka(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new Sa,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),ka(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ka(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Wa(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Wa(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ka(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+za(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):JP("Unrecognized action received from server: "+za(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;ka(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=aA,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=aA,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=aA),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=si(ci().mark((function e(){var t,r,i,a,o,s,u,c,l,f,d,p,v,y,m=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},l=function(e){ka(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=h(d,2),v=p[0],y=p[1],s?YP("getToken() completed but was canceled"):(YP("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,u=new FR(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){ZP(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&ZP(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){YP("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){YP("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ga(this.interruptReasons_)&&(this.reconnectDelay_=aA,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return oR(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new VR(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){YP("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){YP("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=da(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=da(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Ma()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+LP.replace(/\./g,"-")]=1,Ra()?e["framework.cordova"]=1:Da()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=qR.getInstance().currentlyOnline();return Ga(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Ha(e,"w")){var n=Ka(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();ZP("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(UR);oA.nextPersistentConnectionId_=0,oA.nextConnectionId_=0;var sA,uA=function(){function e(t,n){dt(this,e),this.name=t,this.node=n}return vt(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),cA=function(){function e(){dt(this,e)}return vt(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new uA(tR,e),r=new uA(tR,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return uA.MIN}}]),e}(),lA=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"compare",value:function(e,t){return rR(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw _a("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return uA.MIN}},{key:"maxPost",value:function(){return new uA(nR,sA)}},{key:"makePost",value:function(e,t){return ka("string"===typeof e,"KeyIndex indexValue must always be a string."),new uA(e,sA)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return sA},set:function(e){sA=e}}]),n}(cA),hA=new lA,fA=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;dt(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return vt(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),dA=function(){function e(t,n,r,i,a){dt(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:yA.EMPTY_NODE,this.right=null!=a?a:yA.EMPTY_NODE}return vt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return yA.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return yA.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();dA.RED=!0,dA.BLACK=!1;var pA,vA=function(){function e(){dt(this,e)}return vt(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new dA(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),yA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;dt(this,e),this.comparator_=t,this.root_=n}return vt(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,dA.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,dA.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new fA(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new fA(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new fA(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new fA(this.root_,null,this.comparator_,!0,e)}}]),e}();function mA(e,t){return rR(e.name,t.name)}function gA(e,t){return rR(e,t)}yA.EMPTY_NODE=new vA;var kA,_A,wA,bA=function(e){return"number"===typeof e?"number:"+cR(e):"string:"+e},xA=function(e){if(e.isLeafNode()){var t=e.val();ka("string"===typeof t||"number"===typeof t||"object"===typeof t&&Ha(t,".sv"),"Priority must be a string or number.")}else ka(e===pA||e.isEmpty(),"priority of unexpected type.");ka(e===pA||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},EA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;dt(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,ka(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),xA(this.priorityNode_)}return vt(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return $R(t)?this:".priority"===zR(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=zR(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(ka(".priority"!==r||1===WR(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(HR(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+bA(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?cR(this.value_):this.value_,this.lazyHash_=WP(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(ka(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return ka(i>=0,"Unknown leaf type: "+n),ka(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return kA},set:function(e){kA=e}}]),e}();EA.VALUE_TYPE_ORDER=["object","boolean","number","string"];var TA,IA,CA=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?rR(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return uA.MIN}},{key:"maxPost",value:function(){return new uA(nR,new EA("[PRIORITY-POST]",wA))}},{key:"makePost",value:function(e,t){var n=_A(e);return new uA(t,new EA("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(cA),SA=new CA,NA=Math.log(2),PA=function(){function e(t){dt(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/NA,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return vt(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),RA=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new dA(o,a.node,dA.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new dA(o,a.node,dA.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new dA(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,dA.BLACK):(s(h,dA.BLACK),s(h,dA.RED))}return a}(new PA(e.length));return new yA(r||t,a)},AA={},OA=function(){function e(t,n){dt(this,e),this.indexes_=t,this.indexSet_=n}return vt(e,[{key:"get",value:function(e){var t=Ka(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof yA?t:null}},{key:"hasIndex",value:function(e){return Ha(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){ka(t!==hA,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(uA.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?RA(i,t.getCompare()):AA;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=Qa(this.indexes_,(function(e,i){var a=Ka(r.indexSet_,i);if(ka(a,"Missing index implementation for "+i),e===AA){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(uA.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),RA(o,a.getCompare())}return AA}var c=n.get(t.name),l=e;return c&&(l=l.remove(new uA(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Qa(this.indexes_,(function(e){if(e===AA)return e;var r=n.get(t.name);return r?e.remove(new uA(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return ka(AA&&SA,"ChildrenNode.ts has not been loaded"),TA=TA||new e({".priority":AA},{".priority":SA})}}]),e}(),DA=function(){function e(t,n,r){dt(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&xA(this.priorityNode_),this.children_.isEmpty()&&ka(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return vt(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||IA}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?IA:t}},{key:"getChild",value:function(e){var t=zR(e);return null===t?this:this.getImmediateChild(t).getChild(HR(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(ka(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new uA(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?IA:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=zR(e);if(null===n)return t;ka(".priority"!==zR(e)||1===WR(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(HR(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(SA,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+bA(this.getPriority().val())+":"),this.forEachChild(SA,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":WP(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new uA(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new uA(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new uA(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,uA.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,uA.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===LA?-1:0}},{key:"withIndex",value:function(t){if(t===hA||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===hA||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(SA),r=t.getIterator(SA),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===hA?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return IA||(IA=new e(new yA(gA),null,OA.Default))}}]),e}();DA.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var LA=new(function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.call(this,new yA(gA),DA.EMPTY_NODE,OA.Default)}return vt(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return DA.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(DA));Object.defineProperties(uA,{MIN:{value:new uA(tR,DA.EMPTY_NODE)},MAX:{value:new uA(nR,LA)}}),lA.__EMPTY_NODE=DA.EMPTY_NODE,EA.__childrenNodeConstructor=DA,pA=LA,function(e){wA=e}(LA);function MA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return DA.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),ka(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new EA(n,MA(t))}if(e instanceof Array){var r=DA.EMPTY_NODE;return uR(e,(function(t,n){if(Ha(e,t)&&"."!==t.substring(0,1)){var i=MA(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(MA(t))}var i=[],a=!1,o=e;if(uR(o,(function(e,t){if("."!==e.substring(0,1)){var n=MA(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new uA(e,n)))}})),0===i.length)return DA.EMPTY_NODE;var s=RA(i,mA,(function(e){return e.name}),gA);if(a){var u=RA(i,SA.getCompare());return new DA(s,MA(t),new OA({".priority":u},{".priority":SA}))}return new DA(s,MA(t),OA.Default)}!function(e){_A=e}(MA);var FA=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this)).indexPath_=e,ka(!$R(e)&&".priority"!==zR(e),"Can't create PathIndex with empty path or .priority key"),r}return vt(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?rR(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=MA(e),r=DA.EMPTY_NODE.updateChild(this.indexPath_,n);return new uA(t,r)}},{key:"maxPost",value:function(){var e=DA.EMPTY_NODE.updateChild(this.indexPath_,LA);return new uA(nR,e)}},{key:"toString",value:function(){return GR(this.indexPath_,0).join("/")}}]),n}(cA),UA=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?rR(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return uA.MIN}},{key:"maxPost",value:function(){return uA.MAX}},{key:"makePost",value:function(e,t){var n=MA(e);return new uA(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(cA),jA=new UA,qA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",VA=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=qA.charAt(n%64),n=Math.floor(n/64);ka(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=qA.charAt(t[r]);return ka(20===o.length,"nextPushId: Length should be 20."),o}}(),BA=function(e){if("2147483647"===e)return"-";var t=dR(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return nR;var a=n[i],o=qA.charAt(qA.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},zA=function(e){if("-2147483648"===e)return tR;var t=dR(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=qA.charAt(qA.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function WA(e){return{type:"value",snapshotNode:e}}function HA(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function KA(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function GA(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var QA=function(){function e(t){dt(this,e),this.index_=t}return vt(e,[{key:"updateChild",value:function(e,t,n,r,i,a){ka(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(KA(t,o)):ka(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(HA(t,n)):a.trackChildChange(GA(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(SA,(function(e,r){t.hasChild(e)||n.trackChildChange(KA(e,r))})),t.isLeafNode()||t.forEachChild(SA,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(GA(t,r,i))}else n.trackChildChange(HA(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?DA.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),YA=function(){function e(t){dt(this,e),this.indexedFilter_=new QA(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return vt(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new uA(t,n))||(n=DA.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=DA.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(DA.EMPTY_NODE);var i=this;return t.forEachChild(SA,(function(e,t){i.matches(new uA(e,t))||(r=r.updateImmediateChild(e,DA.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),$A=function(){function e(t){dt(this,e),this.rangedFilter_=new YA(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return vt(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new uA(t,n))||(n=DA.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=DA.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=DA.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(DA.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,u)<=0?f++:r=r.updateImmediateChild(p.name,DA.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;ka(s.numChildren()===this.limit_,"");var u=new uA(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(GA(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(KA(t,h));var p=s.updateImmediateChild(t,DA.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(HA(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(KA(c.name,c.node)),i.trackChildChange(HA(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,DA.EMPTY_NODE)):e}}]),e}(),JA=function(){function e(){dt(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=SA}return vt(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return ka(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return ka(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:tR}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return ka(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return ka(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:nR}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return ka(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===SA}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function XA(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ZA(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function eO(e,t){var n=e.copy();return n.index_=t,n}function tO(e){var t,n={};return e.isDefault()||(e.index_===SA?t="$priority":e.index_===jA?t="$value":e.index_===hA?t="$key":(ka(e.index_ instanceof FA,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=za(t),e.startSet_&&(n.startAt=za(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+za(e.indexStartName_))),e.endSet_&&(n.endAt=za(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+za(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function nO(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==SA&&(t.i=e.index_.toString()),t}var rO=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a){var o;return dt(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=$P("p:rest:"),o.listens_={},o}return vt(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=tO(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Ka(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=tO(e._queryParams),r=e._path.toString(),i=new Sa;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=h(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Ja(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Ba(c.responseText)}catch(kz){ZP("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&ZP("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(ka(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(UR),iO=function(){function e(){dt(this,e),this.rootNode_=DA.EMPTY_NODE}return vt(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function aO(){return{value:null,children:new Map}}function oO(e,t,n){if($R(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=zR(t);e.children.has(r)||e.children.set(r,aO()),oO(e.children.get(r),t=HR(t),n)}}function sO(e,t){if($R(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(SA,(function(t,n){oO(e,new VR(t),n)})),sO(e,t)}if(e.children.size>0){var r=zR(t);if(t=HR(t),e.children.has(r))sO(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function uO(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){uO(r,new VR(t.toString()+"/"+e),n)}))}var cO,lO=function(){function e(t){dt(this,e),this.collection_=t,this.last_=null}return vt(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&uR(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),hO=function(){function e(t,n){dt(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new lO(t);var r=1e4+2e4*Math.random();vR(this.reportStats_.bind(this),Math.floor(r))}return vt(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;uR(t,(function(t,i){i>0&&Ha(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),vR(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function fO(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(cO||(cO={}));var dO,pO=function(){function e(t,n,r){dt(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=cO.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return vt(e,[{key:"operationForChild",value:function(t){if($R(this.path)){if(null!=this.affectedTree.value)return ka(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new VR(t));return new e(BR(),n,this.revert)}return ka(zR(this.path)===t,"operationForChild called for unrelated child."),new e(HR(this.path),this.affectedTree,this.revert)}}]),e}(),vO=function(){function e(t,n){dt(this,e),this.source=t,this.path=n,this.type=cO.LISTEN_COMPLETE}return vt(e,[{key:"operationForChild",value:function(t){return $R(this.path)?new e(this.source,BR()):new e(this.source,HR(this.path))}}]),e}(),yO=function(){function e(t,n,r){dt(this,e),this.source=t,this.path=n,this.snap=r,this.type=cO.OVERWRITE}return vt(e,[{key:"operationForChild",value:function(t){return $R(this.path)?new e(this.source,BR(),this.snap.getImmediateChild(t)):new e(this.source,HR(this.path),this.snap)}}]),e}(),mO=function(){function e(t,n,r){dt(this,e),this.source=t,this.path=n,this.children=r,this.type=cO.MERGE}return vt(e,[{key:"operationForChild",value:function(t){if($R(this.path)){var n=this.children.subtree(new VR(t));return n.isEmpty()?null:n.value?new yO(this.source,BR(),n.value):new e(this.source,BR(),n)}return ka(zR(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,HR(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),gO=function(){function e(t,n,r){dt(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return vt(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if($R(e))return this.isFullyInitialized()&&!this.filtered_;var t=zR(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),kO=vt((function e(t){dt(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function _O(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw _a("Should only compare child_ events.");var r=new uA(t.childName,t.snapshotNode),i=new uA(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function wO(e,t){return{eventCache:e,serverCache:t}}function bO(e,t,n,r){return wO(new gO(t,n,r),e.serverCache)}function xO(e,t,n,r){return wO(e.eventCache,new gO(t,n,r))}function EO(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function TO(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var IO=function(){return dO||(dO=new yA(iR)),dO},CO=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:IO();dt(this,e),this.value=t,this.children=n}return vt(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:BR(),value:this.value};if($R(e))return null;var n=zR(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(HR(e),t);return null!=i?{path:YR(new VR(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if($R(t))return this;var n=zR(t),r=this.children.get(n);return null!==r?r.subtree(HR(t)):new e(null)}},{key:"set",value:function(t,n){if($R(t))return new e(n,this.children);var r=zR(t),i=(this.children.get(r)||new e(null)).set(HR(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if($R(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=zR(t),r=this.children.get(n);if(r){var i,a=r.remove(HR(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if($R(e))return this.value;var t=zR(e),n=this.children.get(t);return n?n.get(HR(e)):null}},{key:"setTree",value:function(t,n){if($R(t))return n;var r,i=zR(t),a=(this.children.get(i)||new e(null)).setTree(HR(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(BR(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(YR(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,BR(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if($R(e))return null;var i=zR(e),a=this.children.get(i);return a?a.findOnPath_(HR(e),YR(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,BR(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if($R(t))return this;this.value&&r(n,this.value);var i=zR(t),a=this.children.get(i);return a?a.foreachOnPath_(HR(t),YR(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(BR(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(YR(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return uR(t,(function(e,t){n=n.set(new VR(e),t)})),n}}]),e}(),SO=function(){function e(t){dt(this,e),this.writeTree_=t}return vt(e,null,[{key:"empty",value:function(){return new e(new CO(null))}}]),e}();function NO(e,t,n){if($R(t))return new SO(new CO(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=JR(i,t);return a=a.updateChild(o,n),new SO(e.writeTree_.set(i,a))}var s=new CO(n),u=e.writeTree_.setTree(t,s);return new SO(u)}function PO(e,t,n){var r=e;return uR(n,(function(e,n){r=NO(r,YR(t,e),n)})),r}function RO(e,t){if($R(t))return SO.empty();var n=e.writeTree_.setTree(t,new CO(null));return new SO(n)}function AO(e,t){return null!=OO(e,t)}function OO(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(JR(n.path,t)):null}function DO(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(SA,(function(e,n){t.push(new uA(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new uA(e,n.value))})),t}function LO(e,t){if($R(t))return e;var n=OO(e,t);return new SO(null!=n?new CO(n):e.writeTree_.subtree(t))}function MO(e){return e.writeTree_.isEmpty()}function FO(e,t){return UO(BR(),e.writeTree_,t)}function UO(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(ka(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=UO(YR(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(YR(e,".priority"),r)),n}function jO(e,t){return ZO(t,e)}function qO(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function VO(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));ka(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&BO(s,r.path)?i=!1:eA(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=WO(e.allWrites,zO,BR()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=RO(e.visibleWrites,r.path):uR(r.children,(function(t){e.visibleWrites=RO(e.visibleWrites,YR(r.path,t))}));return!0}return!1}function BO(e,t){if(e.snap)return eA(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&eA(YR(e.path,n),t))return!0;return!1}function zO(e){return e.visible}function WO(e,t,n){for(var r=SO.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)eA(n,o)?r=NO(r,s=JR(n,o),a.snap):eA(o,n)&&(s=JR(o,n),r=NO(r,BR(),a.snap.getChild(s)));else{if(!a.children)throw _a("WriteRecord should have .snap or .children");if(eA(n,o))r=PO(r,s=JR(n,o),a.children);else if(eA(o,n))if($R(s=JR(o,n)))r=PO(r,BR(),a.children);else{var u=Ka(a.children,zR(s));if(u){var c=u.getChild(HR(s));r=NO(r,BR(),c)}}}}}return r}function HO(e,t,n,r,i){if(r||i){var a=LO(e.visibleWrites,t);if(!i&&MO(a))return n;if(i||null!=n||AO(a,BR())){return FO(WO(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(eA(e.path,t)||eA(t,e.path))}),t),n||DA.EMPTY_NODE)}return null}var o=OO(e.visibleWrites,t);if(null!=o)return o;var s=LO(e.visibleWrites,t);return MO(s)?n:null!=n||AO(s,BR())?FO(s,n||DA.EMPTY_NODE):null}function KO(e,t,n,r){return HO(e.writeTree,e.treePath,t,n,r)}function GO(e,t){return function(e,t,n){var r=DA.EMPTY_NODE,i=OO(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(SA,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=LO(e.visibleWrites,t);return n.forEachChild(SA,(function(e,t){var n=FO(LO(a,new VR(e)),t);r=r.updateImmediateChild(e,n)})),DO(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return DO(LO(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function QO(e,t,n,r){return function(e,t,n,r,i){ka(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=YR(t,n);if(AO(e.visibleWrites,a))return null;var o=LO(e.visibleWrites,a);return MO(o)?i.getChild(n):FO(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function YO(e,t){return function(e,t){return OO(e.visibleWrites,t)}(e.writeTree,YR(e.treePath,t))}function $O(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=LO(e.visibleWrites,t),c=OO(u,BR());if(null!=c)s=c;else{if(null==n)return[];s=FO(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function JO(e,t,n){return function(e,t,n,r){var i=YR(t,n),a=OO(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?FO(LO(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function XO(e,t){return ZO(YR(e.treePath,t),e.writeTree)}function ZO(e,t){return{treePath:e,writeTree:t}}var eD=function(){function e(){dt(this,e),this.changeMap=new Map}return vt(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;ka("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ka(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,GA(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,KA(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,HA(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw _a("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,GA(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),tD=new(function(){function e(){dt(this,e)}return vt(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),nD=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;dt(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return vt(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new gO(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return JO(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:TO(this.viewCache_),i=$O(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function rD(e,t,n,r,i){var a,o,s=new eD;if(n.type===cO.OVERWRITE){var u=n;u.source.fromUser?a=oD(e,t,u.path,u.snap,r,i,s):(ka(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!$R(u.path),a=aD(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===cO.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=YR(n,r);sD(t,zR(c))&&(s=oD(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=YR(n,r);sD(t,zR(c))||(s=oD(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(ka(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=cD(e,t,c.path,c.children,r,i,o,s))}else if(n.type===cO.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=YO(r,n))return t;var s,u=new nD(r,t,i),c=t.eventCache.getNode();if($R(n)||".priority"===zR(n)){var l;if(t.serverCache.isFullyInitialized())l=KO(r,TO(t));else{var h=t.serverCache.getNode();ka(h instanceof DA,"serverChildren would be complete if leaf node"),l=GO(r,h)}l=l,s=e.filter.updateFullNode(c,l,a)}else{var f=zR(n),d=JO(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,HR(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,DA.EMPTY_NODE,HR(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=KO(r,TO(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=YO(r,BR()),bO(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=YO(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if($R(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return aD(e,t,n,u.getNode().getChild(n),i,a,s,o);if($R(n)){var c=new CO(null);return u.getNode().forEachChild(hA,(function(e,t){c=c.set(new VR(e),t)})),cD(e,t,n,c,i,a,s,o)}return t}var l=new CO(null);return r.foreach((function(e,t){var r=YR(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),cD(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==cO.LISTEN_COMPLETE)throw _a("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=xO(t,a.getNode(),a.isFullyInitialized()||$R(n),a.isFiltered());return iD(e,o,n,r,tD,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=EO(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(WA(EO(t)))}}(t,a,h),{viewCache:a,changes:h}}function iD(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=YO(r,n))return t;if($R(n))if(ka(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=TO(t),l=GO(r,c instanceof DA?c:DA.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=KO(r,TO(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=zR(n);if(".priority"===f){ka(1===WR(n),"Can't have a priority with additional path components");var d=u.getNode(),p=QO(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=HR(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=QO(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(y,m):u.getNode().getImmediateChild(f)}else v=JO(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,y,i,a):u.getNode()}}return bO(t,o,u.isFullyInitialized()||$R(n),e.filter.filtersNodes())}function aD(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if($R(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=zR(n);if(!c.isCompleteForPath(n)&&WR(n)>1)return t;var d=HR(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,tD,null)}var v=xO(t,u,c.isFullyInitialized()||$R(n),l.filtersNodes());return iD(e,v,n,i,new nD(i,v,a),s)}function oD(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new nD(i,t,a);if($R(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=bO(t,u,!0,e.filter.filtersNodes());else{var h=zR(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=bO(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=HR(n),p=c.getNode().getImmediateChild(h);if($R(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===KR(d)&&v.getChild(QR(d)).isEmpty()?v:v.updateChild(d,r):DA.EMPTY_NODE}if(p.equals(f))s=t;else s=bO(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function sD(e,t){return e.eventCache.isCompleteForChild(t)}function uD(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function cD(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=$R(n)?r:new CO(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=uD(0,t.serverCache.getNode().getImmediateChild(n),r);c=aD(e,c,new VR(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=uD(0,t.serverCache.getNode().getImmediateChild(n),r);c=aD(e,c,new VR(n),h,i,a,o,s)}})),c}var lD,hD=function(){function e(t,n){dt(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new QA(i.getIndex()),o=(r=i).loadsAllData()?new QA(r.getIndex()):r.hasLimit()?new $A(r):new YA(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(DA.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(DA.EMPTY_NODE,u.getNode(),null),h=new gO(c,s.isFullyInitialized(),a.filtersNodes()),f=new gO(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=wO(f,h),this.eventGenerator_=new kO(this.query_)}return vt(e,[{key:"query",get:function(){return this.query_}}]),e}();function fD(e,t){var n=TO(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!$R(t)&&!n.getImmediateChild(zR(t)).isEmpty())?n.getChild(t):null}function dD(e){return 0===e.eventRegistrations_.length}function pD(e,t,n){var r=[];if(n){ka(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function vD(e,t,n,r){t.type===cO.MERGE&&null!==t.source.queryId&&(ka(TO(e.viewCache_),"We should always have a full cache before handling merges"),ka(EO(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=rD(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,ka(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),ka(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),ka(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,yD(e,s.changes,s.viewCache.eventCache.getNode(),null)}function yD(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),_O(e,i,"child_removed",t,r,n),_O(e,i,"child_added",t,r,n),_O(e,i,"child_moved",a,r,n),_O(e,i,"child_changed",t,r,n),_O(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var mD,gD=vt((function e(){dt(this,e),this.views=new Map}));function kD(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return ka(null!=a,"SyncTree gave us an op for an invalid query."),vD(a,t,n,r)}var o,s=[],u=da(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(vD(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function _D(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=KO(n,i?r:null),u=!1;s?u=!0:r instanceof DA?(s=GO(n,r),u=!1):(s=DA.EMPTY_NODE,u=!1);var c=wO(new gO(s,u,!1),new gO(r,i,!1));return new hD(t,c)}return o}function wD(e,t,n,r,i,a){var o=_D(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(SA,(function(e,t){r.push(HA(e,t))})),n.isFullyInitialized()&&r.push(WA(n.getNode())),yD(e,r,n.getNode(),t)}(o,n)}function bD(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=CD(e);if("default"===i){var u,c=da(e.views.entries());try{for(c.s();!(u=c.n()).done;){var l=h(u.value,2),f=l[0],d=l[1];o=o.concat(pD(d,n,r)),dD(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(pD(p,n,r)),dD(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!CD(e)&&a.push(new(ka(lD,"Reference.ts has not been loaded"),lD)(t._repo,t._path)),{removed:a,events:o}}function xD(e){var t,n=[],r=da(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function ED(e,t){var n,r=null,i=da(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||fD(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function TD(e,t){if(t._queryParams.loadsAllData())return SD(e);var n=t._queryIdentifier;return e.views.get(n)}function ID(e,t){return null!=TD(e,t)}function CD(e){return null!=SD(e)}function SD(e){var t,n=da(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var ND=1,PD=vt((function e(t){dt(this,e),this.listenProvider_=t,this.syncPointTree_=new CO(null),this.pendingWriteTree_={visibleWrites:SO.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function RD(e,t,n,r,i){return function(e,t,n,r,i){ka(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=NO(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?jD(e,new yO({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function AD(e,t,n,r){!function(e,t,n,r){ka(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=PO(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=CO.fromObject(n);return jD(e,new mO({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function OD(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=qO(e.pendingWriteTree_,t),i=VO(e.pendingWriteTree_,t);if(i){var a=new CO(null);return null!=r.snap?a=a.set(BR(),!0):uR(r.children,(function(e){a=a.set(new VR(e),!0)})),jD(e,new pO(r.path,a,n))}return[]}function DD(e,t,n){return jD(e,new yO({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function LD(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||ID(a,t))){var s=bD(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;o=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return CD(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&CD(t))return[SD(t)];var r=[];return t&&(r=xD(t)),uR(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,y=BD(e,p);e.listenProvider_.startListening(QD(v),zD(e,v),y.hashFn,y.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(QD(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(WD(t));e.listenProvider_.stopListening(QD(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=WD(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,u)}return o}function MD(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=JR(e,r);i=i||ED(t,n),a=a||CD(t)}));var o,s=e.syncPointTree_.get(r);(s?(a=a||CD(s),i=i||ED(s,BR())):(s=new gD,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=i)?o=!0:(o=!1,i=DA.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=ED(t,BR());n&&(i=i.updateImmediateChild(e,n))})));var u=ID(s,t);if(!u&&!t._queryParams.loadsAllData()){var c=WD(t);ka(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=ND++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var h=wD(s,t,n,jO(e.pendingWriteTree_,r),i,o);if(!u&&!a){var f=TD(s,t);h=h.concat(function(e,t,n){var r=t._path,i=zD(e,t),a=BD(e,n),o=e.listenProvider_.startListening(QD(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)ka(!CD(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!$R(e)&&t&&CD(t))return[SD(t).query];var r=[];return t&&(r=r.concat(xD(t).map((function(e){return e.query})))),uR(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(QD(l),zD(e,l))}return o}(e,t,f))}return h}function FD(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=ED(n,JR(e,t));if(r)return r}));return HO(r,t,i,n,!0)}function UD(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=JR(e,n);r=r||ED(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||ED(i,BR()):(i=new gD,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new gO(r,!0,!1):null;return function(e){return EO(e.viewCache_)}(_D(i,t,jO(e.pendingWriteTree_,t._path),a?o.getNode():DA.EMPTY_NODE,a))}function jD(e,t){return qD(t,e.syncPointTree_,null,jO(e.pendingWriteTree_,BR()))}function qD(e,t,n,r){if($R(e.path))return VD(e,t,n,r);var i=t.get(BR());null==n&&null!=i&&(n=ED(i,BR()));var a=[],o=zR(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=XO(r,o);a=a.concat(qD(s,u,c,l))}return i&&(a=a.concat(kD(i,e,r,n))),a}function VD(e,t,n,r){var i=t.get(BR());null==n&&null!=i&&(n=ED(i,BR()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=XO(r,t),u=e.operationForChild(t);u&&(a=a.concat(VD(u,i,o,s)))})),i&&(a=a.concat(kD(i,e,r,n))),a}function BD(e,t){var n=t.query,r=zD(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||DA.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=HD(e,n);if(r){var i=KD(r),a=i.path,o=i.queryId,s=JR(a,t);return GD(e,a,new vO(fO(o),s))}return[]}(e,n._path,r):function(e,t){return jD(e,new vO({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return LD(e,n,null,i)}}}function zD(e,t){var n=WD(t);return e.queryToTagMap.get(n)}function WD(e){return e._path.toString()+"$"+e._queryIdentifier}function HD(e,t){return e.tagToQueryMap.get(t)}function KD(e){var t=e.indexOf("$");return ka(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new VR(e.substr(0,t))}}function GD(e,t,n){var r=e.syncPointTree_.get(t);return ka(r,"Missing sync point for query tag that we're tracking"),kD(r,n,jO(e.pendingWriteTree_,t),null)}function QD(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(ka(mD,"Reference.ts has not been loaded"),mD)(e._repo,e._path):e}var YD=function(){function e(t){dt(this,e),this.node_=t}return vt(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),$D=function(){function e(t,n){dt(this,e),this.syncTree_=t,this.path_=n}return vt(e,[{key:"getImmediateChild",value:function(t){var n=YR(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return FD(this.syncTree_,this.path_)}}]),e}(),JD=function(e,t,n){return e&&"object"===typeof e?(ka(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?XD(e[".sv"],t,n):"object"===typeof e[".sv"]?ZD(e[".sv"],t):void ka(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},XD=function(e,t,n){if("timestamp"===e)return n.timestamp;ka(!1,"Unexpected server value: "+e)},ZD=function(e,t,n){e.hasOwnProperty("increment")||ka(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&ka(!1,"Unexpected increment value: "+r);var i=t.node();if(ka(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},eL=function(e,t,n,r){return nL(t,new $D(n,e),r)},tL=function(e,t,n){return nL(e,new YD(t),n)};function nL(e,t,n){var r,i=e.getPriority().val(),a=JD(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=JD(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new EA(s,MA(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new EA(a))),u.forEachChild(SA,(function(e,i){var a=nL(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var rL=vt((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};dt(this,e),this.name=t,this.parent=n,this.node=r}));function iL(e,t){for(var n=t instanceof VR?t:new VR(t),r=e,i=zR(n);null!==i;){var a=Ka(r.node.children,i)||{children:{},childCount:0};r=new rL(i,r,a),i=zR(n=HR(n))}return r}function aL(e){return e.node.value}function oL(e,t){e.node.value=t,hL(e)}function sL(e){return e.node.childCount>0}function uL(e,t){uR(e.node.children,(function(n,r){t(new rL(n,e,r))}))}function cL(e,t,n,r){n&&!r&&t(e),uL(e,(function(e){cL(e,t,!0,r)})),n&&r&&t(e)}function lL(e){return new VR(null===e.parent?e.name:lL(e.parent)+"/"+e.name)}function hL(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===aL(e)&&!sL(e)}(n),i=Ha(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,hL(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,hL(e))}(e.parent,e.name,e)}var fL=/[\[\].#$\/\u0000-\u001F\u007F]/,dL=/[\[\].#$\u0000-\u001F\u007F]/,pL=10485760,vL=function(e){return"string"===typeof e&&0!==e.length&&!fL.test(e)},yL=function(e){return"string"===typeof e&&0!==e.length&&!dL.test(e)},mL=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!eR(e)||e&&"object"===typeof e&&Ha(e,".sv")},gL=function(e,t,n,r){r&&void 0===t||kL(ao(e,"value"),t,n)},kL=function e(t,n,r){var i=r instanceof VR?new tA(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+rA(i));if("function"===typeof n)throw new Error(t+"contains a function "+rA(i)+" with contents = "+n.toString());if(eR(n))throw new Error(t+"contains "+n.toString()+" "+rA(i));if("string"===typeof n&&n.length>pL/3&&uo(n)>pL)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+rA(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(uR(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!vL(n)))throw new Error(t+" contains an invalid key ("+n+") "+rA(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=uo(u),nA(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=uo(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+rA(i)+" in addition to actual children.")}},_L=function(e,t,n,r){if(!r||void 0!==t){var i=ao(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];uR(t,(function(e,t){var r=new VR(e);if(kL(i,t,YR(n,r)),".priority"===KR(r)&&!mL(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=GR(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!vL(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(XR);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&eA(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},wL=function(e,t,n){if(!n||void 0!==t){if(eR(t))throw new Error(ao(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!mL(t))throw new Error(ao(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},bL=function(e,t,n,r){if((!r||void 0!==n)&&!vL(n))throw new Error(ao(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},xL=function(e,t,n,r){if((!r||void 0!==n)&&!yL(n))throw new Error(ao(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},EL=function(e,t){if(".info"===zR(t))throw new Error(e+" failed = Can't modify data under /.info/")},TL=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!vL(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),yL(e)}(n))throw new Error(ao(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},IL=vt((function e(){dt(this,e),this.eventLists_=[],this.recursionDepth_=0}));function CL(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||ZR(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function SL(e,t,n){CL(e,n),PL(e,(function(e){return ZR(e,t)}))}function NL(e,t,n){CL(e,n),PL(e,(function(e){return eA(e,t)||eA(t,e)}))}function PL(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(RL(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function RL(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();KP&&YP("event: "+n.toString()),pR(r)}}}var AL="repo_interrupt",OL=function(){function e(t,n,r,i){dt(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new IL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=aO(),this.transactionQueueTree_=new rL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return vt(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function DL(e,t,n){if(e.stats_=SR(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new rO(e.repoInfo_,(function(t,n,r,i){FL(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return UL(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{za(n)}catch(kz){throw new Error("Invalid authOverride provided: "+kz)}}e.persistentConnection_=new oA(e.repoInfo_,t,(function(t,n,r,i){FL(e,t,n,r,i)}),(function(t){UL(e,t)}),(function(t){!function(e,t){uR(t,(function(t,n){jL(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return CR[n]||(CR[n]=t()),CR[n]}(e.repoInfo_,(function(){return new hO(e.stats_,e.server_)})),e.infoData_=new iO,e.infoSyncTree_=new PD({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=DD(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),jL(e,"connected",!1),e.serverSyncTree_=new PD({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);NL(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function LL(e){var t=e.infoData_.getNode(new VR(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ML(e){return(t=(t={timestamp:LL(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function FL(e,t,n,r,i){e.dataUpdateCount++;var a=new VR(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=Qa(n,(function(e){return MA(e)}));o=function(e,t,n,r){var i=HD(e,r);if(i){var a=KD(i),o=a.path,s=a.queryId,u=JR(o,t),c=CO.fromObject(n);return GD(e,o,new mO(fO(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=MA(n);o=function(e,t,n,r){var i=HD(e,r);if(null!=i){var a=KD(i),o=a.path,s=a.queryId,u=JR(o,t);return GD(e,o,new yO(fO(s),u,n))}return[]}(e.serverSyncTree_,a,u,i)}else if(r){var c=Qa(n,(function(e){return MA(e)}));o=function(e,t,n){var r=CO.fromObject(n);return jD(e,new mO({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=MA(n);o=DD(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=JL(e,a)),NL(e.eventQueue_,h,o)}function UL(e,t){jL(e,"connected",t),!1===t&&function(e){KL(e,"onDisconnectEvents");var t=ML(e),n=aO();uO(e.onDisconnect_,BR(),(function(r,i){var a=eL(r,i,e.serverSyncTree_,t);oO(n,r,a)}));var r=[];uO(n,BR(),(function(t,n){r=r.concat(DD(e.serverSyncTree_,t,n));var i=nM(e,t);JL(e,i)})),e.onDisconnect_=aO(),NL(e.eventQueue_,BR(),r)}(e)}function jL(e,t,n){var r=new VR("/.info/"+t),i=MA(n);e.infoData_.updateSnapshot(r,i);var a=DD(e.infoSyncTree_,r,i);NL(e.eventQueue_,r,a)}function qL(e){return e.nextWriteId_++}function VL(e,t,n,r,i){KL(e,"set",{path:t.toString(),value:n,priority:r});var a=ML(e),o=MA(n,r),s=FD(e.serverSyncTree_,t),u=tL(o,s,a),c=qL(e),l=RD(e.serverSyncTree_,t,u,c,!0);CL(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||ZP("set at "+t+" failed: "+n);var o=OD(e.serverSyncTree_,c,!a);NL(e.eventQueue_,t,o),GL(e,i,n,r)}));var h=nM(e,t);JL(e,h),NL(e.eventQueue_,h,[])}function BL(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&sO(e.onDisconnect_,t),GL(e,n,r,i)}))}function zL(e,t,n,r){var i=MA(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&oO(e.onDisconnect_,t,i),GL(e,r,n,a)}))}function WL(e,t,n){var r;r=".info"===zR(t._path)?LD(e.infoSyncTree_,t,n):LD(e.serverSyncTree_,t,n),SL(e.eventQueue_,t._path,r)}function HL(e){e.persistentConnection_&&e.persistentConnection_.interrupt(AL)}function KL(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];YP.apply(void 0,[t].concat(r))}function GL(e,t,n,r){t&&pR((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function QL(e,t,n){return FD(e.serverSyncTree_,t,n)||DA.EMPTY_NODE}function YL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||tM(e,t),aL(t)){var n=ZL(e,t);ka(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&$L(e,lL(t),n)}else sL(t)&&uL(t,(function(t){YL(e,t)}))}function $L(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=QL(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];ka(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=JR(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){KL(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(OD(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);tM(e,iL(e.transactionQueueTree_,t)),YL(e,e.transactionQueueTree_),NL(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)pR(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{ZP("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}JL(e,t)}}),o)}function JL(e,t){var n=XL(e,t),r=lL(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=JR(n,u.path),l=!1,h=void 0;if(ka(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(OD(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(OD(e.serverSyncTree_,u.currentWriteId,!0));else{var f=QL(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){kL("transaction failed: Data returned ",d,u.path);var p=MA(d);"object"===typeof d&&null!=d&&Ha(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,y=ML(e),m=tL(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=qL(e),o.splice(o.indexOf(v),1),i=(i=i.concat(RD(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(OD(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(OD(e.serverSyncTree_,u.currentWriteId,!0))}NL(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);tM(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)pR(r[c]);YL(e,e.transactionQueueTree_)}(e,ZL(e,n),r),r}function XL(e,t){var n,r=e.transactionQueueTree_;for(n=zR(t);null!==n&&void 0===aL(r);)r=iL(r,n),n=zR(t=HR(t));return r}function ZL(e,t){var n=[];return eM(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function eM(e,t,n){var r=aL(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);uL(t,(function(t){eM(e,t,n)}))}function tM(e,t){var n=aL(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,oL(t,n.length>0?n:void 0)}uL(t,(function(t){tM(e,t)}))}function nM(e,t){var n=lL(XL(e,t)),r=iL(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){rM(e,t)})),rM(e,r),cL(r,(function(t){rM(e,t)})),n}function rM(e,t){var n=aL(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(ka(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(ka(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(OD(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?oL(t,void 0):n.length=a+1,NL(e.eventQueue_,lL(t),i);for(var s=0;s<r.length;s++)pR(r[s])}}var iM=function(e,t){var n=aM(e),r=n.namespace;"firebase.com"===n.domain&&XP(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||XP("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ZP("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new xR(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new VR(n.pathString)}},aM=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(kz){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=da(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):ZP("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},oM=function(){function e(t,n,r,i){dt(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return vt(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+za(this.snapshot.exportVal())}}]),e}(),sM=function(){function e(t,n,r){dt(this,e),this.eventRegistration=t,this.error=n,this.path=r}return vt(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),uM=function(){function e(t,n){dt(this,e),this.snapshotCallback=t,this.cancelCallback=n}return vt(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return ka(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),cM=function(){function e(t,n){dt(this,e),this._repo=t,this._path=n}return vt(e,[{key:"cancel",value:function(){var e=new Sa;return BL(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){EL("OnDisconnect.remove",this._path);var e=new Sa;return zL(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){EL("OnDisconnect.set",this._path),gL("OnDisconnect.set",e,this._path,!1);var t=new Sa;return zL(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){EL("OnDisconnect.setWithPriority",this._path),gL("OnDisconnect.setWithPriority",e,this._path,!1),wL("OnDisconnect.setWithPriority",t,!1);var n=new Sa;return function(e,t,n,r,i){var a=MA(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&oO(e.onDisconnect_,t,a),GL(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){EL("OnDisconnect.update",this._path),_L("OnDisconnect.update",e,this._path,!1);var t=new Sa;return function(e,t,n,r){if(Ga(n))return YP("onDisconnect().update() called with empty data.  Don't do anything."),void GL(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&uR(n,(function(n,r){var i=MA(r);oO(e.onDisconnect_,YR(t,n),i)})),GL(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),lM=function(){function e(t,n,r,i){dt(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return vt(e,[{key:"key",get:function(){return $R(this._path)?null:KR(this._path)}},{key:"ref",get:function(){return new pM(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=nO(this._queryParams),t=oR(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return nO(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=co(t))instanceof e))return!1;var n=this._repo===t._repo,r=ZR(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function hM(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function fM(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===hA){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==tR)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==nR)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===SA){if(null!=t&&!mL(t)||null!=n&&!mL(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ka(e.getIndex()instanceof FA||e.getIndex()===jA,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function dM(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var pM=function(e){rn(n,e);var t=cn(n);function n(e,r){return dt(this,n),t.call(this,e,r,new JA,!1)}return vt(n,[{key:"parent",get:function(){var e=QR(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(lM),vM=function(){function e(t,n,r){dt(this,e),this._node=t,this.ref=n,this._index=r}return vt(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new VR(t),r=gM(this.ref,t);return new e(this._node.getChild(n),r,SA)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,gM(n.ref,r),SA))}))}},{key:"hasChild",value:function(e){var t=new VR(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function yM(e,t){return(e=co(e))._checkNotDeleted("ref"),void 0!==t?gM(e._root,t):e._root}function mM(e,t){(e=co(e))._checkNotDeleted("refFromURL");var n=iM(t,e._repo.repoInfo_.nodeAdmin);TL("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||XP("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),yM(e,n.path.toString())}function gM(e,t){var n,r,i,a;return null===zR((e=co(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),xL(n,r,i,a)):xL("child","path",t,!1),new pM(e._repo,YR(e._path,t))}function kM(e,t){e=co(e),EL("push",e._path),gL("push",t,e._path,!0);var n,r=LL(e._repo),i=VA(r),a=gM(e,i),o=gM(e,i);return n=null!=t?wM(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function _M(e){return EL("remove",e._path),wM(e,null)}function wM(e,t){e=co(e),EL("set",e._path),gL("set",t,e._path,!1);var n=new Sa;return VL(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function bM(e,t){e=co(e),EL("setPriority",e._path),wL("setPriority",t,!1);var n=new Sa;return VL(e._repo,YR(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function xM(e,t,n){if(EL("setWithPriority",e._path),gL("setWithPriority",t,e._path,!1),wL("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Sa;return VL(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function EM(e,t){_L("update",t,e._path,!1);var n=new Sa;return function(e,t,n,r){KL(e,"update",{path:t.toString(),value:n});var i=!0,a=ML(e),o={};if(uR(n,(function(n,r){i=!1,o[n]=eL(YR(t,n),MA(r),e.serverSyncTree_,a)})),i)YP("update() called with empty data.  Don't do anything."),GL(0,r,"ok",void 0);else{var s=qL(e),u=AD(e.serverSyncTree_,t,o,s);CL(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||ZP("update at "+t+" failed: "+n);var o=OD(e.serverSyncTree_,s,!a),u=o.length>0?JL(e,t):t;NL(e.eventQueue_,u,o),GL(0,r,n,i)})),uR(n,(function(n){var r=nM(e,YR(t,n));JL(e,r)})),NL(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function TM(e){return function(e,t){var n=UD(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=MA(n).withIndex(t._queryParams.getIndex()),i=DD(e.serverSyncTree_,t._path,r);return SL(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return KL(e,"get for query "+za(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=co(e))._repo,e).then((function(t){return new vM(t,new pM(e._repo,e._path),e._queryParams.getIndex())}))}var IM=function(){function e(t){dt(this,e),this.callbackContext=t}return vt(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new oM("value",this,new vM(e.snapshotNode,new pM(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new sM(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),CM=function(){function e(t,n){dt(this,e),this.eventType=t,this.callbackContext=n}return vt(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new sM(this,e,t):null}},{key:"createEvent",value:function(e,t){ka(null!=e.childName,"Child events should have a childName.");var n=gM(new pM(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new oM(e.type,this,new vM(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function SM(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){WL(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new uM(n,a||void 0),c="value"===t?new IM(u):new CM(t,u);return function(e,t,n){var r;r=".info"===zR(t._path)?MD(e.infoSyncTree_,t,n):MD(e.serverSyncTree_,t,n),SL(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return WL(e._repo,e,c)}}function NM(e,t,n,r){return SM(e,"value",t,n,r)}function PM(e,t,n,r){return SM(e,"child_added",t,n,r)}function RM(e,t,n,r){return SM(e,"child_changed",t,n,r)}function AM(e,t,n,r){return SM(e,"child_moved",t,n,r)}function OM(e,t,n,r){return SM(e,"child_removed",t,n,r)}function DM(e,t,n){var r=null,i=n?new uM(n):null;"value"===t?r=new IM(i):t&&(r=new CM(t,i)),WL(e._repo,e,r)}var LM=vt((function e(){dt(this,e)})),MM=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this))._value=e,i._key=r,i}return vt(n,[{key:"_apply",value:function(e){gL("endAt",this._value,e._path,!0);var t=ZA(e._queryParams,this._value,this._key);if(dM(t),fM(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new lM(e._repo,e._path,t,e._orderByCalled)}}]),n}(LM);function FM(e,t){return bL("endAt","key",t,!0),new MM(e,t)}var UM=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this))._value=e,i._key=r,i}return vt(n,[{key:"_apply",value:function(e){gL("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===hA?("string"===typeof t&&(t=zA(t)),r=ZA(e,t,n)):r=ZA(e,t,null==n?tR:zA(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(dM(t),fM(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new lM(e._repo,e._path,t,e._orderByCalled)}}]),n}(LM);function jM(e,t){return bL("endBefore","key",t,!0),new UM(e,t)}var qM=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this))._value=e,i._key=r,i}return vt(n,[{key:"_apply",value:function(e){gL("startAt",this._value,e._path,!0);var t=XA(e._queryParams,this._value,this._key);if(dM(t),fM(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new lM(e._repo,e._path,t,e._orderByCalled)}}]),n}(LM);function VM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return bL("startAt","key",t,!0),new qM(e,t)}var BM=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this))._value=e,i._key=r,i}return vt(n,[{key:"_apply",value:function(e){gL("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===hA?("string"===typeof t&&(t=BA(t)),r=XA(e,t,n)):r=XA(e,t,null==n?nR:BA(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(dM(t),fM(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new lM(e._repo,e._path,t,e._orderByCalled)}}]),n}(LM);function zM(e,t){return bL("startAfter","key",t,!0),new BM(e,t)}var WM=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this))._limit=e,r}return vt(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new lM(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(LM);function HM(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new WM(e)}var KM=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this))._limit=e,r}return vt(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new lM(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(LM);function GM(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new KM(e)}var QM=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this))._path=e,r}return vt(n,[{key:"_apply",value:function(e){hM(e,"orderByChild");var t=new VR(this._path);if($R(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new FA(t),r=eO(e._queryParams,n);return fM(r),new lM(e._repo,e._path,r,!0)}}]),n}(LM);function YM(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xL("orderByChild","path",e,!1),new QM(e)}var $M=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"_apply",value:function(e){hM(e,"orderByKey");var t=eO(e._queryParams,hA);return fM(t),new lM(e._repo,e._path,t,!0)}}]),n}(LM);function JM(){return new $M}var XM=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"_apply",value:function(e){hM(e,"orderByPriority");var t=eO(e._queryParams,SA);return fM(t),new lM(e._repo,e._path,t,!0)}}]),n}(LM);function ZM(){return new XM}var eF=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"_apply",value:function(e){hM(e,"orderByValue");var t=eO(e._queryParams,jA);return fM(t),new lM(e._repo,e._path,t,!0)}}]),n}(LM);function tF(){return new eF}var nF=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this))._value=e,i._key=r,i}return vt(n,[{key:"_apply",value:function(e){if(gL("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new MM(this._value,this._key)._apply(new qM(this._value,this._key)._apply(e))}}]),n}(LM);function rF(e,t){return bL("equalTo","key",t,!0),new nF(e,t)}function iF(e){for(var t=co(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];t=s._apply(t)}return t}!function(e){ka(!lD,"__referenceConstructor has already been defined"),lD=e}(pM),function(e){ka(!mD,"__referenceConstructor has already been defined"),mD=e}(pM);var aF={},oF=!1;function sF(e,t,n,r){e.repoInfo_=new xR("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function uF(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||XP("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),YP("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=iM(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/TeenCafe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=iM(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new gR(gR.OWNER):new mR(e.name,e.options,t);TL("Invalid Firebase Database URL",s),$R(s.path)||XP("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=aF[t.name];i||(i={},aF[t.name]=i);var a=i[e.toURLString()];a&&XP("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new OL(e,oF,n,r),i[e.toURLString()]=a,a}(u,e,l,new yR(e.name,n));return new cF(h,e)}var cF=function(){function e(t,n){dt(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return vt(e,[{key:"_repo",get:function(){return this._instanceStarted||(DL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new pM(this._repo,BR())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=aF[t];n&&n[e.key]===e||XP("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),HL(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&XP("Cannot call "+e+" on a deleted database.")}}]),e}();function lF(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=co(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&XP("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&XP('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new gR(gR.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Na(r.mockUserToken,e.app.options.projectId);a=new gR(o)}sF(i,t,n,a)}function hF(e){(e=co(e))._checkNotDeleted("goOffline"),HL(e._repo)}function fF(e){var t;(e=co(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(AL)}function dF(e,t){QP(e,t)}var pF={".sv":"timestamp"};var vF=function(){function e(t,n){dt(this,e),this.committed=t,this.snapshot=n}return vt(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function yF(e,t,n){var r;if(e=co(e),EL("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new Sa,o=NM(e,(function(){}));return function(e,t,n,r,i,a){KL(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:zP(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=QL(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{kL("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=iL(e.transactionQueueTree_,t),h=aL(l)||[];h.push(o),oL(l,h),"object"===typeof u&&null!==u&&Ha(u,".priority")?(c=Ka(u,".priority"),ka(mL(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(FD(e.serverSyncTree_,t)||DA.EMPTY_NODE).getPriority().val();var f=ML(e),d=MA(u,c),p=tL(d,s,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=qL(e);var v=RD(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);NL(e.eventQueue_,t,v),YL(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new vM(r,new pM(e._repo,e._path),SA),a.resolve(new vF(n,i)))}),o,i),a.promise}oA.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},oA.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){MP(Wo),Lo(new lo("database",(function(e,t){var n=t.instanceIdentifier;return uF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),$o(OP,DP,e),$o(OP,DP,"esm2017")}();var mF=new Eo("@firebase/database-compat"),gF=function(e){var t="FIREBASE WARNING: "+e;mF.warn(t)},kF=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(ao(e,t)+"must be a boolean.")},_F=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ao(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},wF=function(){function e(t){dt(this,e),this._delegate=t}return vt(e,[{key:"cancel",value:function(e){io("OnDisconnect.cancel",0,1,arguments.length),oo("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){io("OnDisconnect.remove",0,1,arguments.length),oo("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){io("OnDisconnect.set",1,2,arguments.length),oo("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){io("OnDisconnect.setWithPriority",2,3,arguments.length),oo("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(io("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,gF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oo("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),bF=function(){function e(t,n){dt(this,e),this.committed=t,this.snapshot=n}return vt(e,[{key:"toJSON",value:function(){return io("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),xF=function(){function e(t,n){dt(this,e),this._database=t,this._delegate=n}return vt(e,[{key:"val",value:function(){return io("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return io("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return io("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return io("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return io("DataSnapshot.child",0,1,arguments.length),t=String(t),xL("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return io("DataSnapshot.hasChild",1,1,arguments.length),xL("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return io("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return io("DataSnapshot.forEach",1,1,arguments.length),oo("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return io("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return io("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return io("DataSnapshot.ref",0,0,arguments.length),new TF(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),EF=function(){function e(t,n){dt(this,e),this.database=t,this._delegate=n}return vt(e,[{key:"on",value:function(t,n,r,i){var a,o=this;io("Query.on",2,4,arguments.length),oo("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new xF(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return NM(this._delegate,u,c),n;case"child_added":return PM(this._delegate,u,c),n;case"child_removed":return OM(this._delegate,u,c),n;case"child_changed":return RM(this._delegate,u,c),n;case"child_moved":return AM(this._delegate,u,c),n;default:throw new Error(ao("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(io("Query.off",0,3,arguments.length),_F("Query.off",e,!0),oo("Query.off","callback",t,!0),so("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,DM(this._delegate,e,r)}else DM(this._delegate,e)}},{key:"get",value:function(){var e=this;return TM(this._delegate).then((function(t){return new xF(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;io("Query.once",1,4,arguments.length),oo("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new Sa,u=function(e,t){var r=new xF(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":NM(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":PM(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":OM(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":RM(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":AM(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(ao("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return io("Query.limitToFirst",1,1,arguments.length),new e(this.database,iF(this._delegate,HM(t)))}},{key:"limitToLast",value:function(t){return io("Query.limitToLast",1,1,arguments.length),new e(this.database,iF(this._delegate,GM(t)))}},{key:"orderByChild",value:function(t){return io("Query.orderByChild",1,1,arguments.length),new e(this.database,iF(this._delegate,YM(t)))}},{key:"orderByKey",value:function(){return io("Query.orderByKey",0,0,arguments.length),new e(this.database,iF(this._delegate,JM()))}},{key:"orderByPriority",value:function(){return io("Query.orderByPriority",0,0,arguments.length),new e(this.database,iF(this._delegate,ZM()))}},{key:"orderByValue",value:function(){return io("Query.orderByValue",0,0,arguments.length),new e(this.database,iF(this._delegate,tF()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return io("Query.startAt",0,2,arguments.length),new e(this.database,iF(this._delegate,VM(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return io("Query.startAfter",0,2,arguments.length),new e(this.database,iF(this._delegate,zM(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return io("Query.endAt",0,2,arguments.length),new e(this.database,iF(this._delegate,FM(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return io("Query.endBefore",0,2,arguments.length),new e(this.database,iF(this._delegate,jM(t,n)))}},{key:"equalTo",value:function(t,n){return io("Query.equalTo",1,2,arguments.length),new e(this.database,iF(this._delegate,rF(t,n)))}},{key:"toString",value:function(){return io("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return io("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(io("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new TF(this.database,new pM(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,oo(e,"cancel",r.cancel,!0),r.context=n,so(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(ao(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),TF=function(e){rn(n,e);var t=cn(n);function n(e,r){var i;return dt(this,n),(i=t.call(this,e,new lM(r._repo,r._path,new JA,!1))).database=e,i._delegate=r,i}return vt(n,[{key:"getKey",value:function(){return io("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return io("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,gM(this._delegate,e))}},{key:"getParent",value:function(){io("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return io("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){io("Reference.set",1,2,arguments.length),oo("Reference.set","onComplete",t,!0);var n=wM(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(io("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,gF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}EL("Reference.update",this._delegate._path),oo("Reference.update","onComplete",t,!0);var i=EM(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){io("Reference.setWithPriority",2,3,arguments.length),oo("Reference.setWithPriority","onComplete",n,!0);var r=xM(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){io("Reference.remove",0,1,arguments.length),oo("Reference.remove","onComplete",e,!0);var t=_M(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;io("Reference.transaction",1,3,arguments.length),oo("Reference.transaction","transactionUpdate",e,!1),oo("Reference.transaction","onComplete",t,!0),kF("Reference.transaction","applyLocally",n,!0);var i=yF(this._delegate,e,{applyLocally:n}).then((function(e){return new bF(e.committed,new xF(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){io("Reference.setPriority",1,2,arguments.length),oo("Reference.setPriority","onComplete",t,!0);var n=bM(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;io("Reference.push",0,2,arguments.length),oo("Reference.push","onComplete",t,!0);var i=kM(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return EL("Reference.onDisconnect",this._delegate._path),new wF(new cM(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(EF),IF=function(){function e(t,n){var r=this;dt(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return vt(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};lF(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(io("database.ref",0,1,arguments.length),e instanceof TF){var t=mM(this._delegate,e.toString());return new TF(this,t)}var n=yM(this._delegate,e);return new TF(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";io(t,1,1,arguments.length);var n=mM(this._delegate,e);return new TF(this,n)}},{key:"goOffline",value:function(){return io("database.goOffline",0,0,arguments.length),hF(this._delegate)}},{key:"goOnline",value:function(){return io("database.goOnline",0,0,arguments.length),fF(this._delegate)}}]),e}();IF.ServerValue={TIMESTAMP:pF,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var CF=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;MP(r);var u=new fo("auth-internal",new yo("database-standalone"));return u.setComponent(new lo("auth-internal",(function(){return i}),"PRIVATE")),{instance:new IF(uF(t,u,void 0,n,s),t),namespace:a}}}),SF=IF.ServerValue;!function(e){e.INTERNAL.registerComponent(new lo("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new IF(i,r)}),"PUBLIC").setServiceProps({Reference:TF,Query:EF,Database:IF,DataSnapshot:xF,enableLogging:dF,INTERNAL:CF,ServerValue:SF}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.1.5")}(as);as.initializeApp({apiKey:"AIzaSyBYHgF6ZWUNLQgq1kZHh5k_7T9p6E5MNf0",authDomain:"a-dev-auth.firebaseapp.com",projectId:"a-dev-auth",storageBucket:"a-dev-auth.appspot.com",messagingSenderId:"389257160182",appId:"1:389257160182:web:a2eabb212d76b596ff13d7",measurementId:"G-BMT4JTXZYZ"}).database();var NF=!1,PF=!1,RF="${JSCORE_VERSION}",AF=function(e,t){if(!e)throw OF(t)},OF=function(e){return new Error("Firebase Database ("+RF+") INTERNAL ASSERT FAILED: "+e)},DF=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},LF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(DF(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},MF=function(e){var t=DF(e);return LF.encodeByteArray(t,!0)},FF=function(e){try{return LF.decodeString(e,!0)}catch(kz){console.error("base64Decode failed: ",kz)}return null};function UF(e){return jF(void 0,e)}function jF(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&qF(n)&&(e[n]=jF(e[n],t[n]));return e}function qF(e){return"__proto__"!==e}var VF=function(){function e(){var t=this;dt(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return vt(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function BF(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function zF(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(BF())}function WF(){return!0===NF||!0===PF}var HF=function(e){rn(n,e);var t=cn(n);function n(e,r,i){var a;return dt(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(sn(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(sn(a),KF.prototype.create),a}return vt(n)}(va(Error)),KF=function(){function e(t,n,r){dt(this,e),this.service=t,this.serviceName=n,this.errors=r}return vt(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?GF(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new HF(n,a,t);return o}}]),e}();function GF(e,t){return e.replace(QF,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var QF=/\{\$([^}]+)}/g;function YF(e){return JSON.parse(e)}function $F(e){return JSON.stringify(e)}var JF=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=YF(FF(a[0])||""),n=YF(FF(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(kz){}return{header:t,claims:n,data:r,signature:i}};function XF(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ZF(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function eU(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function tU(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function nU(e){for(var t=[],n=function(){var e=h(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}var rU=function(){function e(){dt(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return vt(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function iU(e,t){return"".concat(e," failed: ").concat(t," argument ")}var aU=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var oU=function(){function e(t,n,r){dt(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return vt(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}();var sU,uU,cU=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(uU||(uU={}));var lU,hU,fU={debug:uU.DEBUG,verbose:uU.VERBOSE,info:uU.INFO,warn:uU.WARN,error:uU.ERROR,silent:uU.SILENT},dU=uU.INFO,pU=(i(sU={},uU.DEBUG,"log"),i(sU,uU.VERBOSE,"log"),i(sU,uU.INFO,"info"),i(sU,uU.WARN,"warn"),i(sU,uU.ERROR,"error"),sU),vU=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=pU[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},yU=function(){function e(t){dt(this,e),this.name=t,this._logLevel=dU,this._logHandler=vU,this._userLogHandler=null,cU.push(this)}return vt(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in uU))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?fU[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,uU.DEBUG].concat(t)),this._logHandler.apply(this,[this,uU.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,uU.VERBOSE].concat(t)),this._logHandler.apply(this,[this,uU.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,uU.INFO].concat(t)),this._logHandler.apply(this,[this,uU.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,uU.WARN].concat(t)),this._logHandler.apply(this,[this,uU.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,uU.ERROR].concat(t)),this._logHandler.apply(this,[this,uU.ERROR].concat(t))}}]),e}();var mU=function(){function e(t){dt(this,e),this.container=t}return vt(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var gU="@firebase/app",kU="0.7.8",_U=new yU("@firebase/app"),wU=(i(lU={},gU,"fire-core"),i(lU,"@firebase/app-compat","fire-core-compat"),i(lU,"@firebase/analytics","fire-analytics"),i(lU,"@firebase/analytics-compat","fire-analytics-compat"),i(lU,"@firebase/app-check","fire-app-check"),i(lU,"@firebase/app-check-compat","fire-app-check-compat"),i(lU,"@firebase/auth","fire-auth"),i(lU,"@firebase/auth-compat","fire-auth-compat"),i(lU,"@firebase/database","fire-rtdb"),i(lU,"@firebase/database-compat","fire-rtdb-compat"),i(lU,"@firebase/functions","fire-fn"),i(lU,"@firebase/functions-compat","fire-fn-compat"),i(lU,"@firebase/installations","fire-iid"),i(lU,"@firebase/installations-compat","fire-iid-compat"),i(lU,"@firebase/messaging","fire-fcm"),i(lU,"@firebase/messaging-compat","fire-fcm-compat"),i(lU,"@firebase/performance","fire-perf"),i(lU,"@firebase/performance-compat","fire-perf-compat"),i(lU,"@firebase/remote-config","fire-rc"),i(lU,"@firebase/remote-config-compat","fire-rc-compat"),i(lU,"@firebase/storage","fire-gcs"),i(lU,"@firebase/storage-compat","fire-gcs-compat"),i(lU,"@firebase/firestore","fire-fst"),i(lU,"@firebase/firestore-compat","fire-fst-compat"),i(lU,"fire-js","fire-js"),i(lU,"firebase","fire-js-all"),lU),bU=new Map,xU=new Map;function EU(e,t){try{e.container.addComponent(t)}catch(kz){_U.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),kz)}}function TU(e){var t=e.name;if(xU.has(t))return _U.debug("There were multiple attempts to register component ".concat(t,".")),!1;xU.set(t,e);var n,r=da(bU.values());try{for(r.s();!(n=r.n()).done;){EU(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}var IU=(i(hU={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(hU,"bad-app-name","Illegal App name: '{$appName}"),i(hU,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),i(hU,"app-deleted","Firebase App named '{$appName}' already deleted"),i(hU,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),i(hU,"invalid-log-argument","First argument to `onLog` must be null or a function."),hU);new KF("app","Firebase",IU);function CU(e,t,n){var r,i=null!==(r=wU[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void _U.warn(s.join(" "))}TU(new oU("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}!function(e){TU(new oU("platform-logger",(function(e){return new mU(e)}),"PRIVATE")),CU(gU,kU,e),CU(gU,kU,"esm2017"),CU("fire-js","")}("");var SU="@firebase/database",NU="0.12.4",PU="";var RU=function(){function e(t){dt(this,e),this.domStorage_=t,this.prefix_="firebase:"}return vt(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$F(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:YF(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),AU=function(){function e(){dt(this,e),this.cache_={},this.isInMemoryStorage=!0}return vt(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return XF(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),OU=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new RU(t)}}catch(kz){}return new AU},DU=OU("localStorage"),LU=OU("sessionStorage"),MU=new yU("@firebase/database"),FU=function(){var e=1;return function(){return e++}}(),UU=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,AF(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new rU;n.update(t);var r=n.digest();return LF.encodeByteArray(r)},jU=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?$F(r):r,t+=" "}return t},qU=null,VU=!0,BU=function(e,t){AF(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(MU.logLevel=uU.VERBOSE,qU=MU.log.bind(MU),t&&LU.set("logging_enabled",!0)):"function"===typeof e?qU=e:(qU=null,LU.remove("logging_enabled"))},zU=function(){if(!0===VU&&(VU=!1,null===qU&&!0===LU.get("logging_enabled")&&BU(!0)),qU){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=jU.apply(null,t);qU(r)}},WU=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];zU.apply(void 0,[e].concat(n))}},HU=function(){var e="FIREBASE INTERNAL ERROR: "+jU.apply(void 0,arguments);MU.error(e)},KU=function(){var e="FIREBASE FATAL ERROR: ".concat(jU.apply(void 0,arguments));throw MU.error(e),new Error(e)},GU=function(){var e="FIREBASE WARNING: "+jU.apply(void 0,arguments);MU.warn(e)},QU=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},YU="[MIN_NAME]",$U="[MAX_NAME]",JU=function(e,t){if(e===t)return 0;if(e===YU||t===$U)return-1;if(t===YU||e===$U)return 1;var n=sj(e),r=sj(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},XU=function(e,t){return e===t?0:e<t?-1:1},ZU=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+$F(t))},ej=function e(t){if("object"!==typeof t||null===t)return $F(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=$F(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},tj=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function nj(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var rj=function(e){AF(!QU(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var ij=new RegExp("^-?(0*)\\d{1,10}$"),aj=-2147483648,oj=2147483647,sj=function(e){if(ij.test(e)){var t=Number(e);if(t>=aj&&t<=oj)return t}return null},uj=function(e){try{e()}catch(kz){setTimeout((function(){var t=kz.stack||"";throw GU("Exception was thrown by user callback.",t),kz}),Math.floor(0))}},cj=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},lj=function(){function e(t,n){var r=this;dt(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return vt(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){GU('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),hj=function(){function e(t,n,r){var i=this;dt(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return vt(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(zU("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',GU(e)}}]),e}(),fj=function(){function e(t){dt(this,e),this.accessToken=t}return vt(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();fj.OWNER="owner";var dj="5",pj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vj="websocket",yj="long_polling",mj=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];dt(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=DU.get("host:"+t)||this._host}return vt(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&DU.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function gj(e,t,n){var r;if(AF("string"===typeof t,"typeof type must == string"),AF("object"===typeof n,"typeof params must == object"),t===vj)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==yj)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return nj(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var kj=function(){function e(){dt(this,e),this.counters_={}}return vt(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;XF(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return UF(this.counters_)}}]),e}(),_j={},wj={};function bj(e){var t=e.toString();return _j[t]||(_j[t]=new kj),_j[t]}var xj=function(){function e(t){dt(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return vt(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&uj((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Ej="start",Tj="close",Ij=function(){function e(t,n,r,i,a,o,s){var u=this;dt(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=WU(t),this.stats_=bj(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),gj(n,yj,e)}}return vt(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new xj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(WF()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Cj((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Ej)n.id=a,n.password=o;else{if(i!==Tj)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=dj,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&pj.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=$F(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=MF(t),r=tj(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!WF()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=$F(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!WF()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Cj=function(){function e(t,n,r,i){if(dt(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,WF())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=FU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(kz){zU("frame writing exception"),kz.stack&&zU(kz.stack),zU(kz)}}}return vt(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;WF()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){zU("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(kz){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||zU("No IE domain setting required")}catch(kz){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Sj=null;"undefined"!==typeof MozWebSocket?Sj=MozWebSocket:"undefined"!==typeof WebSocket&&(Sj=WebSocket);var Nj=function(){function e(t,n,r,i,a,o,s){dt(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=WU(this.connId),this.stats_=bj(n),this.connURL=e.connectionURL_(n,o,s,i),this.nodeAdmin=n.nodeAdmin}return vt(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,DU.set("previous_websocket_failure",!0);try{if(WF()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(dj,"/").concat(PU,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/TeenCafe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o}),this.mySock=new Sj(this.connURL,[],i)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Sj(this.connURL,[],s)}}catch(kz){this.log_("Error instantiating WebSocket.");var u=kz.message||kz.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){DU.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=YF(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(AF(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=$F(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=tj(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(kz){this.log_("Exception thrown from WebSocket.send():",kz.message||kz.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={};return i.v=dj,!WF()&&"undefined"!==typeof location&&location.hostname&&pj.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),gj(e,vj,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Sj&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return DU.isInMemoryStorage||!0===DU.get("previous_websocket_failure")}}]),e}();Nj.responsesRequiredToBeHealthy=2,Nj.healthyTimeout=3e4;var Pj=function(){function e(t){dt(this,e),this.initTransports_(t)}return vt(e,[{key:"initTransports_",value:function(t){var n=Nj&&Nj.isAvailable(),r=n&&!Nj.previouslyFailed();if(t.webSocketOnly&&(n||GU("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Nj];else{var i,a=this.transports_=[],o=da(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Ij,Nj]}}]),e}(),Rj=function(){function e(t,n,r,i,a,o,s,u,c,l){dt(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=WU("c:"+this.id+":"),this.transportManager_=new Pj(n),this.log_("Connection created"),this.start_()}return vt(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=cj((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=ZU("t",e),n=ZU("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=ZU("t",e),n=ZU("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=ZU("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?HU("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):HU("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),dj!==n&&GU("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),cj((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cj((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(DU.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Aj=function(){function e(){dt(this,e)}return vt(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Oj=function(){function e(t){dt(this,e),this.allowedEvents_=t,this.listeners_={},AF(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return vt(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=ft(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){AF(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Dj=function(e){rn(n,e);var t=cn(n);function n(){var e;return dt(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||zF()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return vt(n,[{key:"getInitialEvent",value:function(e){return AF("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Oj),Lj=function(){function e(t,n){if(dt(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return vt(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Mj(){return new Lj("")}function Fj(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Uj(e){return e.pieces_.length-e.pieceNum_}function jj(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Lj(e.pieces_,t)}function qj(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Vj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Bj(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Lj(t,0)}function zj(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Lj)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Lj(n,0)}function Wj(e){return e.pieceNum_>=e.pieces_.length}function Hj(e,t){var n=Fj(e),r=Fj(t);if(null===n)return t;if(n===r)return Hj(jj(e),jj(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Kj(e,t){if(Uj(e)!==Uj(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Gj(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Uj(e)>Uj(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Qj=vt((function e(t,n){dt(this,e),this.errorPrefix_=n,this.parts_=Vj(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=aU(this.parts_[r]);Yj(this)}));function Yj(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$j(e))}function $j(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Jj=function(e){rn(n,e);var t=cn(n);function n(){var e,r,i;return dt(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return vt(n,[{key:"getInitialEvent",value:function(e){return AF("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Oj),Xj=1e3,Zj=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a,o,s,u,c){var l;if(dt(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=WU("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Xj,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!WF())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Jj.getInstance().on("visible",l.onVisible_,sn(l)),-1===e.host.indexOf("fblocal")&&Dj.getInstance().on("online",l.onOnline_,sn(l)),l}return vt(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_($F(i)),AF(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new VF,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),AF(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),AF(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=JF(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=JF(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),AF(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+$F(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):HU("Unrecognized action received from server: "+$F(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;AF(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xj,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Xj,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xj),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=si(ci().mark((function e(){var t,r,i,a,o,s,u,c,l,f,d,p,v,y,m=this;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},l=function(e){AF(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=h(d,2),v=p[0],y=p[1],s?zU("getToken() completed but was canceled"):(zU("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,u=new Rj(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){GU(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&GU(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){zU("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){zU("Resuming connection for reason: "+e),delete this.interruptReasons_[e],eU(this.interruptReasons_)&&(this.reconnectDelay_=Xj,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return ej(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Lj(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){zU("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){zU("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=da(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=da(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";WF()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+PU.replace(/\./g,"-")]=1,zF()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Dj.getInstance().currentlyOnline();return eU(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&XF(e,"w")){var n=ZF(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();GU("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Aj);Zj.nextPersistentConnectionId_=0,Zj.nextConnectionId_=0;var eq,tq=function(){function e(t,n){dt(this,e),this.name=t,this.node=n}return vt(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),nq=function(){function e(){dt(this,e)}return vt(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new tq(YU,e),r=new tq(YU,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return tq.MIN}}]),e}(),rq=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"compare",value:function(e,t){return JU(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw OF("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return tq.MIN}},{key:"maxPost",value:function(){return new tq($U,eq)}},{key:"makePost",value:function(e,t){return AF("string"===typeof e,"KeyIndex indexValue must always be a string."),new tq(e,eq)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return eq},set:function(e){eq=e}}]),n}(nq),iq=new rq,aq=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;dt(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return vt(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),oq=function(){function e(t,n,r,i,a){dt(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:cq.EMPTY_NODE,this.right=null!=a?a:cq.EMPTY_NODE}return vt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return cq.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return cq.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();oq.RED=!0,oq.BLACK=!1;var sq,uq=function(){function e(){dt(this,e)}return vt(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new oq(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),cq=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;dt(this,e),this.comparator_=t,this.root_=n}return vt(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,oq.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,oq.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new aq(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new aq(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new aq(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new aq(this.root_,null,this.comparator_,!0,e)}}]),e}();function lq(e,t){return JU(e.name,t.name)}function hq(e,t){return JU(e,t)}cq.EMPTY_NODE=new uq;var fq,dq,pq,vq=function(e){return"number"===typeof e?"number:"+rj(e):"string:"+e},yq=function(e){if(e.isLeafNode()){var t=e.val();AF("string"===typeof t||"number"===typeof t||"object"===typeof t&&XF(t,".sv"),"Priority must be a string or number.")}else AF(e===sq||e.isEmpty(),"priority of unexpected type.");AF(e===sq||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},mq=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;dt(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,AF(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),yq(this.priorityNode_)}return vt(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Wj(t)?this:".priority"===Fj(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Fj(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(AF(".priority"!==r||1===Uj(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(jj(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+vq(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?rj(this.value_):this.value_,this.lazyHash_=UU(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(AF(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return AF(i>=0,"Unknown leaf type: "+n),AF(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return fq},set:function(e){fq=e}}]),e}();mq.VALUE_TYPE_ORDER=["object","boolean","number","string"];var gq,kq,_q=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?JU(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return tq.MIN}},{key:"maxPost",value:function(){return new tq($U,new mq("[PRIORITY-POST]",pq))}},{key:"makePost",value:function(e,t){var n=dq(e);return new tq(t,new mq("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(nq),wq=new _q,bq=Math.log(2),xq=function(){function e(t){dt(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/bq,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return vt(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Eq=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new oq(o,a.node,oq.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new oq(o,a.node,oq.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new oq(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,oq.BLACK):(s(h,oq.BLACK),s(h,oq.RED))}return a}(new xq(e.length));return new cq(r||t,a)},Tq={},Iq=function(){function e(t,n){dt(this,e),this.indexes_=t,this.indexSet_=n}return vt(e,[{key:"get",value:function(e){var t=ZF(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof cq?t:null}},{key:"hasIndex",value:function(e){return XF(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){AF(t!==iq,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(tq.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?Eq(i,t.getCompare()):Tq;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=tU(this.indexes_,(function(e,i){var a=ZF(r.indexSet_,i);if(AF(a,"Missing index implementation for "+i),e===Tq){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(tq.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),Eq(o,a.getCompare())}return Tq}var c=n.get(t.name),l=e;return c&&(l=l.remove(new tq(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(tU(this.indexes_,(function(e){if(e===Tq)return e;var r=n.get(t.name);return r?e.remove(new tq(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return AF(Tq&&wq,"ChildrenNode.ts has not been loaded"),gq=gq||new e({".priority":Tq},{".priority":wq})}}]),e}(),Cq=function(){function e(t,n,r){dt(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&yq(this.priorityNode_),this.children_.isEmpty()&&AF(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return vt(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||kq}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?kq:t}},{key:"getChild",value:function(e){var t=Fj(e);return null===t?this:this.getImmediateChild(t).getChild(jj(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(AF(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new tq(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?kq:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Fj(e);if(null===n)return t;AF(".priority"!==Fj(e)||1===Uj(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(jj(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(wq,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+vq(this.getPriority().val())+":"),this.forEachChild(wq,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":UU(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new tq(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new tq(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new tq(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,tq.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,tq.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Nq?-1:0}},{key:"withIndex",value:function(t){if(t===iq||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===iq||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(wq),r=t.getIterator(wq),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===iq?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return kq||(kq=new e(new cq(hq),null,Iq.Default))}}]),e}();Cq.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Sq=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.call(this,new cq(hq),Cq.EMPTY_NODE,Iq.Default)}return vt(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Cq.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Cq),Nq=new Sq;Object.defineProperties(tq,{MIN:{value:new tq(YU,Cq.EMPTY_NODE)},MAX:{value:new tq($U,Nq)}}),rq.__EMPTY_NODE=Cq.EMPTY_NODE,mq.__childrenNodeConstructor=Cq,function(e){sq=e}(Nq),function(e){pq=e}(Nq);function Pq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Cq.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),AF(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new mq(n,Pq(t))}if(e instanceof Array){var r=Cq.EMPTY_NODE;return nj(e,(function(t,n){if(XF(e,t)&&"."!==t.substring(0,1)){var i=Pq(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Pq(t))}var i=[],a=!1,o=e;if(nj(o,(function(e,t){if("."!==e.substring(0,1)){var n=Pq(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new tq(e,n)))}})),0===i.length)return Cq.EMPTY_NODE;var s=Eq(i,lq,(function(e){return e.name}),hq);if(a){var u=Eq(i,wq.getCompare());return new Cq(s,Pq(t),new Iq({".priority":u},{".priority":wq}))}return new Cq(s,Pq(t),Iq.Default)}!function(e){dq=e}(Pq);var Rq=function(e){rn(n,e);var t=cn(n);function n(e){var r;return dt(this,n),(r=t.call(this)).indexPath_=e,AF(!Wj(e)&&".priority"!==Fj(e),"Can't create PathIndex with empty path or .priority key"),r}return vt(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?JU(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Pq(e),r=Cq.EMPTY_NODE.updateChild(this.indexPath_,n);return new tq(t,r)}},{key:"maxPost",value:function(){var e=Cq.EMPTY_NODE.updateChild(this.indexPath_,Nq);return new tq($U,e)}},{key:"toString",value:function(){return Vj(this.indexPath_,0).join("/")}}]),n}(nq),Aq=function(e){rn(n,e);var t=cn(n);function n(){return dt(this,n),t.apply(this,arguments)}return vt(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?JU(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return tq.MIN}},{key:"maxPost",value:function(){return tq.MAX}},{key:"makePost",value:function(e,t){var n=Pq(e);return new tq(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(nq),Oq=new Aq,Dq="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function Lq(e){return{type:"value",snapshotNode:e}}function Mq(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Fq(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Uq(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var jq=function(){function e(){dt(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wq}return vt(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return AF(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return AF(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:YU}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return AF(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return AF(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$U}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return AF(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===wq}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function qq(e){var t,n={};return e.isDefault()||(e.index_===wq?t="$priority":e.index_===Oq?t="$value":e.index_===iq?t="$key":(AF(e.index_ instanceof Rq,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=$F(t),e.startSet_&&(n.startAt=$F(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+$F(e.indexStartName_))),e.endSet_&&(n.endAt=$F(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+$F(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Vq(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==wq&&(t.i=e.index_.toString()),t}var Bq=function(e){rn(n,e);var t=cn(n);function n(e,r,i,a){var o;return dt(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=WU("p:rest:"),o.listens_={},o}return vt(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=qq(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ZF(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=qq(e._queryParams),r=e._path.toString(),i=new VF;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=h(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+nU(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=YF(c.responseText)}catch(kz){GU("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&GU("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(AF(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Aj),zq=function(){function e(){dt(this,e),this.rootNode_=Cq.EMPTY_NODE}return vt(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Wq(){return{value:null,children:new Map}}function Hq(e,t,n){if(Wj(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Fj(t);e.children.has(r)||e.children.set(r,Wq()),Hq(e.children.get(r),t=jj(t),n)}}function Kq(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Kq(r,new Lj(t.toString()+"/"+e),n)}))}var Gq,Qq=function(){function e(t){dt(this,e),this.collection_=t,this.last_=null}return vt(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&nj(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Yq=function(){function e(t,n){dt(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Qq(t);var r=1e4+2e4*Math.random();cj(this.reportStats_.bind(this),Math.floor(r))}return vt(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;nj(t,(function(t,i){i>0&&XF(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),cj(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function $q(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Gq||(Gq={}));var Jq,Xq=function(){function e(t,n,r){dt(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Gq.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return vt(e,[{key:"operationForChild",value:function(t){if(Wj(this.path)){if(null!=this.affectedTree.value)return AF(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Lj(t));return new e(Mj(),n,this.revert)}return AF(Fj(this.path)===t,"operationForChild called for unrelated child."),new e(jj(this.path),this.affectedTree,this.revert)}}]),e}(),Zq=function(){function e(t,n,r){dt(this,e),this.source=t,this.path=n,this.snap=r,this.type=Gq.OVERWRITE}return vt(e,[{key:"operationForChild",value:function(t){return Wj(this.path)?new e(this.source,Mj(),this.snap.getImmediateChild(t)):new e(this.source,jj(this.path),this.snap)}}]),e}(),eV=function(){function e(t,n,r){dt(this,e),this.source=t,this.path=n,this.children=r,this.type=Gq.MERGE}return vt(e,[{key:"operationForChild",value:function(t){if(Wj(this.path)){var n=this.children.subtree(new Lj(t));return n.isEmpty()?null:n.value?new Zq(this.source,Mj(),n.value):new e(this.source,Mj(),n)}return AF(Fj(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,jj(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),tV=function(){function e(t,n,r){dt(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return vt(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Wj(e))return this.isFullyInitialized()&&!this.filtered_;var t=Fj(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function nV(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw OF("Should only compare child_ events.");var r=new tq(t.childName,t.snapshotNode),i=new tq(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function rV(e,t){return{eventCache:e,serverCache:t}}function iV(e,t,n,r){return rV(new tV(t,n,r),e.serverCache)}function aV(e,t,n,r){return rV(e.eventCache,new tV(t,n,r))}function oV(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function sV(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var uV=function(){return Jq||(Jq=new cq(XU)),Jq},cV=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uV();dt(this,e),this.value=t,this.children=n}return vt(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Mj(),value:this.value};if(Wj(e))return null;var n=Fj(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(jj(e),t);return null!=i?{path:zj(new Lj(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Wj(t))return this;var n=Fj(t),r=this.children.get(n);return null!==r?r.subtree(jj(t)):new e(null)}},{key:"set",value:function(t,n){if(Wj(t))return new e(n,this.children);var r=Fj(t),i=(this.children.get(r)||new e(null)).set(jj(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Wj(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Fj(t),r=this.children.get(n);if(r){var i,a=r.remove(jj(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Wj(e))return this.value;var t=Fj(e),n=this.children.get(t);return n?n.get(jj(e)):null}},{key:"setTree",value:function(t,n){if(Wj(t))return n;var r,i=Fj(t),a=(this.children.get(i)||new e(null)).setTree(jj(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Mj(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(zj(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Mj(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Wj(e))return null;var i=Fj(e),a=this.children.get(i);return a?a.findOnPath_(jj(e),zj(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Mj(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Wj(t))return this;this.value&&r(n,this.value);var i=Fj(t),a=this.children.get(i);return a?a.foreachOnPath_(jj(t),zj(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Mj(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(zj(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return nj(t,(function(e,t){n=n.set(new Lj(e),t)})),n}}]),e}(),lV=function(){function e(t){dt(this,e),this.writeTree_=t}return vt(e,null,[{key:"empty",value:function(){return new e(new cV(null))}}]),e}();function hV(e,t,n){if(Wj(t))return new lV(new cV(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Hj(i,t);return a=a.updateChild(o,n),new lV(e.writeTree_.set(i,a))}var s=new cV(n),u=e.writeTree_.setTree(t,s);return new lV(u)}function fV(e,t,n){var r=e;return nj(n,(function(e,n){r=hV(r,zj(t,e),n)})),r}function dV(e,t){if(Wj(t))return lV.empty();var n=e.writeTree_.setTree(t,new cV(null));return new lV(n)}function pV(e,t){return null!=vV(e,t)}function vV(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Hj(n.path,t)):null}function yV(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(wq,(function(e,n){t.push(new tq(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new tq(e,n.value))})),t}function mV(e,t){if(Wj(t))return e;var n=vV(e,t);return new lV(null!=n?new cV(n):e.writeTree_.subtree(t))}function gV(e){return e.writeTree_.isEmpty()}function kV(e,t){return _V(Mj(),e.writeTree_,t)}function _V(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(AF(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=_V(zj(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(zj(e,".priority"),r)),n}function wV(e,t){return LV(t,e)}function bV(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function xV(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));AF(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&EV(s,r.path)?i=!1:Gj(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=IV(e.allWrites,TV,Mj()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=dV(e.visibleWrites,r.path):nj(r.children,(function(t){e.visibleWrites=dV(e.visibleWrites,zj(r.path,t))}));return!0}return!1}function EV(e,t){if(e.snap)return Gj(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Gj(zj(e.path,n),t))return!0;return!1}function TV(e){return e.visible}function IV(e,t,n){for(var r=lV.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Gj(n,o)?r=hV(r,s=Hj(n,o),a.snap):Gj(o,n)&&(s=Hj(o,n),r=hV(r,Mj(),a.snap.getChild(s)));else{if(!a.children)throw OF("WriteRecord should have .snap or .children");if(Gj(n,o))r=fV(r,s=Hj(n,o),a.children);else if(Gj(o,n))if(Wj(s=Hj(o,n)))r=fV(r,Mj(),a.children);else{var u=ZF(a.children,Fj(s));if(u){var c=u.getChild(jj(s));r=hV(r,Mj(),c)}}}}}return r}function CV(e,t,n,r,i){if(r||i){var a=mV(e.visibleWrites,t);if(!i&&gV(a))return n;if(i||null!=n||pV(a,Mj())){return kV(IV(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Gj(e.path,t)||Gj(t,e.path))}),t),n||Cq.EMPTY_NODE)}return null}var o=vV(e.visibleWrites,t);if(null!=o)return o;var s=mV(e.visibleWrites,t);return gV(s)?n:null!=n||pV(s,Mj())?kV(s,n||Cq.EMPTY_NODE):null}function SV(e,t,n,r){return CV(e.writeTree,e.treePath,t,n,r)}function NV(e,t){return function(e,t,n){var r=Cq.EMPTY_NODE,i=vV(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(wq,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=mV(e.visibleWrites,t);return n.forEachChild(wq,(function(e,t){var n=kV(mV(a,new Lj(e)),t);r=r.updateImmediateChild(e,n)})),yV(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return yV(mV(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function PV(e,t,n,r){return function(e,t,n,r,i){AF(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=zj(t,n);if(pV(e.visibleWrites,a))return null;var o=mV(e.visibleWrites,a);return gV(o)?i.getChild(n):kV(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function RV(e,t){return function(e,t){return vV(e.visibleWrites,t)}(e.writeTree,zj(e.treePath,t))}function AV(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=mV(e.visibleWrites,t),c=vV(u,Mj());if(null!=c)s=c;else{if(null==n)return[];s=kV(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function OV(e,t,n){return function(e,t,n,r){var i=zj(t,n),a=vV(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?kV(mV(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function DV(e,t){return LV(zj(e.treePath,t),e.writeTree)}function LV(e,t){return{treePath:e,writeTree:t}}var MV=function(){function e(){dt(this,e),this.changeMap=new Map}return vt(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;AF("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),AF(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Uq(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Fq(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Mq(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw OF("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Uq(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),FV=function(){function e(){dt(this,e)}return vt(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}(),UV=new FV,jV=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;dt(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return vt(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new tV(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return OV(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sV(this.viewCache_),i=AV(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function qV(e,t,n,r,i){var a,o,s=new MV;if(n.type===Gq.OVERWRITE){var u=n;u.source.fromUser?a=zV(e,t,u.path,u.snap,r,i,s):(AF(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Wj(u.path),a=BV(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===Gq.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=zj(n,r);WV(t,Fj(c))&&(s=zV(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=zj(n,r);WV(t,Fj(c))||(s=zV(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(AF(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=KV(e,t,c.path,c.children,r,i,o,s))}else if(n.type===Gq.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=RV(r,n))return t;var s,u=new jV(r,t,i),c=t.eventCache.getNode();if(Wj(n)||".priority"===Fj(n)){var l;if(t.serverCache.isFullyInitialized())l=SV(r,sV(t));else{var h=t.serverCache.getNode();AF(h instanceof Cq,"serverChildren would be complete if leaf node"),l=NV(r,h)}l=l,s=e.filter.updateFullNode(c,l,a)}else{var f=Fj(n),d=OV(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,jj(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,Cq.EMPTY_NODE,jj(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=SV(r,sV(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=RV(r,Mj()),iV(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=RV(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Wj(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return BV(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Wj(n)){var c=new cV(null);return u.getNode().forEachChild(iq,(function(e,t){c=c.set(new Lj(e),t)})),KV(e,t,n,c,i,a,s,o)}return t}var l=new cV(null);return r.foreach((function(e,t){var r=zj(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),KV(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Gq.LISTEN_COMPLETE)throw OF("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=aV(t,a.getNode(),a.isFullyInitialized()||Wj(n),a.isFiltered());return VV(e,o,n,r,UV,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=oV(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Lq(oV(t)))}}(t,a,h),{viewCache:a,changes:h}}function VV(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=RV(r,n))return t;if(Wj(n))if(AF(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=sV(t),l=NV(r,c instanceof Cq?c:Cq.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=SV(r,sV(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Fj(n);if(".priority"===f){AF(1===Uj(n),"Can't have a priority with additional path components");var d=u.getNode(),p=PV(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=jj(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=PV(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(y,m):u.getNode().getImmediateChild(f)}else v=OV(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,y,i,a):u.getNode()}}return iV(t,o,u.isFullyInitialized()||Wj(n),e.filter.filtersNodes())}function BV(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Wj(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=Fj(n);if(!c.isCompleteForPath(n)&&Uj(n)>1)return t;var d=jj(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,UV,null)}var v=aV(t,u,c.isFullyInitialized()||Wj(n),l.filtersNodes());return VV(e,v,n,i,new jV(i,v,a),s)}function zV(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new jV(i,t,a);if(Wj(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=iV(t,u,!0,e.filter.filtersNodes());else{var h=Fj(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=iV(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=jj(n),p=c.getNode().getImmediateChild(h);if(Wj(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===qj(d)&&v.getChild(Bj(d)).isEmpty()?v:v.updateChild(d,r):Cq.EMPTY_NODE}if(p.equals(f))s=t;else s=iV(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function WV(e,t){return e.eventCache.isCompleteForChild(t)}function HV(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function KV(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=Wj(n)?r:new cV(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=HV(0,t.serverCache.getNode().getImmediateChild(n),r);c=BV(e,c,new Lj(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=HV(0,t.serverCache.getNode().getImmediateChild(n),r);c=BV(e,c,new Lj(n),h,i,a,o,s)}})),c}var GV;function QV(e,t){var n=sV(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Wj(t)&&!n.getImmediateChild(Fj(t)).isEmpty())?n.getChild(t):null}function YV(e,t,n,r){t.type===Gq.MERGE&&null!==t.source.queryId&&(AF(sV(e.viewCache_),"We should always have a full cache before handling merges"),AF(oV(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=qV(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,AF(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),AF(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),AF(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,$V(e,s.changes,s.viewCache.eventCache.getNode(),null)}function $V(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),nV(e,i,"child_removed",t,r,n),nV(e,i,"child_added",t,r,n),nV(e,i,"child_moved",a,r,n),nV(e,i,"child_changed",t,r,n),nV(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var JV;function XV(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return AF(null!=a,"SyncTree gave us an op for an invalid query."),YV(a,t,n,r)}var o,s=[],u=da(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(YV(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function ZV(e,t){var n,r=null,i=da(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||QV(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var eB=vt((function e(t){dt(this,e),this.listenProvider_=t,this.syncPointTree_=new cV(null),this.pendingWriteTree_={visibleWrites:lV.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function tB(e,t,n,r,i){return function(e,t,n,r,i){AF(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=hV(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?aB(e,new Zq({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function nB(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=bV(e.pendingWriteTree_,t),i=xV(e.pendingWriteTree_,t);if(i){var a=new cV(null);return null!=r.snap?a=a.set(Mj(),!0):nj(r.children,(function(e){a=a.set(new Lj(e),!0)})),aB(e,new Xq(r.path,a,n))}return[]}function rB(e,t,n){return aB(e,new Zq({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function iB(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=ZV(n,Hj(e,t));if(r)return r}));return CV(r,t,i,n,!0)}function aB(e,t){return oB(t,e.syncPointTree_,null,wV(e.pendingWriteTree_,Mj()))}function oB(e,t,n,r){if(Wj(e.path))return sB(e,t,n,r);var i=t.get(Mj());null==n&&null!=i&&(n=ZV(i,Mj()));var a=[],o=Fj(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=DV(r,o);a=a.concat(oB(s,u,c,l))}return i&&(a=a.concat(XV(i,e,r,n))),a}function sB(e,t,n,r){var i=t.get(Mj());null==n&&null!=i&&(n=ZV(i,Mj()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=DV(r,t),u=e.operationForChild(t);u&&(a=a.concat(sB(u,i,o,s)))})),i&&(a=a.concat(XV(i,e,r,n))),a}function uB(e,t){return e.tagToQueryMap.get(t)}function cB(e){var t=e.indexOf("$");return AF(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Lj(e.substr(0,t))}}function lB(e,t,n){var r=e.syncPointTree_.get(t);return AF(r,"Missing sync point for query tag that we're tracking"),XV(r,n,wV(e.pendingWriteTree_,t),null)}var hB=function(){function e(t){dt(this,e),this.node_=t}return vt(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),fB=function(){function e(t,n){dt(this,e),this.syncTree_=t,this.path_=n}return vt(e,[{key:"getImmediateChild",value:function(t){var n=zj(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return iB(this.syncTree_,this.path_)}}]),e}(),dB=function(e,t,n){return e&&"object"===typeof e?(AF(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?pB(e[".sv"],t,n):"object"===typeof e[".sv"]?vB(e[".sv"],t):void AF(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},pB=function(e,t,n){if("timestamp"===e)return n.timestamp;AF(!1,"Unexpected server value: "+e)},vB=function(e,t,n){e.hasOwnProperty("increment")||AF(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&AF(!1,"Unexpected increment value: "+r);var i=t.node();if(AF(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},yB=function(e,t,n,r){return gB(t,new fB(n,e),r)},mB=function(e,t,n){return gB(e,new hB(t),n)};function gB(e,t,n){var r,i=e.getPriority().val(),a=dB(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=dB(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new mq(s,Pq(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new mq(a))),u.forEachChild(wq,(function(e,i){var a=gB(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var kB=vt((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};dt(this,e),this.name=t,this.parent=n,this.node=r}));function _B(e,t){for(var n=t instanceof Lj?t:new Lj(t),r=e,i=Fj(n);null!==i;){var a=ZF(r.node.children,i)||{children:{},childCount:0};r=new kB(i,r,a),i=Fj(n=jj(n))}return r}function wB(e){return e.node.value}function bB(e,t){e.node.value=t,CB(e)}function xB(e){return e.node.childCount>0}function EB(e,t){nj(e.node.children,(function(n,r){t(new kB(n,e,r))}))}function TB(e,t,n,r){n&&!r&&t(e),EB(e,(function(e){TB(e,t,!0,r)})),n&&r&&t(e)}function IB(e){return new Lj(null===e.parent?e.name:IB(e.parent)+"/"+e.name)}function CB(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===wB(e)&&!xB(e)}(n),i=XF(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,CB(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,CB(e))}(e.parent,e.name,e)}var SB=/[\[\].#$\/\u0000-\u001F\u007F]/,NB=/[\[\].#$\u0000-\u001F\u007F]/,PB=10485760,RB=function(e){return"string"===typeof e&&0!==e.length&&!SB.test(e)},AB=function(e){return"string"===typeof e&&0!==e.length&&!NB.test(e)},OB=function e(t,n,r){var i=r instanceof Lj?new Qj(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+$j(i));if("function"===typeof n)throw new Error(t+"contains a function "+$j(i)+" with contents = "+n.toString());if(QU(n))throw new Error(t+"contains "+n.toString()+" "+$j(i));if("string"===typeof n&&n.length>3495253.3333333335&&aU(n)>PB)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+$j(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(nj(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!RB(n)))throw new Error(t+" contains an invalid key ("+n+") "+$j(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=aU(u),Yj(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=aU(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+$j(i)+" in addition to actual children.")}},DB=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!RB(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),AB(e)}(n))throw new Error(iU(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},LB=vt((function e(){dt(this,e),this.eventLists_=[],this.recursionDepth_=0}));function MB(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Kj(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function FB(e,t,n){MB(e,n),UB(e,(function(e){return Gj(e,t)||Gj(t,e)}))}function UB(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(jB(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function jB(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();qU&&zU("event: "+n.toString()),uj(r)}}}var qB="repo_interrupt",VB=function(){function e(t,n,r,i){dt(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new LB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wq(),this.transactionQueueTree_=new kB,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return vt(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function BB(e,t,n){if(e.stats_=bj(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Bq(e.repoInfo_,(function(t,n,r,i){HB(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return KB(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$F(n)}catch(kz){throw new Error("Invalid authOverride provided: "+kz)}}e.persistentConnection_=new Zj(e.repoInfo_,t,(function(t,n,r,i){HB(e,t,n,r,i)}),(function(t){KB(e,t)}),(function(t){!function(e,t){nj(t,(function(t,n){GB(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return wj[n]||(wj[n]=t()),wj[n]}(e.repoInfo_,(function(){return new Yq(e.stats_,e.server_)})),e.infoData_=new zq,e.infoSyncTree_=new eB({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=rB(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),GB(e,"connected",!1),e.serverSyncTree_=new eB({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);FB(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function zB(e){var t=e.infoData_.getNode(new Lj(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function WB(e){return(t=(t={timestamp:zB(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function HB(e,t,n,r,i){e.dataUpdateCount++;var a=new Lj(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=tU(n,(function(e){return Pq(e)}));o=function(e,t,n,r){var i=uB(e,r);if(i){var a=cB(i),o=a.path,s=a.queryId,u=Hj(o,t),c=cV.fromObject(n);return lB(e,o,new eV($q(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Pq(n);o=function(e,t,n,r){var i=uB(e,r);if(null!=i){var a=cB(i),o=a.path,s=a.queryId,u=Hj(o,t);return lB(e,o,new Zq($q(s),u,n))}return[]}(e.serverSyncTree_,a,u,i)}else if(r){var c=tU(n,(function(e){return Pq(e)}));o=function(e,t,n){var r=cV.fromObject(n);return aB(e,new eV({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Pq(n);o=rB(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=ez(e,a)),FB(e.eventQueue_,h,o)}function KB(e,t){GB(e,"connected",t),!1===t&&function(e){$B(e,"onDisconnectEvents");var t=WB(e),n=Wq();Kq(e.onDisconnect_,Mj(),(function(r,i){var a=yB(r,i,e.serverSyncTree_,t);Hq(n,r,a)}));var r=[];Kq(n,Mj(),(function(t,n){r=r.concat(rB(e.serverSyncTree_,t,n));var i=az(e,t);ez(e,i)})),e.onDisconnect_=Wq(),FB(e.eventQueue_,Mj(),r)}(e)}function GB(e,t,n){var r=new Lj("/.info/"+t),i=Pq(n);e.infoData_.updateSnapshot(r,i);var a=rB(e.infoSyncTree_,r,i);FB(e.eventQueue_,r,a)}function QB(e){return e.nextWriteId_++}function YB(e){e.persistentConnection_&&e.persistentConnection_.interrupt(qB)}function $B(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];zU.apply(void 0,[t].concat(r))}function JB(e,t,n){return iB(e.serverSyncTree_,t,n)||Cq.EMPTY_NODE}function XB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||iz(e,t),wB(t)){var n=nz(e,t);AF(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&ZB(e,IB(t),n)}else xB(t)&&EB(t,(function(t){XB(e,t)}))}function ZB(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=JB(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];AF(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=Hj(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){$B(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(nB(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);iz(e,_B(e.transactionQueueTree_,t)),XB(e,e.transactionQueueTree_),FB(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)uj(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{GU("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}ez(e,t)}}),o)}function ez(e,t){var n=tz(e,t),r=IB(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=Hj(n,u.path),l=!1,h=void 0;if(AF(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(nB(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(nB(e.serverSyncTree_,u.currentWriteId,!0));else{var f=JB(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){OB("transaction failed: Data returned ",d,u.path);var p=Pq(d);"object"===typeof d&&null!=d&&XF(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,y=WB(e),m=mB(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=QB(e),o.splice(o.indexOf(v),1),i=(i=i.concat(tB(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(nB(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(nB(e.serverSyncTree_,u.currentWriteId,!0))}FB(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);iz(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)uj(r[c]);XB(e,e.transactionQueueTree_)}(e,nz(e,n),r),r}function tz(e,t){var n,r=e.transactionQueueTree_;for(n=Fj(t);null!==n&&void 0===wB(r);)r=_B(r,n),n=Fj(t=jj(t));return r}function nz(e,t){var n=[];return rz(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function rz(e,t,n){var r=wB(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);EB(t,(function(t){rz(e,t,n)}))}function iz(e,t){var n=wB(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,bB(t,n.length>0?n:void 0)}EB(t,(function(t){iz(e,t)}))}function az(e,t){var n=IB(tz(e,t)),r=_B(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){oz(e,t)})),oz(e,r),TB(r,(function(t){oz(e,t)})),n}function oz(e,t){var n=wB(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(AF(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(AF(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(nB(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?bB(t,void 0):n.length=a+1,FB(e.eventQueue_,IB(t),i);for(var s=0;s<r.length;s++)uj(r[s])}}var sz=function(e,t){var n=uz(e),r=n.namespace;"firebase.com"===n.domain&&KU(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||KU("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&GU("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new mj(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new Lj(n.pathString)}},uz=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(kz){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=da(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):GU("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},cz=function(){function e(t,n,r,i){dt(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return vt(e,[{key:"key",get:function(){return Wj(this._path)?null:qj(this._path)}},{key:"ref",get:function(){return new lz(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Vq(this._queryParams),t=ej(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Vq(this._queryParams)}},{key:"isEqual",value:function(t){var n;if(!((t=(n=t)&&n._delegate?n._delegate:n)instanceof e))return!1;var r=this._repo===t._repo,i=Kj(this._path,t._path),a=this._queryIdentifier===t._queryIdentifier;return r&&i&&a}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var lz=function(e){rn(n,e);var t=cn(n);function n(e,r){return dt(this,n),t.call(this,e,r,new jq,!1)}return vt(n,[{key:"parent",get:function(){var e=Bj(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(cz);!function(e){AF(!GV,"__referenceConstructor has already been defined"),GV=e}(lz),function(e){AF(!JV,"__referenceConstructor has already been defined"),JV=e}(lz);var hz={},fz=!1;function dz(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||KU("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zU("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=sz(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/TeenCafe",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=sz(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new fj(fj.OWNER):new hj(e.name,e.options,t);DB("Invalid Firebase Database URL",s),Wj(s.path)||KU("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=hz[t.name];i||(i={},hz[t.name]=i);var a=i[e.toURLString()];a&&KU("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new VB(e,fz,n,r),i[e.toURLString()]=a,a}(u,e,l,new lj(e.name,n));return new pz(h,e)}var pz=function(){function e(t,n){dt(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return vt(e,[{key:"_repo",get:function(){return this._instanceStarted||(BB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new lz(this._repo,Mj())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=hz[t];n&&n[e.key]===e||KU("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),YB(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&KU("Cannot call "+e+" on a deleted database.")}}]),e}();Zj.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Zj.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){PU=e}("9.4.1"),TU(new oU("database",(function(e,t){var n=t.instanceIdentifier;return dz(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),CU(SU,NU,e),CU(SU,NU,"esm2017")}();var vz=function(){var e=(0,t.useRef)(),n=(0,t.useRef)(),r=(0,t.useRef)(),i=h((0,t.useState)(""),2),a=i[0],s=(i[1],h((0,t.useState)(!1),2)),u=s[0],c=(s[1],h((0,t.useState)(),2)),l=c[0],f=(c[1],h((0,t.useState)(),2)),d=f[0],p=(f[1],h((0,t.useState)({fName:"",lName:"",email:"",pnumber:"",password:""}),2)),v=p[0],y=p[1],m=function(){var e=si(ci().mark((function e(t){var n,r,i,a,o;return ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.fName,r=v.lName,i=v.email,a=v.pnumber,o=v.password,e.next=3,fetch("https://a-dev-auth-default-rtdb.firebaseio.com/simpleform.json",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({fName:n,lName:r,email:i,pnumber:a,password:o})});case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{children:[(0,x.jsx)("br",{}),(0,x.jsx)("br",{}),(0,x.jsx)("br",{}),(0,x.jsx)("h1",{className:"mb-3",children:"Sign Up"}),(0,x.jsxs)(na,{className:"mt-30 w-50 mx-auto",onSubmit:m,children:[a&&(0,x.jsx)(ca,{varient:"danger",children:a}),(0,x.jsxs)(na.Group,{className:"mb-3",children:[(0,x.jsx)(na.Label,{children:"First Name"}),(0,x.jsx)(na.Control,{type:"text",placeholder:"First Name",value:l,onChange:function(e){return y(o(o({},v),{},{fName:e.target.value}))},required:!0})]}),(0,x.jsxs)(na.Group,{className:"mb-3",children:[(0,x.jsx)(na.Label,{children:"Last Name"}),(0,x.jsx)(na.Control,{type:"text",placeholder:"Last Name",value:d,onChange:function(e){return y(o(o({},v),{},{lName:e.target.value}))},required:!0})]}),(0,x.jsxs)(na.Group,{className:"mb-3",children:[(0,x.jsx)(na.Label,{children:"Email Address"}),(0,x.jsx)(na.Control,{type:"email",ref:r,placeholder:"Email Address",onChange:function(e){return y(o(o({},v),{},{email:e.target.value}))},required:!0})]}),(0,x.jsxs)(na.Group,{className:"mb-3",children:[(0,x.jsx)(na.Label,{children:"Phone Number"}),(0,x.jsx)(na.Control,{type:"tel",placeholder:"Phone Number",onChange:function(e){return y(o(o({},v),{},{pnumber:e.target.value}))}})]}),(0,x.jsxs)(na.Group,{className:"mb-3",children:[(0,x.jsx)(na.Label,{children:"Password"}),(0,x.jsx)(na.Control,{type:"password",ref:e,placeholder:"Password",onChange:function(e){return y(o(o({},v),{},{password:e.target.value}))}})]}),(0,x.jsxs)(na.Group,{className:"mb-3",children:[(0,x.jsx)(na.Label,{children:"Confirm Password"}),(0,x.jsx)(na.Control,{type:"password",ref:n,placeholder:"Confirm Password"})]}),(0,x.jsx)(fa,{variant:"primary",disabled:u,type:"submit",children:"Submit"})]}),(0,x.jsx)("br",{}),(0,x.jsx)("br",{}),(0,x.jsx)("br",{})]})};var yz=function(){return(0,x.jsx)("div",{children:(0,x.jsxs)("footer",{className:"footer-distributed",children:[(0,x.jsx)("div",{className:"footer-left",children:(0,x.jsx)("img",{src:n(954),alt:"footer-logo"})}),(0,x.jsxs)("div",{className:"footer-center",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("i",{className:"contact"}),(0,x.jsx)("p",{children:"Contact Us"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("i",{className:"fa fa-map-marker"}),(0,x.jsxs)("p",{children:[(0,x.jsx)("span",{children:"114 3 Ave SW"})," Calgary, Canada"]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("i",{className:"fa fa-phone"}),(0,x.jsx)("p",{children:"403-771-8158"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("i",{className:"fa fa-envelope"}),(0,x.jsx)("p",{children:(0,x.jsx)("a",{href:"mailto:calgaryteencafe@gmail.com",children:"CalgaryTeenCafe@gmail.com"})})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("i",{className:"fa fa-envelope"}),(0,x.jsx)("p",{children:(0,x.jsx)("a",{href:"https://discord.gg/TmRyb88ZmV",children:"Discord Server"})})]})]})]})})};var mz=function(){return(0,x.jsx)("div",{className:"App",children:(0,x.jsxs)($r,{basename:"/TeenCafe",children:[(0,x.jsx)(tr,{}),(0,x.jsx)("div",{className:"pl-20",children:(0,x.jsxs)(Yr,{children:[(0,x.jsx)(zr,{exact:!0,path:"/",component:ai}),(0,x.jsx)(zr,{exact:!0,path:"/TeenCafe",component:vz})]})}),(0,x.jsx)(yz,{})]})})},gz=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.render((0,x.jsx)(t.StrictMode,{children:(0,x.jsx)(mz,{})}),document.getElementById("root")),gz()}()}();
//# sourceMappingURL=main.47a3349a.js.map